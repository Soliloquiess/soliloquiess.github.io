---
title: "[js] Javascript&Jquery part2"
layout: post
subtitle: JS
date: "2021-08-16-23:45:51 +0900"

categories: study
tags: JS
# layout: post
# title:  WebFrontEnd
# subtitle:   "시작하기"
# categories: study
# tags: java
comments: true
---

### 변수, 사칙연산 연습

Q1. 변수를 만들어봅시다



내 나이와 출신지역을 자바스크립트 변수에 저장해봅시다.

나이는 맨날 변하니 재할당가능한 변수,

출신지역은 바뀌지 않으니 재할당불가능한 변수에 저장해보십시오.



답인데 굳이 볼 필요가

```
let age = 20;
const place = '서울';
```
대충 이렇게 하면 되겠군요.



[collapse]










Q2. 왜 이 변수는 동작하지 않죠?


```
var name = 'park';
var id = 0;

function showName(){
  var name = 'kim';
  var id = 1;
  console.log(name);
}

showName();
console.log(id);
```
다음 코드를 실행했을 때 콘솔창에 무엇이 출력될까요?



예상해보십시오


console.log(name) 부분에선 'kim' 이 출력되고

console.log(id) 부분에선 0이 출력됩니다.



var name의 경우 함수 안에서 재선언 + 재할당 해버리고 출력해버렸으니 그냥 'kim' 잘 나오는데

var id의 경우 함수 안에 있던 변수는 바깥으로 탈출하지 않습니다.

그래서 함수 바깥에서 console.log(id) 하면 그냥 위에있던 var id = 0 이 출력됩니다.








Q3. 이자율 계산하기



철수는 은행에 예금을 하러 갔는데 예금 금액에 따라 이율이 달라지는 것을 보고 크게 당황했습니다.

첫 예금액이 5만원 미만이면 이율이 연 15퍼센트,

첫 예금액이 5만원 이상이면 이율이 연 20퍼센트라고 합니다.

그래서 민준이는

(1) 변수에 예금액을 넣으면

(2) 2년 후의 총 예금액을 자동으로 콘솔창에 출력해주는 기능을 자바스크립트로 만들려고하는데

어떻게 코드를 짜면 될까요?






```
var 예금액 = 60000;
var 미래예금액 = 0;

//여기에 코드짜보십시오  

console.log(미래예금액)
 ```

(동작예시)

var 예금액이라는 변수에 60000을 집어넣으면 86400 이게 콘솔창에 출력되어야 합니다. (이자 20%가 2번 붙음)

var 예금액이라는 변수에 10000을 집어넣으면 13225 이게 콘솔창에 출력되어야 합니다. (이자 15%가 2번 붙음)



(힌트)

자바스크립트에선 + - / * 연산자로 사칙연산이 가능합니다.



답안인데 보면 도움이 되지 않습니다










Q4. 커피 리필을 이상하게 해주는 곳이 있습니다. 최대한 마실 수 있는 커피양을 계산해봅시다.





방금 마신 커피의 3분의 2만큼 총 2번 리필해주는 카페가 있습니다.

예를 들면 처음 커피를 90ml 주문하면 첫 리필은 60ml를 해주며, 그 다음 리필은 40ml를 해주는 카페입니다.

그럼 처음 주문한 커피 양에 따라서 최대한 마실 수 있는 커피를 콘솔창에 계산해주는 코드를 작성해봅시다.





은행 처음 가는 사람을 위해 이자율 계산 어떻게 하는지 설명드리면

연 이자가 15% 붙으면

1년 후 총금액 계산할 땐 원금 x 1.15 하면 끝입니다.

연 이자가 20% 붙으면

1년 후 총금액 계산할 땐 원금 x 1.20 하면 끝입니다.

이제 자바스크립트로 표현하면 됩니다.




```
var 예금액 = 60000;
var 미래예금액 = 0;

미래예금액 = 예금액 * 1.20 * 1.20 ;

console.log(미래예금액)
```
이러면 이율 20%인 경우 2년 후 총 금액을 잘 출력해줄듯 합니다.

근데 조건이 있군요

"첫 예금액이 5만원 미만이면 15% 이자줌" 이런 조건이 있습니다.

딱봐도 if 조건문 쓰면 되겠군요








```
var 예금액 = 60000;
var 미래예금액 = 0;

if ( 예금액 >= 50000 ){
  미래예금액 = 예금액 * 1.2 * 1.2 ;
} else {
  미래예금액 = 예금액 * 1.15 * 1.15 ;
}

console.log(미래예금액)
```
그래서 60000 넣으면 86400 출력되고

10000 넣으면 13225 잘 출력됩니다.
var first = 360;

//여기 어떤 코드가 들어가면 될까요?
(동작예시)

var first에 360을 집어넣으면 위 코드를 실행했을 때 콘솔창에 760이 출력되어야합니다. (360 + 240 + 160)





답안


초등학교 사칙연산 수학문제인데 프로그래밍으로 풀 뿐입니다.

종이와 연필로 풀어보면

360 + 360 x ⅔ + 360 x ⅔ x ⅔

이거 구하면 됩니다. 자바스크립트로 그대로 옮기면 되겠습니다.






```
var first = 360;
var total = 0;

total = first * 2 / 3 + first * 2 / 3 * 2 / 3

console.log(total)
```
다 마신 양을 저장할 변수부터 만들었습니다.

이러면 끝입니다.










Q5. 간단한 퀴즈 UI를 만들어봅시다.


```
<p>태조 이성계가 태어난 년도는?</p>
<input type="text" id="answer">
<button id="send-answer">제출</button>

<script>
  여기에 기능 알아서 만드십시오
</script>
```
유저가 input에 답을 적고 제출버튼을 누를 수 있는 퀴즈 UI 입니다.

1. 유저가 답을 맞추면 alert('성공');

2. 유저가 답을 3번 찍어서 못맞추면 alert('멍청아') 를 띄워봅시다.

하단에 자바스크립트 작성하면 됩니다.

(위 문제의 답은 1335입니다)



직접 코드를 뭐라도 짜야 늡니다


한글부터 짜면 됩니다.

제출버튼 누를 때

유저가 입력한 답안이 '1335'면 alert('성공')

유저가 제출버튼 누른 횟수가 3회 이상이고 답안도 못맞추면 alert('멍청아')

출력하라고 하면 됩니다.

제출버튼 누른 횟수도 var 변수로 어딘가 기록하면 되겠군요.




```
<p>태조 이성계가 태어난 년도는?</p>
<input type="text" id="answer">
<button id="send-answer">제출</button>

<script>

  var count = 0;

  document.querySelector('#send-answer').addEventListener('click', function(){
    count += 1;
    var 유저답안 = document.querySelector('#answer').value;
    if (유저답안 == '1335') {
      alert('성공')
    } else if (count >= 3 && 유저답안 != '1335'){
      alert('멍청아')
    }
  });
</script>
```
남의 코드 읽고 해석하는건 매우 어려운 일입니다.

한글먼저 써놓고 직접 하나하나 어설프게 짜보는게 더 이해가 쉬움

이해없이 그냥 따라치고 "아 이렇게 짜면 되는구나~" 하고 넘어가면 코딩 인생 끝납니다









Q. 자주 물을 것 같은 질문

var 유저답안 = document.querySelector('#answer').value;

이걸 이벤트리스너 바깥에 넣으면 왜 안되나요?



A. 변수를 언제 만들지 잘 결정해야합니다.

script안에 그냥 있는 코드는 새로고침시 1회 실행됩니다.

이벤트리스너 안에 있는 코드는 이벤트 발동시 1회 실행됩니다.














(응용 1)

위에서 1.2를 여러번 곱했는데 1.2를 10번 곱하려면 코드를 어떻게 짜야될까요?

1.2 * 1.2 * 1.2 ... 계속 하면 되긴 하는데

자바스크립트엔 ** 이런 거듭제곱 연산자 기능도 있습니다.



(응용 2)

커피리필 문제에서

커피리필을 무한으로 해준다면 처음 담아주는 커피가 360ml일 때 총 몇 ml의 커피를 마실 수 있을까요?

무한등비수열의 합 그런건데 공식이 가물가물해서 여기까지 하겠습니다.


----------


### setTimeout 타이머주는 법


오늘의 숙제:

위에서 만든 <div>안에 "5초 이내 구매시 사은품 증정" 이라는 문자가 있습니다.

1초마다 5라는 문자를 1씩 감소시켜봅시다.

0이 되면 <div>를 안보이게 처리합시다.













기본 함수 중에 setTimeout() 이런게 있는데



자바스크립트 기본 함수 중에 setTimeout() 이라는게 있습니다.

이거 쓰면 X초 후에 코드를 실행해줍니다.


```
setTimeout(function(){ 실행할코드~ }, 기다릴시간);
```
위처럼 사용하면 됩니다.

시간은 ms 단위로 적으면 됩니다. (1ms는 1000분의 1초)






```
setTimeout(function(){
  console.log('안녕')
}, 1000);
```
위처럼 쓰면 1초 후에 콘솔창에 '안녕'이 뜹니다.

진짜인지 확인합시다.








```
<div class="alert alert-danger">
  5초 이내 구매시 사은품 증정
</div>
```
그럼 이렇게 html을 짜놓고 이런 문제를 풀어봅시다.

Q. 페이지 방문 5초 후에 위의 <div>를 숨기려면 코드를 어떻게 짜야할까요?

어떻게 했냐면



```
<div class="alert alert-danger">
  5초 이내 구매시 사은품 증정
</div>

<script>
  setTimeout(function(){
    $('.alert').hide();
  }, 5000);

</script>
```
이러면 되겠죠 뭐

script 안에 적은 코드는 페이지 새로고침시 1회 실행됩니다.

그러니 페이지 방문시 5초 후에 잘 숨겨지겠군요.

jQuery 함수인 .hide() 는 display : none 준거랑 비슷하게 동작합니다.



X초마다 코드를 실행하고 싶으면 setInterval()



X초마다 코드를 실행하고 싶으면 setTimeout() 을 연달아서 여러개 쓰거나


```
setInterval(function(){ 실행할코드~ }, 기다릴시간);
```
위처럼 setInterval 써도 됩니다.

그럼 X초마다 안에 있는 코드를 실행해줍니다.




```
setInterval(function(){
  console.log('안녕')
}, 1000);
```
위처럼 쓰면 1초 마다 콘솔창에 '안녕'이 뜹니다.

진짜인지 확인합시다.


잠깐상식 : 자바스크립트 문법 vs 브라우저 사용법



var let const if function

이런건 자바스크립트 프로그래밍 문법입니다.



document.querySelector()

alert()

setTimeout()

addEventListener()

이런건 웹브라우저 사용법입니다.



여러분들 웹개발 잘하고 싶으면 자바스크립트 문법만 배우면 안됩니다.

웹브라우저 사용법도 많이 알아야 이쁜 UI도 만들고 폼 기능도 만들고 이벤트도 걸고 그럴 수 있으니까요.



웹브라우저 사용법가지고 코드짜다가

코드 약간 줄이고 싶으면 function

자료를 잠깐 보관하고 싶으면 var

코드를 조건부로 실행하고 싶으면 if

이런거 쓰면 되는 것일 뿐입니다.













콜백함수관련 짧은 테크닉



그냥 함수 파라미터 자리에 들어가는 함수를 콜백함수라고 합니다.

addEventListener(), setTimeout() 이런건 안에 콜백함수를 요구합니다.

왜 콜백함수가 필요하냐고요? setTimeout 이런거 만든 사람이 그래야 작동하도록 만들어놔서 그렇습니다.

불만이 있으면 그 사람에게 따지도록 하고





중요한 점은 콜백함수도 일종의 함수기 때문에

다른 곳에서 만든 함수를 집어넣어도 잘 작동한다는 겁니다.



```
setTimeout(함수, 1000);

function 함수(){
 console.log('안녕')
}
```
예를 들어 아까랑 다르게 이렇게 써도 잘 됩니다. 1초 후에 '안녕' 잘 출력됨

그래서 콜백함수자리에 있는 코드가 좀 더러우면

다른 곳에서 함수로 만들어놓고 그 함수 이름만 콜백함수자리에 집어넣는 식으로 코드짜도 됩니다.

저렇게 코드짜는건 자기 맘이니 싫으면 말도록 합시다.











오늘의 숙제:

위에서 만든 div안에 "5초 이내 구매시 사은품 증정" 이라는 문자가 있습니다.

1초마다 5라는 문자를 1씩 감소시켜봅시다.

0이 되면 div를 안보이게 처리합시다.



(힌트) 5라는 문자만 <span>5</span> 이걸로 감싸면 html 조작하기 쉬워집니다.

24시간 드립니다


문자를 4로 바꿔주세요

문자를 3으로 바꿔주세요

문자를 2로 바꿔주세요

...

이걸 1초마다 계속 실행하면 됩니다. setInterval 쓰면 되겠군요.

근데 타이머를 5번만 실행하고 싶다고요?

타이머 삭제하는 법을 참고하거나 if조건문으로 조건을 주면 됩니다.




```
<div class="alert alert-danger">
 <span id="num">5</span>초 이내 구매시 사은품 증정
</div>

<script>

 var count = 5;

 setInterval(function(){
   count -= 1;
   if (count >= 0){
     document.querySelector('#num').innerHTML = count;
   }
 }, 1000);

</script>
```
이러면 되겠죠 뭐

0일 때 div를 안보이게 처리하거나 그런건 알아서 해보도록 합시다.


(참고) 타이머를 삭제하고 싶으면
```
var 타이머 = setInterval(어쩌구);
```
이렇게 변수에 저장해둔 다음

타이머 삭제하고 싶을 때 clearTimeout(타이머) 이 코드 실행하면 됩니다.


--------


### 정규식으로 이메일 형식 검증해보기

오늘의 숙제 :

폼 전송시 유저가 입력한 비번에 영어 대문자가 적어도 1개 있는지 검사해봅시다.







지금은 input 에 입력한 값의 공백검사만 하고 있는데

이메일형식이 맞는지 검사하려면 어떻게 할지 알아봅시다.





문자 검사하는 가장 쉬운 방법



'문자'.includes('찾을단어')
아무 문자나 뒤에 .includes() 붙일 수 있습니다.

그럼 문자에 찾을 단어가 들어있는지 검사해주고 있으면 true / 없으면 false 남겨줍니다.

진짜인지 콘솔창에 출력해보든 해서 확인해봅시다.



하지만

- 한글이 들어있냐

- 영어가 들어있냐

- A로 끝나냐

- 마침표 다음에 영어가 있냐

이런건 includes() 만으로 검사하기 어렵습니다.











정규표현식 (regular expression)



줄여서 정규식은 문자를 검사하고 싶을 때 사용하는 식입니다.

"어떤 문자에 'abc'라는 단어가 들어가있냐?" 라고 물어보고 싶을 때 쓰시면 됩니다.



자바스크립트로 정규식을 어떻게 표현하냐면

/abc/
이게 끝입니다.

그러면 이제 abc라는 단어가 있냐~? 라고 물어볼 준비가 된겁니다.





그럼 abcdef라는 문자에 abc라는 단어가 있는지 검사해보도록 합시다.

/abc/.test('abcdef')
/정규식/.test(정규식으로 검사해볼문자) 쓰면 됩니다.

진짜 들어있으면 true를 남기고 없으면 false를 남겨줍니다.











몇개만 배워보는 정규식 문법



정규식 문법은 너무 많아서 필요할 때 찾아쓰면 족합니다.

자주 쓰는 몇개만 알아보도록 합시다.





/a/.test('abcde')  //true
영어나 한글의 경우 그냥 쓰면 글자가 있는지 없는지 물어볼 수 있습니다.





/[a-d]/.test('aefg')  //true
/[가-다]/.test('다라마바')  //true
[ ] 기호를 이용해서 문자 범위를 지정할 수 있습니다.

[a-z] 는 a부터 z까지 아무문자 하나를 의미합니다.



/[a-d]/.test('aefg')

▲ 그래서 이건 a부터 d까지의 아무 문자하나가 저기 있냐라고 검사하는 겁니다.





/[a-zA-Z]/.test('반가워요')  //false
/[a-zA-Z]/.test('반가워요a') //true
/[ㄱ-ㅎ가-힣ㅏ-ㅣ]/.test('반가워요')  //true
[a-zA-Z] 이건 아무 알파벳 하나라는 뜻입니다.

[ㄱ-ㅎ가-힣ㅏ-ㅣ] 이건 아무 한글 하나라는 뜻입니다.







/\S/.test('abcde')   //true  
백슬래시S 는 특수문자 포함 아무문자 1개라는 뜻입니다.

자판의 원화기호가 백슬래시입니다.









/^a/.test('abcde')   //true
/e$/.test('abcde') //true  
^a 라고 적으면 a로 시작하는지 검사할 수 있습니다.

e$ 라고 적으면 e로 끝나는지 검사할 수 있습니다.







/(e|f)/.test('abcde')   //true
| 이건 or 기호입니다.

그래서 위 코드는 e 또는 f중 아무거나 한 문자가 있나 검사가능합니다.

정규식에선 괄호맘대로 칠 수 있습니다.







/a+/
+ 기호를 붙여주시면 뒤에 오는 글자들도 a와 일치하면 반복해서 쭉 찾아달라는 뜻입니다.

왜냐면 /a/는 a를 다 찾으라는게 아니라 a 한개를 찾으라는 뜻입니다.

aaaaa 이런걸 찾고 싶으면 /a+/ 쓰면 됩니다.







/\S+t/
이건 그럼 뭘까요.

-> 모든 문자 여러개 다음에 t라는 글자가 있냐를 검사해주는 정규식입니다.

aaaaat

bbt

이런 것들을 잘 찾아주겠군요.









간단히 작성해보는 이메일 정규식



이메일은 어쩌구@어쩌구.어쩌구 이렇게 되어야합니다.

모든 문자 사이에 @ 그리고 .이라는 특수문자가 와야합니다.



/\S+@\S+\.\S+/
이렇게 쓰면 되겠습니다.

\. 이라는 기호는 왜 이렇게 썼냐면 마침표는 정규식에서 특수한 문법이기 때문에

마침표 문법을 쓰는게 아니라 진짜 마침표를 찾아달라라는 의미로 쓰려면 백슬래시를 앞에 붙여야합니다.









그럼 폼전송시 이메일 형식 검증은 어떻게 할까요





공백검사랑 별 차이가 없습니다.

저번 강좌에서 공백검사 부분을 작성했는데 공백검사 부분 대신에

이메일 정규식과 부합하는지 검사를 해주시면 되겠죠?




```
$('form').on('submit',function(e){

  var 입력한값 = document.getElementById('email').value;
  if ( /\S+@\S+\.\S+/.test(입력한값) ){
    alert('이메일형식아님')
    e.preventDefault();
  }

});
```
예전 코드를 살짝 업그레이드했습니다.

- form 전송시

- 유저가 input에 입력한걸 찾아서

- 정규식으로 이메일 테스트했을 때 false가 나오면

- 폼 전송을 막거나 alert() 를 띄우거나 맘대로 하면 됩니다.









오늘의 숙제 :

폼 전송시 유저가 입력한 비번에 영어 대문자가 적어도 1개 있는지 검사해봅시다.

없으면 alert() 띄우거나 맘대로 합시다.

저는 어떻게 했냐면


폼 전송시 이것저것 검사하는건 너무많이 했으니 빠르게 갑시다.


```
$('form').on('submit',function(e){

  var 비번 = document.getElementById('pw').value;
  if ( /[A-Z]/.test(비번) == false ){
    alert('대문자없는데요')
  }

});
```
1. 패스워드 input엔 id="pw" 이런거 부여해서 일단 셀렉터로 입력값을 찾습니다.

2. /[A-Z]/.test(비번) 이걸 해서 false가 남으면 alert 띄우라고 코드짰습니다.

이제 전송버튼 누르면 대문자 있는지 검사해줍니다.  


---------


### 코드 3줄로 캐러셀(이미지 슬라이드) 만들기


오늘의 숙제 :

버튼1, 버튼3 기능도 알아서 만들어옵시다.

넘 쉬워서 예습을 원하면 다음사진보기 & 이전사진보기 버튼과 기능도 만들어보십시오.








![20220321_222747](/assets/20220321_222747.png)






슬라이드되는 UI들을 캐러셀이라고 합니다.

어딜가나 있는 UI 라서 한번 만들어봅시다.

버튼이 많아보이는데 다 한 번에 만들려고 하면 매우 어렵습니다. 그건 천재들이나 하는 것이고

가장 간단한 1개 기능만 먼저 개발하면 쉽습니다.

우린 쉽게 2번 사진 보여주는 버튼의 기능만 먼저 만들어봅시다.







one-way 애니메이션들어간 UI 만드는 법은



1. 애니메이션 시작 전 화면 만들기

2. 애니메이션 종료 후 화면 만들기

3. 언제 종료화면으로 변할지 JS 코드짜기

4. transition 추가하기

이거 그대로 하면 된다고 했습니다.









1. 애니메이션 시작 전 화면 만들기



html css로 알아서 만들면 됩니다.

css 실력이 가장 중요하겠군요.





![20220321_222727](/assets/20220321_222727.png)



▲ 사진이 이렇게 슬라이드되어서 보이려면

사진을 미리 어떻게 배치해놔야할까요?







![20220321_222709](/assets/20220321_222709.png)



▲ 사진 3개를 가로로 길게 배치해놔야하지않을까요?

그리고 나중에 이거 전체를 왼쪽으로 이동시키면 되니까요.

그럼 html css로 저렇게 코드를 짜봅시다.








```
<div style="overflow: hidden">
    <div class="slide-container">
      <div class="slide-box">
        <img src="car1.png">
      </div>
      <div class="slide-box">
        <img src="car2.png">
      </div>
      <div class="slide-box">
        <img src="car3.png">
      </div>
    </div>
 </div>
 ```
 ```
.slide-container {
  width: 300vw;
  transition: all 1s;
}
.slide-box {
  width: 100vw;
  float: left;
}
.slide-box img {
  width: 100%;
}
```
이렇게 코드를 짰더니 이미지 3개가 가로로 배치됩니다.

- vw 단위는 브라우저 폭에 비례한 단위입니다. 100vw는 브라우저 폭의 100%입니다.

- 이미지는 없으면 강의하단에 있는 이미지를 사용합시다.

- 애니메이션 UI 만들기 step 4인 transition은 귀찮아서 미리 추가함











2. 애니메이션 종료 후 화면 만들기



그니까 2번버튼 누르면 2번사진이 슬라이드되어서 보일텐데

그 최종화면을 만들어보라는 소리입니다.

어떤 html 요소를 왼쪽으로 이동시키는건 margin-left 아니면 transform 속성을 사용하면 됩니다.


```
.slide-container {
  width: 300vw;
  transition: all 1s;
  transform: translateX(-100vw);
}
```
아까 만든 css파일 중 가로로 긴 박스에

transform: translateX(-100vw); 이걸 추가하니까 2번사진이 슬라이드되어서 잘 보이는군요.

이걸 종료화면으로 하면 될듯요

class로 만들어두고 부착하는 식으로 해도 되겠지만 귀찮으니까 자바스크립트로 직접 부여합시다.













3. 언제 종료화면으로 변할지 JS 코드짜기


```
$('.slide-2').on('click', function() {
  $('.slide-container').css('transform', 'translateX(-100vw)');
});
```
밑에 자바스크립트로

버튼2 누르면 최종화면으로 변하라고 코드짜봤습니다.

jQuery로 찾은 요소에 .css() 주면 style 속성 변경이 가능합니다.

4. transition은 아까 했으니 캐러셀 완성입니다.

나머지 버튼 기능은 알아서 숙제로 만들어오십시오.

예습을 하고 싶으면 다음/이전 버튼도 만들어서 기능만들어보는게 어떨까요.









남의 코드 따라적는 식으로 배우면 평생 캐러셀밖에 못만듭니다.

안배우고 알아서도 코드 잘 짜고 싶으면

ui 만드는 4-step / 배운 자바스크립트 문법을 어디다 쓰는지 / 한글로 코드짜라는거

맨날 강조하는 것들을 잘 외워가시길 바랍니다.

------------


### 코드 3줄로 캐러셀 (이미지 슬라이드) 만들기 2


저번시간 숙제 : 버튼1 버튼3 기능 만들기



"버튼1 누르면 사진1 보여주세요~" 라고 코드짜면 되겠지만 지능 없는 컴퓨터에겐 정확히 명령줘야합니다.

"버튼1 누르면 css 이렇게 수정해주세요~" 는 컴퓨터가 잘알아듣습니다.

그래서 우선 버튼1 누르면 어떻게 css가 변해야할지 판단부터 하면 되겠군요.



css 이리저리 만지면서 실험해보면

버튼1 눌러서 1번사진을 보여주고 싶으면 transform : translateX(0vw) 를 추가해야합니다. (아니면 transform 아예없애거나)

버튼3 눌러서 3번사진을 보여주고 싶으면 transform : translateX(-200vw) 를 추가해야합니다.

그래서 그거 그대로 코드로 옮겨왔습니다.




```
$('.slide-1').on('click', function() {
  $('.slide-container').css('transform', 'translateX(0vw)');
});

$('.slide-2').on('click', function() {
  $('.slide-container').css('transform', 'translateX(-100vw)');
});

$('.slide-3').on('click', function() {
  $('.slide-container').css('transform', 'translateX(-200vw)');
});
```
그래서 자바스크립트 이렇게 짰더니 완성입니다.


다음버튼 만들기



버튼을 누르면 다음 사진이 보이는 기능은 어떻게 만들죠?

한글로 설명부터 하면 됩니다.



1. 다음버튼 누르면

2. 지금보이는 사진이 1이면 2번사진 보여주세요

3. 지금보이는 사진이 2면 3번사진 보여주세요

이거 그대로 코드로 번역하면 되겠네요.








```
<button class="next">다음</button>
<script>
  $('.next').on('click', function(){
    if (지금보이는 사진이 1이면) {
      2번사진 보여주세요~
    }
  })
</script>
```
일단 일부만 번역해봤습니다.

"2번사진 보여주세요~" 코드로 짜는건 저번시간에 했으니 알아서 하시고

지금 보이는 사진이 1인지 2인지 판단은 어떻게 합니까?

컴퓨터에게 물어봐도 될 것 같긴 한데 더 쉽게 하려면

그건 사진이 바뀔 때마다 여러분이 직접 기록하면 됩니다.

![20220321_222842](/assets/20220321_222842.png)


옆에 포스트잇 붙여놓고 지금 몇번사진 보고있는지 숫자로 기록해놓으라는 소리입니다.

그럼 필요할 때 꺼내쓸 수 있지않겠습니까

프로그래밍용 포스트잇을 다른말로 변수라고 부릅니다.

아무튼 힌트는 여기까지고 알아서 코드짜서 다음버튼 기능 완성해오면 됩니다.



답인데 답보면 의미없음

```
<button class="next">다음</button>
<script>

  var 지금사진 = 1;

  $('.next').on('click', function(){
    if (지금사진 == 1) {
      $('.slide-container').css('transform', 'translateX(-100vw)');
    }
    else if (지금사진 == 2){
      $('.slide-container').css('transform', 'translateX(-200vw)');
    }
  })
</script>
```

그래서 번역이렇게 했다고 합니다.

근데 문제가 있군요

사진은 바뀌는데 포스트잇은 업데이트가 안되고 있습니다.

var 지금사진 = 1;

이것도 원할 때 잘 수정하면 됩니다.

```
<button class="next">다음</button>
<script>

  var 지금사진 = 1;

  $('.next').on('click', function(){
    if (지금사진 == 1) {
      $('.slide-container').css('transform', 'translateX(-100vw)');
      지금사진 += 1;
    }
    else if (지금사진 == 2){
      $('.slide-container').css('transform', 'translateX(-200vw)');
      지금사진 += 1;
    }
  })
</script>
```
다음버튼 누를 때 마다 지금사진을 +1 하라고 추가했습니다.



그럼 지금사진이 1일 때 다음버튼누르면

- 2번사진 보임

- var 지금사진이 +1 됨

이런 식으로 잘 동작하겠군요.



(응용1) 이전사진 버튼도 집에가서 만들어보십시오

다음사진 버튼이랑 매우 유사하니 알아서 합시다.







(응용2) 사진이 4개, 5개가 되어도 다음버튼 기능이 잘 동작하려면?

지금은 사진이 4개가 되어버리면 다음버튼 JS코드를 귀찮게 수정해야합니다.

if문을 추가해야할텐데 그게 귀찮으면 사진 갯수와 상관없이 잘 동작하는 코드로 만들 수도 있습니다.

눈치만 좋으면 되니까 알아서 해보는 것도 좋을듯요



잘 보면 다음버튼 누를 때

if 지금사진이 1이면 -100vw 이동

if 지금사진이 2면 -200vw 이동

if 지금사진이 3이면 -300vw 이동

...

이렇게 코드짜고 있지 않습니까. 뭔가 규칙이 보이는데요

그럼 애초에 if문 필요없이

다음버튼 누르면 'translateX(-지금사진vw)' 만큼 이동해주세요~ 라고 코드한줄 짜면 끝일듯요



문자 중간에 변수를 집어넣고 싶으면

```
var count = 1;
console.log('문자' + count + '문자')
```
이렇게 쓰면 '문자1문자'가 출력됩니다.

+ 기호를 사용할 때 적어도 1개가 문자가 있으면 수학덧셈이 아니라 문자덧셈을 해줍니다.

문자덧셈은 그냥 좌우를 붙여줍니다.

이게 문자 중간에 변수넣는 법입니다.

혹은 나중에 할 것인데


```
var count = 1;
console.log('문자' + count + '문자');
console.log(`문자${count}문자`)
```
이렇게 써도  '문자1문자'가 출력됩니다.

물결기호 밑에 있는 백틱기호로 문자를 만들면

문자중간에 ${변수} 이런 식으로 변수를 넣을 수 있습니다.


그래서 응용2 대충 어떻게 했냐면

```
<button class="next">다음</button>
<script>

  var 지금사진 = 1;

  $('.next').on('click', function(){
      $('.slide-container').css('transform', 'translateX(-' + 지금사진 + '00vw)');
      지금사진 += 1;
  })
</script>
```
이렇게 해도 다음버튼이 잘 동작하는군요.

근데 이번엔 사진이 4개 5개가 되어도 잘 동작합니다.

코드짤 때 어떻게 해야 확장성 있는 코드가 될지 고민해보면 코딩인생이 편해집니다.

(응용3) 버튼2 누르고 다음버튼을 누르면 잘 작동하지 않는 이유가 뭐죠?

컴퓨터는 여러분 명령을 따를 뿐이라 여러분이 명령을 제대로 안줬기 때문입니다.

버튼1,2,3을 누를 때 포스트잇은 업데이트가 되지 않아서 그럴 것 같군요.



------------


### 함수의 return 문법 & 소수점 다루기


함수 function 문법은

- 긴 코드 짧게 축약해서 쓸 수 있고

- 파라미터로 기능업그레이드도 가능하다고 했습니다.

- 오늘 배울 return을 쓰면 함수를 쓰고나서 원하는 값을 그 자리에 퉤 뱉을 수도 있습니다.



함수안에서 쓸 수 있는 return 문법



함수 안에서 return이라는 문법을 사용할 수 있습니다.

return 오른쪽에 아무거나 적으면

함수가 실행되고난 자리에 return 오른쪽에 있던 값이 뾰로롱 남습니다.


```
function 함수(){
  return 123
}

console.log(함수());
```


그래서 진짜인지 확인하기 위해 함수() 실행하고나서 123을 남기라고 적었습니다.

출력해보니 진짜 123 잘 출력되는군요.

이렇게 함수() 실행하고 나서 그 자리에 뭔가 결과를 남기고 싶으면 return 문법 쓰면 되겠습니다.

```
function 함수(){
  console.log('안녕');
  return 123
  console.log('반가워');
}

함수();
```

그리고 return 문법은 함수종료의 뜻도 가지고 있습니다.

함수안에 코드가 길면 위에서부터 한줄한줄 실행해주는데

return을 만나면 함수가 바로 종료됩니다.

그래서 위 코드에선 console.log('반가워'); 이거 실행안됨



그래서 이걸 어디에 쓰는데



문법 배웠으면 이걸 어디에 쓸지 생각해보아야

혼자서도 코드짤 때 활용을 할 수 있습니다.

실은 프로그래밍의 함수문법은 수학의 함수문법과 용도가 똑같습니다.


![20220322_020858](/assets/20220322_020858.png)

▲ 수학에서의 함수는

숫자를 집어넣으면 규칙에 따라 다른 숫자가 나오는 변환기역할을 합니다.

무슨 이차함수 공식외우고 그게 중요한게 아니라 함수는 그냥 x 집어넣으면 x + 2 나오는 변환기역할을 하는 수식입니다.

프로그래밍에서의 함수도 마찬가지로

자료를 집어넣으면 규칙에 따라 다른 자료가 나오는 변환기 역할을 할 수 있습니다.

변환기 만들 때 return 문법이 유용하게 사용됩니다.



예시 : 부가세 계산기 만들기



쇼핑몰을 만들고 있습니다.

상품가격의 부가세같은걸 자주 구할 일이 있다고 칩시다.

예를 들어 6만원, 5만원, 8만원짜리 상품 3개의 부가세를 구해서 콘솔창에 출력하려면


```
console.log(60000 * 0.1);
console.log(50000 * 0.1);
console.log(80000 * 0.1);
```
이렇게 필요할 때 마다 0.1을 곱해줘도 되겠지만

1. 부가세 가격 구하는게 자주 필요하거나 2. 수식이 복잡하면 함수를 만들어쓰는 것도 좋습니다.

함수가 뭐랬습니까 숫자 넣으면 다른 숫자 나오는 변환기 역할을 한다고 했죠?






```
function vat(a){
  return a * 0.1
}

console.log(vat(60000));
console.log(vat(50000));
console.log(vat(80000));
```
1. vat 라는 함수를 만들었습니다.

그 함수는 x를 집어넣으면 x * 0.1 이 그 자리에 남습니다. (부가세구하는 역할임)

2. 그래서 부가세 구하고 싶을 때 마다 vat()를 사용하는겁니다.

그럼 인생이 편리해지지않을까요





지금은 수식이 쉬워서 별로 쓸데없어보이지만 수식이 복잡하면 쓸모있을듯요

- 그거 말고도 숫자를 넣으면 3의 배수 여부를 true/false로 뱉는 함수

- 문자를 넣으면 a가 몇개 들어있는지 뱉는 함수

이런거 만들어서 쓰면 유용할 것 같지 않습니까

그런 식의 변환기 만들어쓰고 싶으면 return 문법 쓰면 됩니다.


자바스크립트에서 소수점 연산시 주의점


```
console.log(1.1 + 0.3)
```
이거 실행하면 1.4가 나올 것 같지만

1.40000000001 이게 출력됩니다.

자바스크립트가 이상한게 아니라 원래 컴퓨터가 이상한 것일 뿐인데


 ![20220322_020951](/assets/20220322_020951.png)

 컴퓨터는 2진법으로 설계되어있습니다.

그래서 숫자도 2진법 숫자만 알아들을 수 있습니다.

컴퓨터에게 10 + 20 연산하라고 하면

전부 2진법으로 바꿔서 1010 + 10100 으로 연산하고 다시 10진법으로 바꿔서 보여줍니다.



근데 2진법의 문제가 있는데

1.1 이런 숫자는 2진법으로 바꾸면

1.00011001100110011001100 ...

무한히 반복됩니다.



이 세상엔 무한한 숫자를 저장할 수 있는 저장장치는 없기 때문에

컴퓨터는 적절히 끊고 반올림해서 저장합니다.

1.00011001100110011001101

이런 식입니다. 그래서 소수점 연산은 아주 작은 오차가 발생합니다.





해결하고 싶으면

1. 덧셈하기 전에 10 곱해서 덧셈하고 10으로 나누든가

2. 외부라이브러리 쓰든가

3. 오차는 무시할 정도로 작으니 그냥 반올림하든가

하면 됩니다. 아주 정확한 계산이 필요한게 아니면 대부분 그냥 반올림하면 됩니다.

소수점 반올림하는 법


```
console.log( (1.1 + 0.3).toFixed(1) );
```
숫자.toFixed(몇자리) 이거 쓰면 됩니다 모든 숫자 뒤에 붙일 수 있습니다.

근데 주의점은 이렇게 하고 나면 '문자'로 변환해줍니다.

'123'과 123은 다른 타입이라 주의해서 써야합니다.













'숫자'를 숫자로 변환하고 싶으면


```
parseFloat('123')
parseInt('123')
```
이런거 쓰면 123을 그 자리에 남겨줍니다.

문자처럼생긴 숫자를 숫자로 변경해주는 유용한함수입니다.

parseInt()는 정수로, parseFloat()는 실수로 변환해줍니다.



왜 이런걸 쓰냐면 자바스크립트는 덧셈기호가 좀 특이한 역할을 해서 그런데

1 + 1 은 2지만

1 + '1' 은 '11' 입니다.

+ 기호 사용시 둘 중 적어도 하나가 문자가 있으면 문자덧셈을 해줘서 그렇습니다.

문자덧셈은 그냥 문자두개 이어붙여줌


오늘의 숙제 :

Q1. 함수에 분과 초를 차례로 파라미터로 입력하면 ms단위로 바꿔서 뱉어주는 함수를 만들어봅시다.

(1초 == 1000ms 입니다)



(동작예시)
```
console.log(함수(1,30))
```
이렇게 사용하면 콘솔창에 90000이 출력되어야합니다 (90초 x 1000)


```
console.log(함수(2,10))
```
이렇게 사용하면 콘솔창에 130000이 출력되어야합니다 (130초 x 1000)

알아서해야지 언제까지 선생님 바짓가랑이를

```
function 함수(a, b){
  var result = (a * 60 + b) * 1000;
  return result
}
```
테스트해보니 잘 출력되는군요


Q2. 가격을 파라미터로 입력하면 10% 할인가를 뱉는 함수를 만들어봅시다.

근데 첫 구매여부도 true/false로 둘째파라미터에 입력해서 첫 구매가 맞을 경우 추가로 1.5 달러도 할인해줘야합니다.

주의사항은 가격으로 10.3 이런거 넣으면 뒤에 소수점 길게 나올 수도 있으니 알아서 처리해보든가 합시다.



(동작예시)

```
console.log(함수(70, false))
```
이렇게 사용하면 콘솔창에 63이 출력되어야합니다 (10% 할인가격이고 추가할인 없음)


```
console.log(함수(10, true))
```
이렇게 사용하면 콘솔창에 7.5가 출력되어야합니다 (10% 할인가격 9에 추가할인 1.5 해줌)

답은 여러개 있습니다 맘대로 하십시오



```
function 함수(a, b){
  var result = a * 0.1;
  if (b == true) {
    result = result - 1.5;
  }
  return result
}
```
결과만 잘나오면 다 맞는 답입니다.

근데 함수(10.3, true) 이런거 하면 소수점이 길게 나오기 때문에 반올림해서 결과를 보여주는 것도 좋겠군요

return parseFloat(result.toFixed(2)) 이런거 어떰


-----------

### 스크롤 이벤트로 만드는 재밌는 기능들


오늘의 숙제 :

1. 스크롤바를 100px 내리면 로고 폰트사이즈를 작게 만들어오십시오.

반대로 100px 미만으로 내리면 로고 폰트사이즈를 크게 만들어옵시다.

2. 회원약관 박스를 거의 끝까지 스크롤하면 alert를 띄워줍시다.









문제 1. 스크롤바 100px 내리면 로고 폰트사이즈 작게 만들기



그런 재밌는 애니메이션을 만들어봅시다.


```
.navbar {
  position : fixed;
  width : 100%;
  z-index : 5
}
.navbar-brand {
  font-size : 30px;
  transition : all 1s;
}
```
일단 상단메뉴는 상단고정하고

로고 폰트사이즈를 키운 채로 시작합시다.

그리고 스크롤바를 100px 정도 내리면 폰트사이즈를 줄여봅시다.

그럼 스크롤바를 얼마나 내렸는지 알 수 있어야겠군요


스크롤 이벤트리스너


```
window.addEventListener('scroll', function(){
  console.log('안녕')
});
```
스크롤바를 조작하면 scroll 이벤트가 발생합니다.

그래서 scroll 이벤트리스너를 전체 페이지에 달면

전체 페이지를 스크롤할 때마다 원하는 코드를 실행할 수 있습니다.

진짜 스크롤바 만질 때 마다 '안녕' 출력되나 봅시다.



참고로 window는 그냥 전체 페이지를 의미합니다.

실은 document도 전체 페이지입니다. window가 약간 더 큰 개념인데 scroll 이벤트리스너는 관습적으로 window에 붙임


스크롤 관련 유용한 기능들



스크롤 이벤트리스너안에서 쓰는 유용한 기능들이 몇개 있습니다.


```
window.addEventListener('scroll', function(){
  console.log( window.scrollY )
});
```
window.scrollY 사용하면 현재 페이지를 얼마나 위에서 부터 스크롤했는지 px 단위로 알려줍니다.

매우유용

window.scrollX 는 가로로 얼마나 스크롤했는지 알려줍니다. (가로 스크롤바가 있으면)
```
window.scrollTo(0, 100)
```
window.scrollTo(x, y) 실행하면 강제로 스크롤바를 움직일 수 있습니다.

위 코드는 위에서부터 100px 위치로 스크롤해줍니다.




```
window.scrollBy(0, 100)
```
window.scrollBy(x, y) 실행하면 현재 위치에서부터 스크롤해줍니다.

위 코드는 현재 위치에서부터 +100px 만큼 스크롤해줍니다.

근데 원래 저거 실행하면 스크롤 위치가 순간이동해야되는데

bootstrap을 설치했을 경우 이상하게 천천히 이동할 수 있습니다.

그게 싫으면 :root { scroll-behavior : auto } 이걸 css 파일 맨 위에 추가합시다.








```
$(window).on('scroll', function(){
  $(window).scrollTop();
})
```
jQuery 버전은 더 짧습니다.

$(window).scrollTop() 이거 쓰면 아까처럼 현재 페이지 스크롤 양을 알려줍니다.

근데 간편한건 $(window).scrollTop(100) 이러면 페이지 강제이동도 해줌



필요한건 다 알려줬으니 오늘 숙제로 문제1 기능 완성해오면 됩니다.


문제 2. 박스 끝까지 스크롤시 알림띄우기


```
<div class="lorem" style="width: 200px; height: 100px; overflow-y: scroll">
  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae voluptas voluptatum minus praesentium fugit debitis at, laborum ipsa itaque placeat sit, excepturi eius. Nostrum perspiciatis, eligendi quae consectetur praesentium exercitationem.
</div>
```
위 박스를 아무데나 추가합시다.

회원약관인데 이 박스를 끝까지 스크롤하면 alert() 이런걸 띄우고 싶은겁니다.

그럼 코드를 어떻게 짜야할까요





div 스크롤바 내린 양 == div 실제높이일 경우 alert 띄워주세요~

이렇게 짜면 될듯요? 근데

"페이지 스크롤바 내린 양" 구하는건 배웠는데

"div 박스 스크롤바 내린 양" 구하는 법은 안배웠습니다.

div 박스의 스크롤바 내린 양은



박스를 셀렉터로 찾고 .scrollTop 붙이면 스크롤바를 위에서 부터 얼마나 내렸는지 알려줍니다.


```
$('.lorem').on('scroll', function(){
  var 스크롤양 = document.querySelector('.lorem').scrollTop;
  console.log(스크롤양);
});
```
콘솔창에 진짜 출력되는군요.

실은 현재 페이지 스크롤양도 .scrollTop으로 구할 수 있습니다. html 태그 찾아서 .scrollTop 붙이면 됩니다.


div 박스 높이 구하는 법



스크롤바가 생긴 박스의 경우 실제 높이같은게 궁금할 수 있습니다.

박스에 스타일로 넣은 height : 100px 이거 말고 스크롤가능한 실제높이 말입니다.

그럴 땐 셀렉터로 찾아서 .scrollHeight 붙이면 나옵니다.


```
$('.lorem').on('scroll', function(){
  var 스크롤양 = document.querySelector('.lorem').scrollTop;
  var 실제높이 = document.querySelector('.lorem').scrollHeight;
  console.log(스크롤양, 실제높이);
});
```
콘솔창에 진짜 출력되는군요.

참고로 박스가 화면에 보이는 부분 높이는 .clientHeight 하면 나옵니다.

document.querySelector('.lorem').scrollHeight; 해보셈

이제 아까 짜려던 코드를 봅시다.





div 스크롤바 내린 양 == div 실제높이일 경우 alert 띄워주세요~

▲ 뭔가 이상한데요

스크롤바를 끝까지 내려도

스크롤바 내린 양은 188.x

div 실제높이는 288이 나옵니다.

같다고 비교하면 뭔가 안될 것 같군요.


![20220322_022415](/assets/20220322_022415.png)


▲ 왜냐면 스크롤바 내린 양은 진짜 스크롤바 내린 양일 뿐이라 그렇습니다.

거기에 박스가 보이는 높이는 포함안함







div 스크롤바 내린 양 + div가 화면에 보이는 높이 == div 실제높이일 경우 alert 띄워주세요~

라고 코드짜면 될듯 합니다.

알아서 숙제로 기능구현해오면 되겠습니다.



하지만

스크롤 내린 양은 정수단위로 나오지 않고

OS 마다 부정확해서 여유를 두고 비교하는게 좋습니다.

그래서 끝까지 스크롤했냐~ 체크하는 것 보다

끝에서 10px 정도 남기고 스크롤했냐~ 라고 체크해봅시다.

-------------


### 스크롤 이벤트 숙제 해설 & 페이지 스크롤 응용

숙제1. 페이지 스크롤바 100px 내리면 로고 폰트사이즈 작게



페이지 스크롤바를 100px 이상 내리면 폰트사이즈 작게만들라고 코드짜면 됩니다.

근데 이 코드를 언제 실행해야되겠습니까


```
<script>
  if (window.scrollY > 100) {
    $('.navbar-brand').css('font-size', '20px');
  }
</script>
```
대충 script 태그 안에 적으면 페이지 로드할 때 1회 실행되고 끝날 뿐입니다.

유저가 페이지 스크롤바 건드릴 때 마다 코드를 실행해줘야 잘되지 않을까요 한번 생각해보십시오.






```
<script>
  $(window).on('scroll', function(){
    if (window.scrollY > 100) {
      $('.navbar-brand').css('font-size', '20px');
    }
  });
</script>

```
스크롤바 만질 때 마다 코드 실행하고싶으면 스크롤 이벤트리스너 쓰면 됩니다.

아무튼 이러면 잘 실행됩니다.

다시 스크롤바 올리면 폰트사이즈 크게만들고 싶으면 어떻게 해야할까요 알아서 해봅시다.


숙제2. 회원약관 박스 거의 끝까지 스크롤하면 alert 띄우기



이것은 저번시간에 div 박스 찾아서

div 박스 스크롤양 + 보이는높이 == 실제높이 비교하면 된다고 했습니다.

근데 정확히 일치하는 경우는 잘 없어서 등호말고 부등호 이런거 쓰면 됩니다.




```
$('.lorem').on('scroll', function(){
  var 스크롤양 = document.querySelector('.lorem').scrollTop;
  var 실제높이 = document.querySelector('.lorem').scrollHeight;
  var 높이 = document.querySelector('.lorem').clientHeight;
  if (스크롤양 + 높이 > 실제높이 - 10) {
    alert('다읽음')
  }
});
```
이러면 바닥~ 10px 위치에 스크롤바가 있을 때 alert를 띄워줍니다.

진짜인지 10이라는 숫자 맘대로 바꿔가면서 실험해봅시다.


스크롤 다룰 때 주의점



1. 스크롤이벤트리스너 안의 코드는 1초에 60번 이상 실행됩니다.

그래서 스크롤 이벤트리스너는 많이 달면 성능저하가 일어나니 스크롤바 1개마다 1개만 씁시다.



2. 스크롤이벤트리스너 안의 코드는 1초에 여러번 실행되다보니 바닥체크하는 코드도 여러번 실행될 수 있습니다.

숙제2에서 alert가 2번 뜨고 그럴 수 있다는 뜻입니다.

그걸 방지하고 싶으면 구글에 검색해보는 것도 나쁘지않습니다. 변수같은걸 활용하면 됩니다.













현재 페이지를 끝까지 스크롤했는지 체크하려면?



숙제2랑 똑같이하면 됩니다.

근데 div 박스를 찾는게 아니라 이번엔 현재페이지를 찾아서 .scrollTop .scrollHeight .clientHeight 붙이면 됩니다.

현재페이지를 찾으려면


```
document.querySelector('html').scrollTop;  //현재 웹페이지 스크롤양
document.querySelector('html').scrollHeight; //현재 웹페이지 실제높이
document.querySelector('html').clientHeight; //현재 웹페이지 보이는 높이임
```
html 태그 찾으면 됩니다.

.scrollTop 은 너무 길면 window.scrollY 써도 똑같습니다.

(주의)

1. 웹페이지 scrollHeight 구할 땐 브라우저마다 아주 약간의 오차가있을 수 있어서 테스트해보는게 좋습니다.

2. 웹페이지 scrollHeight 구하는 코드는 페이지 로드가 완료되고나서 실행해야 정확합니다. 그래서 <body> 끝나기 전에 적는게 좋습니다.









오늘의 교훈이 뭐냐면

저런거 코드 외워봤자 다음날 다 까먹습니다.

1. 스크롤바 조작할 때 마다 코드실행가능하구나

2. 박스의 숨겨진 실제 높이도 구할 수 있구나

3. 스크롤내린 양도 구할 수 있군

이런거 이해하고 지나가면 충분합니다. 문법은 필요할 때 찾아쓰면 됩니다.







(응용)

페이지 내릴 때 마다 페이지를 얼마나 읽었는지 진척도를 알려주는 UI 같은건 어떻게 만들면 될까요?

까만색의 가로로 긴 div 박스 하나 만들고

페이지를 1% 읽으면 div 박스 길이는 1%

페이지를 50%정도 읽으면 div 박스 길이는 50%

페이지 다 읽으면 div 박스 길이는 100%

이런거 만들어보면 재미있을듯요

실은 간단해서 재미없습니다






 ----------


 ### 탭기능 만들며 배우는 for 반복문


 오늘의 숙제 :

 탭 기능 알아서 다 코드짜오면 됩니다.







 오늘은 탭기능을 만들어보면서 for 반복문을 배워볼건데

 일단 새로운 detail.html 파일 만들어서 거기다가 코드를 짭시다.

 그 페이지에서도 Bootstrap 쓸거면 Bootstrap 설치하고 jQuery 쓸거면 jQuery 설치하면 됩니다

 귀찮으면

 index.html에 있던거 다 복사붙여넣기하고 <body> 안에 필요없는 내용 지우면 됩니다.


 ![20220322_022651](/assets/20220322_022651.png)

 이렇게 생긴 UI를 탭이라고 합니다.

어떻게 만드냐면 그냥 UI 만드는 step 그대로 따라가면 완성입니다.

버튼3개, div 박스 3개 만들어두고

버튼누르면 거기 맞는 div박스를 보여주면 끝입니다.

```
<style>
  ul.list {
    list-style-type: none;
    margin: 0;
    padding: 0;
    border-bottom: 1px solid #ccc;
  }
  ul.list::after {
    content: '';
    display: block;
    clear: both;
  }
  .tab-button {
    display: block;
    padding: 10px 20px 10px 20px;
    float: left;
    margin-right: -1px;
    margin-bottom: -1px;
    color: grey;
    text-decoration: none;
    cursor: pointer;
  }
  .orange {
    border-top: 2px solid orange;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid white;
    border-left: 1px solid #ccc;
    color: black;
    margin-top: -2px;
  }
  .tab-content {
    display: none;
    padding: 10px;
  }
  .show {
    display: block;
  }
</style>

<div class="container mt-5">
  <ul class="list">
    <li class="tab-button">Products</li>
    <li class="tab-button orange">Information</li>
    <li class="tab-button">Shipping</li>
  </ul>
  <div class="tab-content">
    <p>상품설명입니다. Product</p>
  </div>
  <div class="tab-content show">
    <p>스펙설명입니다. Information</p>
  </div>
  <div class="tab-content">
    <p>배송정보입니다. Shipping</p>
  </div>
</div>
```

아무데나 복사붙여넣기하면 탭나옴

어떻게 만들었는지 설명하자면

1. <li> 태그로 버튼 3개 만들었습니다.

2. <div> 태그로 박스 3개 만들었습니다.

3. 제가 만든 orange 클래스명을 추가하면 버튼누른듯한 효과를 줄 수 있습니다 (매우편리)

4. 제가 만든 show 클래스명을 추가하면 박스를 보여줄 수 있습니다 (역시편리)


자바스크립트 파일 모듈화하는 법



그니까 자바스크립트 코드가 너무 길고 복잡하면 다른 파일로 뺄 수 있습니다.

작업폴더에다가 어쩌구.js  파일 만들고 거기다가 열심히 코드짠 다음에

그 코드가 필요한 html 파일에서
```
<script src="어쩌구.js"></script>
```
이렇게 쓰면 끝입니다.

그럼 js 파일에 있던 코드가 저 위치로 복붙됩니다.



js 파일이 폴더 안에 숨어있으면 src="폴더명/어쩌구.js" 하면 되겠죠


첫 버튼부터 기능개발해보기



버튼이 3개나 있으니까 "버튼3개를 어떻게 한 번에 개발하지?" 부터 생각하는 분들이 있는데

그러면 금방 망하기 때문에 가장 간단하고 쉬운거 하나부터 만드는게 좋은 습관입니다.

우선 첫 버튼만 기능개발해봅시다.

탭의 0번 버튼 누르면 무슨 일이 일어나야합니까?



- 버튼0 누르면

- 버튼0에 orange 클래스명 부착

- 박스0에 show 클래스명 부착

이러면 끝인 것 같은데

근데 그것만 짜면...

![20220322_022758](/assets/20220322_022758.png)

▲ 버튼0 눌렀을 때 이렇게 보일 것 같군요

그래서 기존에 붙어있던 orange, show 라는 클래스는 제거해야합니다.



- 버튼0 누르면

- 버튼0,1,2에 붙어있던 orange 클래스명 전부 제거하라고 코드 3줄 짜기

- 버튼0에 orange 클래스명 부착

- 박스0,1,2에 붙어있던 show 클래스명 전부 제거하라고 코드 3줄 짜기

- 박스0에 show 클래스명 부착



이렇게 코드짜면 버튼0 기능 완성일 것 같습니다.







Q. 왜 버튼0,1,2에 붙어있던 orange 클래스명 전부 제거하라고 코드 3줄이나 짬?

A. 무슨 버튼에 orange가 들어있을지 모르니까

그냥 귀찮아서 3개 버튼에 있는거 전부 제거하라고 코드짜면 간단하니까요

















jQuery 셀렉터로 여러 요소 찾은 뒤 하나만 고르기



지금 class="tab-button" 가진 요소가 3개나 있습니다.

그래서 $('.tab-button').on() 이렇게 이벤트리스너 달면

3개 버튼에 전부 이벤트리스너를 달게됩니다.

그게 싫고 버튼0만 달고 싶으면


```
$('.tab-button').eq(0).on('click', function(){

});
```

이렇게 쓰면 됩니다.

$( ) 셀렉터로 찾은 요소 중에 x번째 요소만 선택하고 싶으면

$( ).eq(x) 쓰면 됩니다.

querySelectorAll() 쓰는 경우에도 [0] 이런거 붙여야 잘되는거 잊지맙시다.  





그래서 가이드는 다 드렸으니 다음시간까지 버튼0 기능 완성해옵시다.

쉬우니까 버튼1, 버튼2 기능도 만들어서 탭 완성해오면 됩니다.


------------

### 탭기능 만들며 배우는 for 반복문 2


숙제로 해오라던 탭기능 완성해보기



- 버튼0 누르면

1. 버튼0,1,2에 붙어있던 orange 클래스명 전부 제거하라고 코드 3줄 짜기

2. 버튼0에 orange 클래스명 부착

3. 박스0,1,2에 붙어있던 show 클래스명 전부 제거하라고 코드 3줄 짜기

4. 박스0에 show 클래스명 부착

그대로 코드짜면 된다고 했습니다.

어떻게 했냐면

```
$('.tab-button').eq(0).on('click', function(){
  $('.tab-button').removeClass('orange');
  $('.tab-button').eq(0).addClass('orange');
  $('.tab-content').removeClass('show');
  $('.tab-content').eq(0).addClass('show');
})
```
한글로 써놓고 번역만 잘 했을 뿐입니다

여기까지 하면 버튼0 기능이 완성됩니다.

querySelectorAll() 쓰는 분들은 뒤에 [0] 이런거 붙이는거 잊지마십시오





Q. 어 왜 버튼1, 버튼2는 눌러도 아무 반응이 없죠?

A. 컴퓨터는 죄가 없습니다 여러분이 코드를 그렇게 짠것일 뿐

버튼0 기능만 개발했으니 버튼1 버튼2 기능도 알아서 개발하면 됩니다.








```
$('.tab-button').eq(1).on('click', function(){
  $('.tab-button').removeClass('orange');
  $('.tab-button').eq(1).addClass('orange');
  $('.tab-content').removeClass('show');
  $('.tab-content').eq(1).addClass('show');
});


$('.tab-button').eq(2).on('click', function(){
  $('.tab-button').removeClass('orange');
  $('.tab-button').eq(2).addClass('orange');
  $('.tab-content').removeClass('show');
  $('.tab-content').eq(2).addClass('show');
});
```

이거도 밑에 추가하니 잘되는군요 탭기능 완성


좋은 관습 : 반복적인 셀렉터는 변수에 넣어서 쓰기



위 숙제에서 보면 비슷한 셀렉터가 매우 많이 등장합니다.

셀렉터 문법은 기본적으로 작동시간이 오래걸립니다.

셀렉터 하나 쓸 때 마다 html을 쭉 읽고 찾아야해서 오래걸리는 것임

html이 길고 복잡할 수록 더 오래걸립니다.

그래서 저게 반복적으로 등장하면 그냥 변수에 넣어서 쓰십시오.

querySelector 도 마찬가지입니다.




```
var 버튼 = $('.tab-button');

버튼.eq(0).on('click', function(){
  버튼.removeClass('orange');
  버튼.eq(0).addClass('orange');
  $('.tab-content').removeClass('show');
  $('.tab-content').eq(0).addClass('show');
})
```
이런 식으로 바꿔버리면 셀렉터 3번 쓰던걸 1번으로 줄일 수 있어서 성능적 이점이 있겠군요.

하지만 굳이 성능 이런거 따지는 사람 별로 없음



코드 복붙하고 싶으면 for 반복문



지금 탭기능만든거 잘 보면 비슷한 코드덩어리 6줄이 3번이나 반복되고 있습니다.

비슷한 코드를 발견하면 굳이 손수 복사붙여넣기할 필요없이 for 반복문 쓰면 쉽게 복붙해줍니다.


```
for (횟수){
  복붙할 코드
}
```
이렇게 쓰면 안의 코드를 복붙해줍니다.

실은 복붙이라기보다 반복실행이 맞는데 결과는 똑같으니 복붙이라고 합시다.

횟수넣는 부분은 이렇게 써야합니다.




```
for (var i = 0; i < 3; i++) {
  console.log('안녕')
}
```
이러면 console.log('안녕') 이게 3번 복사 붙여넣기 됩니다.

왜 3번이냐면

i를 0부터 시작해서 / i에 1씩 더해가면서 복붙해라 / 근데 i < 3 까지

라는 뜻이라 3번입니다.

이해하기 싫으면 외워써도 되긴 합니다.


![20220322_023211](/assets/20220322_023211.png)

▲ 표로 그리면 이렇게 되겠군요.






```
for (var i = 0; i < 3; i++) {
  console.log(i)
}
```

진짜 i가 그렇게 변하는지 궁금하면 출력해보면 됩니다.

출력해보면 진짜로 0, 1, 2로 변하는군요.

그리고 i가 3이 될 때 복사붙여넣기를 중지해줍니다.

```
for (var i = 0; i < 5; i++) {
  console.log('안녕')
}
```
그럼 이건 안녕이 몇번 출력될까요?

답은
5번인듯

```
for (var i = 3; i < 6; i++) {
  console.log('안녕')
}
```
그럼 이건 안녕이 몇번 출력될까요?

답은
안알랴줌 직접 실행해보셈


for 반복문으로 탭기능 코드 줄여보기



그래서 코드가 너무 길거나 그러면 for 쓰면 됩니다.

for 문법은 언제나 옵션일 뿐이라 쓰기싫으면 안써도 됩니다 안써도 모든기능 구현가능

하지만 배운 기념으로 아까 길게 짰던 탭기능을 for 이용해서 간단하게 만들어봅시다.






```
$('.tab-button').eq(0).on('click', function(){
  $('.tab-button').removeClass('orange');
  $('.tab-button').eq(0).addClass('orange');
  $('.tab-content').removeClass('show');
  $('.tab-content').eq(0).addClass('show');
})
```
(밑에 비슷한거 2개 더 있음)
▲ 지금만든 탭기능은 이 덩어리가 3번이나 반복됩니다.

반복될 때 마다 0 부분이 1과 2로 바뀌긴 하지만 아무튼 비슷하니까

반복문안에 넣어서 코드를 쉽게 복사 붙여넣기해봅시다

```
for (var i = 0; i < 3; i++){

  $('.tab-button').eq(0).on('click', function(){
    $('.tab-button').removeClass('orange');
    $('.tab-button').eq(0).addClass('orange');
    $('.tab-content').removeClass('show');
    $('.tab-content').eq(0).addClass('show');
  })

});
```

▲ 이러면 성공이군요 안에 있던 코드가 3번 복사붙여넣기 됩니다.

하지만 복붙할 때마다 0부분을 1로 바꾸고 2로 바꾸고 그래야합니다. (그래야 아까 코드랑 똑같이 생김)

그래서 반복문 안에 0이라고 하드코딩해놓는게 아니라

0 대신 반복문이 진행되며 0, 1, 2로 차례로 바뀌는 변수 를 넣는게 어떨까요

그런게 있긴 합니까

i 라고 배운거 같은데요 i 출력해보니까 복붙할 때 마다 0, 1, 2로 차례로 바뀝니다.

```
for (var i = 0; i < 3; i++){

  $('.tab-button').eq(i).on('click', function(){
    $('.tab-button').removeClass('orange');
    $('.tab-button').eq(i).addClass('orange');
    $('.tab-content').removeClass('show');
    $('.tab-content').eq(i).addClass('show');
  })

});
```
▲ 이러면 완성

아까랑 똑같이 탭기능이 동작하겠군요



Q. 전 안되는데요

A. 실은 for 반복문 사용할 때 변수를 var i 말고 let i로 바꿔야 잘됩니다.

let으로 바꾸면 탭 완성입니다.


var 쓰면 안되고 let 쓰면 잘되는 이유는


원리가 궁금하면 잘 들어보면 됩니다.

원리를 알면 코드 알아서 잘짤 수 있습니다.




```
for (var i = 0; i < 3; i++){

  $('.tab-button').eq(i).on('click', function(){
    $('.tab-button').removeClass('orange');
    $('.tab-button').eq(i).addClass('orange');
    $('.tab-content').removeClass('show');
    $('.tab-content').eq(i).addClass('show');
  })

});
```

위 코드는 제대로 작동하지 않는데

컴퓨터의 입장이 되어서 위 코드를 읽으면 이해가 쉽습니다.



0. 컴퓨터는 위에서부터 한줄한줄 코드를 해석합니다.

1. for 반복문을 발견해서 안에 있는 코드를 반복실행하려고 합니다.  

2. 이벤트리스너를 만납니다. 이벤트리스너 안의 코드는 바로 실행안됩니다. 사용자가 버튼을 클릭시 실행되는 코드입니다.   

그래서 이벤트리스너 내의 4줄 코드는 아직 실행하지 않고 지나갑니다.  

그런 식으로 반복문 안의 코드를 3번 실행합니다.



3. 그리고 반복문 끝나서 var i 변수는 3이 되어있습니다.

4. 반복문이 다 돌고난 후 한참 후에, 사용자가 버튼0을 클릭합니다. 그럼 컴퓨터는 이벤트리스너 안의 코드 4줄을 실행시켜야겠군요



5. 근데 i 라는 변수를 발견합니다.
```
$('.tab-button').eq(i).addClass('orange');
$('.tab-content').eq(i).addClass('show');
```

▲ 컴퓨터는 변수를 발견하면 근처에서 변수를 찾아서 채우려는 습성이 있습니다.

그래서 주변을 살펴보니 반복문을 다 돌고난 var i라는 변수가 3이 되어있는걸 찾아냅니다. 그거 씁니다.

(반복문이 다 돌고난 후라서 var i라는 변수는 3이 되어 남아있습니다.)



6. 하지만 $('.tab-button').eq(3) 이런건 없습니다. (4번 버튼은 없잖습니까)

7. 그래서 에러를 냅니다.



근데 let 변수를 사용하면 변수포스트잇이 for 바깥이 아니라 안쪽에 생성됩니다.

더 쉽게 그림으로 비교해보자면

![20220322_023438](/assets/20220322_023438.png)

for 안에서 var i = 0 쓰면

- var 변수는 범위가 function입니다.

- var i 들어있는 포스트잇은 for 바깥에 생성됩니다.



for 안에서 let i = 0 쓰면

-let 변수는 범위가 { } 입니다.

- let i 들어있는 포스트잇은 for 안쪽에 3개 생성됩니다.

그리고 컴퓨터는 변수가져다쓸 때 가까운거 가져다 쓰려고합니다.





그냥 그렇게 동작해서 그렇습니다.

알 필요는 없는데 이런 원리같은거 알면 나중에 혼자 코드짤 때 많은 도움이 됩니다.

확장성있는 코드로 바꾸기



"제 코드가 좋은 코드인지 모르겠어요" 라고 묻는 분들이 많은데

1. 원하는 기능이 잘 구현되었는가

2. 확장성좋은가

3. 나중에 관리가 쉬울 것인가

4. 성능문제 없는가

이런거 체크해보면 됩니다. 그럼 자연스럽게 좋은 코드임  



그래서 위에서 짠 탭기능도 확장성을 한번 잡아봅시다.



Q. 지금 탭이 3개면 잘 동작하지만 4개 5개가 되면 잘 동작하지 않습니다.

탭이 4개나 5개로 바뀌어도 알아서 잘 동작하는 코드가 되려면 현재 코드를 어떻게 수정하면 될까요?


1시간 고민해도 모르겠으면 펼쳐봅니다

지금은 반복문에 3이라고 하드코딩해놔서

무조건 3번 코드가 복붙이 되어서

탭이 몇개든 간에 앞의 3개만 잘 동작합니다.

3이라는 숫자 대신 "지금 html에 있는 탭 버튼의 갯수"를 넣으면 잘 되지않을까요

html 갯수 세는 법은 안배웠으니 구글찾아보면 나올듯요


이건 답



```
for (let i = 0; i < $('.tab-button').length; i++){

  $('.tab-button').eq(i).on('click', function(){
    $('.tab-button').removeClass('orange');
    $('.tab-button').eq(i).addClass('orange');
    $('.tab-content').removeClass('show');
    $('.tab-content').eq(i).addClass('show');
  })

});
```
여러개 찾아주는 셀렉터로 html 요소 찾은 다음에 .length 붙이면 갯수를 세어줍니다.

저러면 이제 버튼이 5개면 반복문도 5번 돌겠고 그럼 버튼마다 잘 기능이 실행되겠네요


--------



### 이벤트 버블링과 이벤트관련 함수들


모달창 배경을 누르면 닫히는 기능을 추가해봅시다



앞선 강의에서 모달창을 하나 제작해서 띄워봤습니다.

근데 모달창의 검은 배경을 누르면 모달창이 닫히는 기능을 추가해봅시다.


```
<div class="black-bg">
  <div class="white-bg">
    모달창 내용
  </div>
</div>
```
▲ 모달창 HTML은 대충 이런 식으로 코드가 짜여있고

모달창 오픈할 때 show-modal 클래스명을 넣어서 오픈했다면






```
document.querySelector('.black-bg').addEventListener('click', function(){
  document.querySelector('.black-bg').classList.remove('show-modal');
})
```
이렇게 코드짜면 될듯요

그럼 검은 배경 눌렀을 때 모달창이 잘 닫힙니다.



근데 이상한 점이 하나 있습니다.

검은배경 뿐만 아니라 흰배경, input, 글자 등 모달창 내부의 어떤걸 눌러도 다 닫힙니다.

뭔가 이상한듯



이벤트 버블링



어떤 HTML 태그에 이벤트가 발생하면 그의 모든 상위요소까지 이벤트가 실행되는 현상을 이벤트 버블링이라고 합니다.

click이라는 이벤트로 예를 들어보면,

HTML 태그에 클릭이 발생하면 그의 모든 상위요소까지 자동으로 클릭된다는 말입니다.




```
<div>
 <div>
   <p>안녕</p>
 </div>
</div>
```
▲위의 코드에서 p태그 안녕이라는 글자를 클릭하면 브라우저는 사용자가 클릭을 총 3번 했다고 인지합니다.

p랑 그 위의 div랑 그 위의 div랑 이렇게요.

이게 이벤트 버블링인데 브라우저는 원래 그렇게 동작하도록 되어있습니다.

이 사실을 모르고 코드짜다보면 가끔 이상한 현상이 발생할 수도 있습니다.


그래서 아까 "검은배경 누르면 모달창 닫아주세요~" 코드를 다시 살펴보면

왜 흰배경 눌러도 모달창이 닫히냐면


```
<div class="black-bg"> (← 이거 누르면 모달창 닫으라고 코드짰음)
  <div class="white-bg">
    모달창 내용
  </div>
</div>

```

유저가 div class="white-bg" 이거 클릭해도

이벤트 버블링 때문에 div class="black-bg" 이것도 클릭한 것입니다.

그래서 거기 붙어있던 이벤트리스너가 동작해서 모달창을 닫아주는겁니다.



이 문제를 해결할 때 자주 사용하는

이벤트관련 함수/메소드들을 살펴보도록 합시다.


이벤트리스너 안에서 쓰는 이벤트 함수들


```
document.querySelector('.black-bg').addEventListener('click', function(e){
  e.target;
  e.currentTarget;
  e.preventDefault();
  e.stopPropagation();
})
```

이벤트리스너의 콜백함수에 파라미터 아무거나 추가하면

이벤트관련 유용한 함수들을 사용가능합니다.

파라미터 이름은 아무렇게나 작명하면 됩니다. 보통 대충 e라고 함





e.target은 실제 클릭한 요소 알려줌 (이벤트 발생한 곳)

e.currentTarget은 지금 이벤트리스너가 달린 곳 알려줌 (참고로 this라고 써도 똑같음)

e.preventDefault() 실행하면 이벤트 기본 동작을 막아줌

e.stopPropagation() 실행하면 내 상위요소로의 이벤트 버블링을 중단해줌

몇개만 뽑아봤는데 필요할 때 가져다가 쓰면 됩니다.

e.target 이런거 출력해보십쇼 진짜 그게 맞나





여기서 중요한건 e.target인데

이벤트 버블링이 일어난다고 해도

사용자가 실제로 클릭한 그 요소는 저 문법으로 찾아낼 수 있다는걸 기억해둡시다.


그럼 모달창 닫기 버그를 해결해봅시다



코드를 대충 이렇게 수정하면 되지 않을까요?


```
document.querySelector('.black-bg').addEventListener('click', function(e){
   지금 실제로 클릭한게 검은 배경일 때만 닫아라
})
```
한글먼저 짜놓으면 쉽습니다. 이제 자바스크립트로 번역만 잘하면 됩니다.



Q. 아니 한글짜는게 쉽다는건 알겠는데 저 논리를 한글로 어떻게 생각해냄? 그냥 답을 미리 아니까 그런거아님?

-> 이건 e.target같은 개념을 알고 있으면 누구나 생각가능한것입니다 저도 답 모름

```
document.querySelector('.black-bg').addEventListener('click', function(e){
  if (지금 실제로 클릭한거 == 검은 배경) {
    document.querySelector('.black-bg').classList.remove('show-modal');
  }
})
```
이 경우에 이거 해주세요~ 라고 코드짜려면 if문 밖에 없습니다.

그리고 조건식안에 들어가는건 거의 등호/부등호 이런거래서 등호로 바꿔봤습니다.



지금 실제로 클릭한건 자바스크립트로 뭐죠?

e.target일듯



검은배경은 자바스크립트로 뭐죠?

document.querySelector('.black-bg') 일듯

```
document.querySelector('.black-bg').addEventListener('click', function(e){
  if ( e.target == document.querySelector('.black-bg') ) {
    document.querySelector('.black-bg').classList.remove('show-modal');
  }
})

```

이러면 될 것 같은데

코드만 따라치지말고 언제나 의심을 해야합니다.

진짜 저거 두개를 등호로 == 비교해도 됩니까

둘 다 콘솔창에 출력해보고 == 비교해보는 버릇을 가지도록 합시다.







(참고)

저기서 e.currentTarget 출력해보면 검은배경이 나오기 때문에

e.target == e.currentTarget 이렇게 써도 될듯요

아니면 e.target == this 이렇게 써도 될듯요







(참고2)

jQuery 셀렉터로 찾은 결과와

querySelector 셀렉터로 찾은 결과는 다르게 생겼습니다.

출력해보면 전자는 이상한 object 이런게 나오고 후자는 <html> 이런게 나옵니다.

그래서 e.target == $('.black-bg') 이건 사용불가능합니다.

그리고 애초에 jQuery 셀렉터끼리 등호비교는 불가능합니다.



$('.black-bg').is($('.black-bg')) 이런 비교용 함수쓰든가 하면 됩니다.

위 예제에선 $(e.target).is($('.black-bg')) 이러면 됩니다.


그래서 오늘의 결론

1. 이벤트 버블링은 항상 일어난다

2. 이벤트 관련 유용한 함수들을 사용가능하다

잘 기억해두면 됩니다.


---------


### 이벤트 버블링 응용과 dataset

이벤트버블링을 알고계시면 이벤트리스너를 줄여가며 개발할 수도 있습니다.

필수나 그런건 아니고 알면 언젠가 도움되는 내용이기 때문에

전에 만들었던 탭기능을 다시 만들어봅시다. 원래 복습을 해야 실력이 느는 것임



전에 만들어둔 탭기능 코드

```
for (let i = 0; i < $('.tab-button').length; i++){

  $('.tab-button').eq(i).on('click', function(){
    $('.tab-button').removeClass('orange');
    $('.tab-button').eq(i).addClass('orange');
    $('.tab-content').removeClass('show');
    $('.tab-content').eq(i).addClass('show');
  })

});
```

전에 만들었던 탭기능 함수로 축약해보기



함수쓰면 긴 코드를 짧은 단어하나로 축약할 수 있다고 했습니다.

그래서 탭만들 때 썼던 4줄의 코드를 함수로 축약해볼 것입니다.

별 이유는 없고 깔끔해보일 것 같으니까요

실은 함수로 넣으면 1. 재사용이 편리하고 2. 나중에 남이 읽었을 때도 뭔가 이해가 쉬울 수 있습니다.




```
for (let i = 0; i < $('.tab-button').length; i++){

  $('.tab-button').eq(i).on('click', function(){
    탭열기(i)
  })

});


function 탭열기(구멍){
  $('.tab-button').removeClass('orange');
  $('.tab-button').eq(구멍).addClass('orange');
  $('.tab-content').removeClass('show');
  $('.tab-content').eq(구멍).addClass('show');
}
```
이러면 될듯요



Q. 왜 구멍뚫음?

A. 함수로 코드를 싸맬 때 안에 변수가 들어있으면 변수를 전부 파라미터로 바꾸는게 좋습니다.

그래야 잘 동작합니다. 그래서 i 부분을 전부 파라미터로 바꿨습니다.

이제 함수 사용할 때

탭열기(0) 이러면 0번 탭이 열림

탭열기(1) 이러면 1번 탭이 열림

탭열기(2) 이러면 2번 탭이 열림


이벤트버블링을 알면 이벤트리스너 줄일 수 있음



지금 탭을 만들 때 이벤트리스너를 3개나 부착했습니다. (버튼이 3개니까요)

근데 잘 생각해보면 이벤트리스너 1개만 써도 충분히 기능구현이 가능합니다.



버튼 3개의 부모인 <ul class="list"> 여기에 이벤트리스너 1개만 있어도 탭기능만들 수 있을듯요

버튼 뭘 누르든 간에 <ul class="list">에 붙은 이벤트리스너도 동작하니까요.

왜냐면 이벤트버블링이 항상 일어나기 때문입니다.


```
$('.list').click(function(){
  지금 누른게 버튼 0이면 탭열기(0) 실행
  지금 누른게 버튼 1이면 탭열기(1) 실행
  지금 누른게 버튼 2이면 탭열기(2) 실행
})
```
그래서 이렇게 탭기능 만들어도 잘 동작한다는 소리입니다.

(jQuery 셀렉터엔 .click() 이라고 써도 간단하게 click 이벤트리스너 부착가능)


Q. 왜 굳이 이벤트리스너 줄여서 코드 짜냐고요?

- 버튼이 몇십개 있다면 이렇게 짜는게 덜 복잡하고

- 이벤트리스너를 줄이면 램용량을 절약할 수 있습니다. 성능개선의 일환입니다.

그래서 위처럼 코드짜서 탭기능 완성해보도록 합시다.



탭기능 완성해보고 눌러봅시다

```
$('.list').click(function(e){
  if (e.target == document.querySelectorAll('.tab-button')[0] ){
    탭열기(0)
  }
  if (e.target == document.querySelectorAll('.tab-button')[1] ){
    탭열기(1)
  }
  if (e.target == document.querySelectorAll('.tab-button')[2] ){
    탭열기(2)
  }
})

function 탭열기(){
  생략
}
```

이러면 탭기능 잘됩니다

근데 이러나 저러나 코드 양은 똑같군요

dataset 문법을 알면 위 코드를 조금 더 짧게 바꿀 수도 있습니다.


dataset 문법 (잡기술)


```
<div data-데이터이름="값"></div>
```


html 안에 유저 몰래 정보를 숨겨놓을 수 있습니다.

데이터이름 아무렇게나 작명하고 값도 넣으면 됩니다.

일반 유저들은 모름




```
document.querySelector().dataset.데이터이름;
```

이러면 html 요소에 숨겨놨던 데이터가 이 자리에 남습니다.

출력해보면 진짜로 아까 숨겨놓은 값이 남습니다.





이런 잡기술을 알고있으면 위에서 만들었던 코드를 조금 더 짧게 축약가능합니다.




```
<li class="tab-button" data-id="0">Products</li>
<li class="tab-button orange" data-id="1">Information</li>
<li class="tab-button" data-id="2">Shipping</li>
```

▲ 우선 탭의 버튼들에 이렇게 데이터를 숨겨봅시다. 따라하셈  

그리고 아까 코드를 다시 살펴보면 if문이 3개였습니다.

버튼0 누르면 탭열기(0) 실행해주세요~

버튼1 누르면 탭열기(1) 실행해주세요~

버튼2 누르면 탭열기(2) 실행해주세요~

```
$('.list').click(function(){
  탭열기(지금누른버튼에 숨어있던 data-id)
});
```

▲ 근데 이렇게 코드짜면 굳이 if문이 필요없이 한 줄로 해결아닙니까

맞습니다.

지금누른버튼에 숨어있던 data-id를 알려주는 코드같은게 있습니까

있습니다. 방금 배운듯








```
$('.list').click(function(e){
  탭열기(e.target.dataset.id)
});

```
▲ 지금누른 버튼을 찾고 싶으면 e.target이고

거기 숨어있는 data-id 꺼내고 싶으면 .dataset.id 붙이면 됩니다.

그래서 위처럼 코드짜도 탭기능 완성인 것입니다.

이전 코드가 좋으면 그거 쓰면 되고 취향것 쓰시길 바랍니다.







dataset 문법이 인터넷익스플로러 11+ 에서 동작하는데 그게 마음에 안들면

옛 브라우저까지 호환 잘되는 jQuery 함수 이용하는 방법도 있습니다.

$(셀렉터).data('데이터이름', '값') 이렇게 저장하고

$(셀렉터).data('데이터이름') 이렇게 출력합니다.











오늘의 교훈 :

1. 함수로 축약할 때 변수같은게 있으면 파라미터로 바꾸는게 좋음

2. 이벤트리스너 줄이면 이점이 있음

3. dataset 잡기술 알면 이벤트리스너 적게 사용할 때 내가 뭐 눌렀는지 쉽게 파악할 수도 있음


----

### 웹개발에 자주 쓰는 자바스크립트 라이브러리들


자바스크립트로 UI를 직접 만들 필요는 없습니다.

최상의 퍼포먼스를 위해선 당연히 UI를 직접 만들어야하겠지만

요즘의 개발 메타는 '개발자가 편한 개발'입니다.

어떤 도구를 쓰든간에 개발자가 코딩이 쉬워지고 관리가 쉬워지면 장땡이라는 겁니다.





여러분이 지금까지 공부했던 슬라이더, 모달창, nav 메뉴 등의 웹 UI들은 이미 수많은 사람들이 만들어보았던 UI들입니다.

그래서 착한 사람들이 자주사용하는 웹UI를 다른사람들도 매우 쓰기 쉽게 '라이브러리'화를 해놓았는데

라이브러리를 설치해서 이용하면 매우 쉽게 복붙식으로 웹 UI를 개발하실 수 있습니다.



자바스크립트 라이브러리 사용법 요약 :

0. 각 라이브러리 소개 홈페이지에 들어가 Get started 메뉴를 잘 살펴본다

1. 설명대로 js파일이나 CSS 파일을 설치한다

2. Get started 부분에 있는 예제코드를 눈치껏 잘 복붙한다

3. 그럼 UI 개발 끝입니다.





주의점 :

정확한 사용법은 각 라이브러리 홈페이지를 참고해주세요


![20220322_024413](/assets/20220322_024413.png)

1. 슬라이드되는 이미지 (일명 Carousel)



가장 유명한 Slick - https://kenwheeler.github.io/slick/





설치
```
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
```
Slick 자바스크립트, Slick CSS파일, jQuery파일 첨부가 필요합니다.

(jQuery 까먹지마세요)

홈페이지에서 다운받거나 위처럼 CDN 방식으로 첨부하시면 되겠습니다.







사용법

▼ HTML을 이런 식으로 만들어줍니다.

부모 div박스의 클래스 명은 자유롭게 지정합니다.
```
<div class="your-class">
  <div>내용1</div>
  <div>내용2</div>
  <div>내용3</div>
</div>
 ```

▼그 다음 jQuery를 이용해서 이런 식으로 부모 클래스를 찾아서 .slick이라는 함수를 붙여줍니다.
```
 <script>
    $(document).ready(function(){
      $('.your-class').slick();
    });
  </script>
  ```
그럼 슬라이더가 완성됩니다. 끝!



이제 slick() 함수 내부에 {} 이런 자료형을 하나 추가할 수 있는데

중괄호 내에 여러가지 코드를 추가하면 기능 세부조정이 가능합니다.


```
$('.your-class').slick({
  infinite: true,
  slidesToShow: 3,
});

```
▲ 위의 예시는 한번에 몇개의 슬라이드를 보여줄지,

그리고 무한히 보여줄지를 셋팅한 부분입니다.

더욱 자세한 커스터마이징예시들은 홈페이지를 참고하시면 되겠습니다.

다른 Carousel UI들도 매우 비슷합니다.


![20220322_024526](/assets/20220322_024526.png)

2. HTML Chart

특수한 페이지들이 아니면 차트는 일반적으로 사용할 일이 별로 없는데

간지나는 템플릿 제작용이나 포트폴리오 용으로 많이 사용하는 것 같습니다.

가장 유명한 chart.js - https://www.chartjs.org/docs/latest/getting-started/





설치법

Getting started 메뉴에 나오는 설치법 그대로 따라하시면 됩니다.
```
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
```
▲ 자바스크립트 파일을 다운받거나 CDN 방식으로 첨부합니다.









사용법
```
<canvas id="myChart"></canvas>
```
▲ 차트를 생성하고 싶은 div 내에 이 canvas라는 태그를 넣고 id를 주시면 됩니다.

canvas 태그는 자바스크립트로 뭔가 그림그리고 싶을 때 사용하는 태그입니다.






```
<script>
var ctx = document.getElementById('myChart').getContext('2d');
var chart = new Chart(ctx, {
    //차트설정
    type: 'line',

    //차트데이터
    data: {
        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
        datasets: [{
            label: 'My First dataset',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [0, 10, 5, 2, 20, 30, 45]
        }]
    },
    options: {}
});
</script>
```
▲ 위의 스크립트 태그를 하단에 첨부하면 차트가 하나 생깁니다. 끝!

잘 붙여넣었다면 맨 처음에 붙여넣은 canvas라는 태그 내에 차트가 뾰로롱 하고 생성이 됩니다.



▼커스터마이징 하려면

홈페이지에 나온 내용대로 자바스크립트 코드를 바꾸면 되겠습니다.

type: 'line',
이라고 되어있는 부분을 bar, pie, doughnut 등으로 바꾸면 각각 바, 파이, 도넛차트를 만들 수 있고




```
datasets: [{
  label: 'My First dataset',
  backgroundColor: 'rgb(255, 99, 132)',
  borderColor: 'rgb(255, 99, 132)',
  data: [0, 10, 5, 2, 20, 30, 45]
}]
```
이 부분을 조작하시면 차트 아이템의 제목, 배경색, 테두리색, 데이터값을 각각 수정하실 수 있습니다.

몇개 건드려보시면 값이 바뀌는걸 바로바로 확인할 수 있기 때문에

직접 해보시면 되겠습니다.

![20220322_024644](/assets/20220322_024644.png)

3. Navbar 메뉴

이것도 직접 만들 수는 있지만 아주 다양한 디자인의 Navbar를 모아놓은 사이트가 하나 있습니다.

navnav.co







사용법

그냥 원하는 샘플을 하나 골라서

상세페이지에 뜨는 HTML CSS JS 코드들을 여러분 파일에 복사 붙여넣기 하시면 개발 끝입니다.

![20220322_024711](/assets/20220322_024711.png)


  주의점

  1. 자바스크립트 코드에 $ 표시가 보인다면 jQuery문법으로 개발된 UI이기 때문에 jQuery가 잘 설치되어있는지 확인하셔야합니다.

  2. CSS코드에 $표시가 있거나 듣도보도 못한 이상한 문법이 있다면 그것은 보통 CSS 전처리엔진 코드입니다. 전처리 CSS말고 일반 CSS코드를 찾아서 복사붙여넣기하세요.  

  3. 포트폴리오에 사용해도 복붙한 티가 100% 나기 때문에 여러분의 실력을 어필한다기보다는 복붙실력을 어필할 수 있습니다.


![20220322_024741](/assets/20220322_024741.png)

4. Scroll Reveal



스크롤바를 내렸을 때 등장하는 애니메이션을 주고 싶은 경우 사용하면 좋은 라이브러리들입니다.

Scroll Reveal - https://scrollrevealjs.org/

Animate On Scroll - https://michalsnik.github.io/aos/

가장 유명한 Scroll reveal 이라는 라이브러리를 사용해봅시다.





설치법

역시 홈페이지에서 자바스크립트 파일을 구해서 여러분 HTML에 첨부하시면 되겠습니다.
```
 <script src="https://unpkg.com/scrollreveal"></script>
 ```
▲ CDN 방식으로 제공하긴 합니다.









사용법

▼ 애니메이션 주고싶은 요소에 클래스명이나 아이디를 달아줍니다.  
```
<h1 class="headline">
    안녕하세요
</h1>
```
▼ 그 다음에 자바스크립트 이거 한줄만 적어주시면 끝입니다.
```
<script>
  ScrollReveal().reveal('.headline');
</script>
```
그럼 여러분이 안녕하세요라는 글자까지 스크롤바를 내렸을 때 글자가 서서히 등장합니다.

reveal 이라는 함수안에 여러분이 애니메이션 주고싶은 요소를 jQuery 셀렉터처럼 찾으시면 되겠습니다.

그리고 API 메뉴를 눌러보시면 어디서 등장할지, 어떻게 등장할지를 커스터마이징할 수 있는 옵션들을 찾아 사용하실 수 있습니다.

![20220322_024824](/assets/20220322_024824.png)


5. FullPage 전체화면 스크롤 사이트   

자유로운 스크롤을 막고 페이지를 PPT처럼 한번에 한 페이지만 보여주는 라이브러리입니다.

어떤건지는 예시 페이지를 들어가보시면 알 수 있겠습니다. (https://alvarotrigo.com/fullPage/)

처음 보는사람들은 우와 할 수 있겠으나

지금은 이런 사이트들이 유행이 지났기 때문에 어디서 외주요청 받았다 이런 경우가 아니면 잘 사용하진 않습니다.

요즘은 FullPage 형식보다 자유로운 스크롤 + 애니메이션이 대세입니다.

그리고 스크린 사이즈에 따라 CSS 반응형으로 짜는게 가장 어렵습니다. (투입 시간대비 가성비가 안좋음)

FullPage.js - https://github.com/alvarotrigo/fullpage.js







설치법

fullpage.js 자바스크립트 파일과 fullpage.css 파일이 필요합니다. 홈페이지 들어가셔서 구해오시면 되겠습니다.
```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.0.7/fullpage.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.0.7/fullpage.js"></script>
```
▲ CDN 방식도 제공합니다. 여러분 HTML에 잘 붙여넣도록 합시다.









사용법

▼ HTML을 만들어줍니다. 부모에게 id를 잘부여해주도록 합시다.
```
<div id="fullpage">
    <div class="section">One</div>
    <div class="section">
        <div class="slide" data-anchor="slide1">Two 1</div>
        <div class="slide" data-anchor="slide2">Two 2</div>
    </div>
    <div class="section">Three</div>
    <div class="section">Four</div>
</div>
 ```

▼ 자바스크립트를 하단에 입력해주시면 되겠습니다.
```
<script>
  new fullpage('#fullpage', {
	//하단은 옵션
      autoScrolling:true,
      scrollHorizontally: true,
      sectionsColor: ['yellow', 'orange', '#C0C0C0', '#ADD8E6'],
  });
</script>

```
new fullpage() 이 함수만 쓰면 되는데

함수 안의 첫째 파라미터엔 여러분이 fullpage로 만들 div의 아이디를 적어주시면 되고

두번째 파라미터는 옵션을 집어넣어주시면 됩니다.

옵션 사용법은 홈페이지에 자세히 나와있습니다.

참고로 두번째 div박스를 보시면... slide라는 클래스를 가진 div를 만드시면 자동으로 이미지 슬라이더 UI화 됩니다.













기타 유용한 라이브러리 :

Font Awesome (500종 이상의 무료 vector 웹 아이콘)

Velocity.js (jQuery Animate 함수처럼 이용가능한데 훨씬 더 매끄러움)

GSAP (매우 매끄러운 자바스크립트 애니메이션, TweenMax 함수 이용가능) https://greensock.com/get-started/
