---
title: "[js] Javascript&Jquery part3"
layout: post
subtitle: JS
date: "2021-08-17-23:45:51 +0900"

categories: study
tags: JS
# layout: post
# title:  WebFrontEnd
# subtitle:   "시작하기"
# categories: study
# tags: java
comments: true
---

### Array 와 Object 자료형


오늘의 숙제 :

하단참고






```
var car = '소나타';
var carPrice = 50000;
var carColor = 'white';
```
갑자기 여러 데이터들을 변수에 저장할 일이 생겼습니다.

그럼 코드 위처럼 짜도 되겠지만

자료가 몇십개면 변수도 몇십개 귀찮게 만들어야겠군요.

그냥 한 변수에 여러개의 자료를 저장하는 방법도 있습니다.











Array 자료형



여러가지 자료를 한곳에 저장하고 싶을 때 사용하는 자료형입니다.


```
var car = ['소나타', 50000, 'white'];
```
대괄호를 열고 자료를 콤마로 구분해서 집어넣으면 됩니다.

그럼 여러 자료를 엑셀처럼 저장가능




```
var car = ['소나타', 50000, 'white'];
console.log(car[1]);
```
array 자료에서 데이터 뽑을 땐 대괄호를 뒤에 붙이면 됩니다.

[x] 라고 쓰면 x번째 자료를 출력해줍니다.




```
var car = ['소나타', 50000, 'white'];
car[1] = 60000;
console.log(car[1]);
```
array 자료를 수정하고 싶으면 등호 이용해서 수정하면 됩니다.

자료 추가도 됩니다.

그래서 결론은 여러 자료를 변수 하나에 저장하고 싶으면 array를 사용하면 편리합니다.











Object 자료형



이것도  여러가지 자료를 한곳에 저장하고 싶을 때 사용하는 자료형입니다.


```
var car2 = { name : '소나타', price : 50000 };
```
중괄호를 열고 자료를 콤마로 구분해서 집어넣으면 됩니다.

그런데 자료 왼쪽에 자료의 이름을 붙여서 저장해야합니다.



멋진 말로 자료의 이름은 key, 실제 자료는 value라고 부릅니다.

그래서 object 자료형은 key : value 형태로 자료를 저장할 수 있습니다.

이름붙여주니 구분하기 편리한듯






```
var car2 = { name : '소나타', price : 50000 };
console.log(car2['name']);
console.log(car2.name);
```
array 자료에서 데이터 뽑을 땐 대괄호를 뒤에 붙이면 되는데

[자료이름] 이렇게 써야합니다.

.자료이름 이렇게 써도 가능합니다. 마음에드는거 쓰십쇼






```
var car2 = { name : '소나타', price : 50000 };
car2['name'] = '그랜저';
console.log(car2['name']);
```
object 자료를 수정하고 싶으면 등호 이용해서 수정하면 됩니다.

자료 추가도 됩니다.

그래서 결론은 여러 자료를 변수 하나에 저장하고 싶으면 object 사용해도 편리합니다.













Array/Object 차이



그래서 둘 중 아무거나 골라서 맘대로 쓰면 되는데



상품명, 가격, 연식, 색상, 옵션여부, 카드할인여부 ... (뒤에 10개 더 있음)

이런 데이터를 변수하나에 보관하고 싶으면 array 쓸 것입니까 object 쓸 것입니까

저라면 object 사용할 것 같습니다.


```
var car = ['소나타', 50000, 2030, 'white', false];
```
▲ array쓰면 저장시엔 간단하겠지만

나중에 자료 뽑을 때 약간 어렵습니다.

가격뽑을 때 "가격자료가 몇번째 위치에 있었지?" 를 기억해내야합니다.






```
var car = { name : '소나타', price : 50000, year : 2030 };
```
▲ object로 넣으면 저장은 귀찮겠지만

가격뽑을 때 "가격의 key 이름이 뭐였지" 를 기억하면 됩니다.

여러분이 컴퓨터가 아니라 인간이면 순서기억보다 key값 기억해내는게 훨씬 쉬울겁니다.

이런 차이점이 있으니 array 쓸지 object 쓸지 잘 고민해봅시다.









Array/Object 차이 2



array는 순서개념이 있습니다. 왼쪽에 적을 수록 더 앞에 있는 자료임

object는 순서개념이 없습니다. 가장 왼쪽에 적었다고 해도 1빠임을 보장해주지 않습니다.

그래서 array 자료는 순서개념이 있다보니



- 가나다순 정렬

- x번 자료부터 x번 자료까지 자르기

- x번 자료 바꾸기

- 맨 뒤, 맨 앞에 자료 넣기

- 원하는 자료가 들어있나 검색

순서개념이 필요한 많은 것들을 할 수 있습니다.





array자료.sort() 하면 가나다순 정렬되고

array자료.slice(x, y) 하면 x번부터 y번 전까지 자를 수 있고

array자료.push(x) 하면 x를 맨 뒤에 입력할 수 있고

이런 기본함수들이 준비되어있습니다.

array 자료 조작이 필요할 때 검색해서 써보도록 합시다.









오늘의 숙제 :


```
<div class="container mt-3">
  <div class="card p-3">
    <span>상품명</span>
    <span>가격</span>
  </div>
</div>

<script>
  var car2 = { name : '소나타', price : 50000 }
</script>

```
여기서 car2 에 저장된 소나타라는 상품명과 50000이라는 가격을 뽑아서 html에 집어넣어보십시오

자바스크립트 2줄 작성하면 될듯요

----


### 약간 복잡한 Array & Object 데이터바인딩

저번시간 숙제는

```
<div class="container mt-3">
  <div class="card p-3">
    <span class="car-title">상품명</span>
    <span>가격</span>
  </div>
</div>

<script>
  var car2 = { name : '소나타', price : 50000 }
  document.querySelector('.car-title').innerHTML = car2.name;
</script>
```
찾기 쉽게하려고 class 대충부여해서 이런 식으로 작성했습니다.

가격도 알아서 해봅시다.


조금 더 복잡한 자료를 다뤄봅시다


```
<div class="container mt-3">
  <div class="card p-3">
    <span class="car-title">상품명</span>
    <span>가격</span>
  </div>
</div>

<script>
  var car2 = { name : '소나타', price : [50000, 3000, 4000] }
  document.querySelector('.car-title').innerHTML = car2.name;
</script>
```

car2 에 저장된 자료를 저렇게 복잡하게 바꿔봅시다.

왜 저런게 가능하냐면

object 안에 array/object도 집어넣을 수 있어서 그렇습니다.

array 안에 array/object 넣어도 상관없습니다.



Q. 그럼 car2 에 있는 50000 이라는 데이터를 뽑아서 html의 가격표시부분에 꽂아넣고 싶으면 코드를 어떻게 짜야할까요?

알아서 코드짜보시면 되는데 저런게 어려우면 콘솔창에 일단 출력부터 해보면 쉽습니다.

복잡한 데이터에서 자료꺼내려면



감상만 하고있지말고 console.log 써서 복잡한 자료를 출력부터해보면 됩니다.

콘솔창에선 복잡한 자료도 어떻게 생겼는지 쉽게 축약해서 알려주는데

여러분은 여기서 시작기호만 잘보면 됩니다.

![20220322_025440](/assets/20220322_025440.png)


그래서 console.log(car2) 해봤습니다.

근데 시작기호가 { 이거면 무조건 object 자료형입니다. (무조건은 아니고 90% 확률)

그래서 object 자료에서 자료꺼내는 문법부터 작성하면 됩니다.


![20220322_025500](/assets/20220322_025500.png)


그래서 console.log(car2.price) 해봤습니다.

근데 시작기호가 [ 이거면 무조건 array 자료형입니다. (무조건은 아니고 90% 확률)

그래서 array 자료에서 자료꺼내는 문법부터 작성하면 됩니다.



console.log(car2.price[1]) 이렇게 했더니 3000 잘 출력되고

console.log(car2.price[0]) 이렇게 했더니 50000 잘 출력되는군요

이렇게 하나하나 데이터 뽑아가면 아무리 어려운 것도 잘 뽑을 수 있음













근데 왜 이딴거 배우는 것인가



Q. 그냥 html에 50000 이렇게 하드코딩해놓으면 안될까요

A. 안바뀌면 그래도 되는데 실제 사이트는 html이 맨날 바뀌어야합니다.



쇼핑몰을 만든다고 하면 차 가격이 맨날 바뀔 것 아닙니까

가격을 매일매일 서버에서 받아와서 html로 보여줘야할텐데

그러면 html 안에 50000 이렇게 해놓거나

document.querySelector('.car-title').innerHTML = 50000;

이렇게 대충 적어놓으면 나중에 수정하기 어렵습니다.

그래서 "서버에서 받아온 데이터를 저기 꽂아넣어주세요~" 라고 코드짜는 중인 것일 뿐입니다.



###### 실제 웹서비스 개발할 땐 2개 방식이 있는데



그냥 누가 내 사이트로 접속하면 html 이쁘게 만들어서 보내주는걸 웹서비스라고 합니다.

근데 html을 누가 완성하는지에 따라 개발방식의 차이가 있습니다.

![20220322_025544](/assets/20220322_025544.png)
1. 서버에서 html을 미리 완성해서 고객에게 보내줌

이걸 server-side rendering 이라고 합니다.


![20220322_025552](/assets/20220322_025552.png)


2. 서버가 비어있는 html과 데이터만 보내줌

그리고 자바스크립트를 이용해서 고객 브라우저안에서 html을 완성합니다.

이걸 client-side rendering 이라고 합니다.



요즘은 2번이 유행이라 우리도 데이터를 서버에서 가져와서 데이터바인딩하는 방법을 배우고 있는 것입니다.  

근데 데이터바인딩하는 문법이 너무 길고 복잡하기 때문에 작은 사이트는 쌩 자바스크립트 써도 커버가능한데

큰거 만들 땐 사람들이 라이브러리 설치해서 쓰는 것입니다.

jQuery, React, Vue 이런거 사용하면 코드가 짧아집니다.



더 최근엔 2번에 질려서 또 1번으로 돌아가는 움직임이 있습니다.

각각 장단점이 있음















오늘의 숙제 :

list.html 만들고 하단 코드를 복사붙여넣기합니다.

그럼 상품 3개를 진열할 수 있는 카드레이아웃이 나옵니다. (bootstrap 필요)

products 변수안에 상품데이터도 준비되어있는데

자바스크립트를 열심히 짜서 3개의 상품 제목, 가격을 html에 전부 꽂아넣어오십시오.




```
<div class="card-group container">
  <div class="card">
    <img src="https://via.placeholder.com/600">
    <div class="card-body">
      <h5>Card title</h5>
      <p>가격 : 70000</p>
      <button class="btn btn-danger">주문하기</button>
    </div>
  </div>
  <div class="card">
    <img src="https://via.placeholder.com/600">
    <div class="card-body">
      <h5>Card title</h5>
      <p>가격 : 70000</p>
      <button class="btn btn-danger">주문하기</button>
    </div>
  </div>
  <div class="card">
    <img src="https://via.placeholder.com/600">
    <div class="card-body">
      <h5>Card title</h5>
      <p>가격 : 70000</p>
      <button class="btn btn-danger">주문하기</button>
    </div>
  </div>
</div>

<script>
  var products = [
    { id : 0, price : 70000, title : 'Blossom Dress' },
    { id : 1, price : 50000, title : 'Springfield Shirt' },
    { id : 2, price : 60000, title : 'Black Monastery' }
  ];
<script>
```


-----------


### 데이터바인딩 숙제 & 문자중간에 변수넣는 법


오늘 새로배울 내용은 문자 중간에 변수넣는 ${ } 문법 뿐이라

숙제 알아서 잘한 분들은 그것만 배우고 지나갑시다.







저번시간 숙제는



첫째 상품명을 뽑는 법을 알아봅시다.


```
var products = [
  { id : 0, price : 70000, title : 'Blossom Dress' },
  { id : 1, price : 50000, title : 'Springfield Shirt' },
  { id : 2, price : 60000, title : 'Black Monastery' }
];
```
▲ 어렵게 생긴 자료도 console.log 해보면 쉽게 출력할 수 있다고 했습니다.

console.log(products) 해보면 [{ }, { }, { }] 이렇게 나옵니다.  

그냥 array 안에 object 3개가 들어있을 뿐입니다.

그래서 저기서 내가 원하는 자료를 뽑고 싶으면 시작 기호만 잘 보면 됩니다.

[ 이거는 array라서 인덱싱하면 됩니다.





이번엔 console.log(products[0]) 해보면 { id : 0, price : 70000, title : 'Blossom Dress' } 이런게 나옵니다.

{ 이거는 object라서 이름불러주면 됩니다.

여기서 Blossom Dress 뽑으려면

console.log(products[0].title)

이렇게 쓰면 잘나올듯요

(products 변수 하단)
```
document.querySelectorAll('.card-body h5')[0].innerHTML = products[0].title;
document.querySelectorAll('.card-body p')[0].innerHTML = '가격 : ' + products[0].price

document.querySelectorAll('.card-body h5')[1].innerHTML = products[1].title;
document.querySelectorAll('.card-body p')[1].innerHTML = '가격 : ' + products[1].price;

document.querySelectorAll('.card-body h5')[2].innerHTML = products[2].title;
document.querySelectorAll('.card-body p')[2].innerHTML = '가격 : ' + products[2].price;

```

이렇게 코드를 작성했더니 카드에 상품명, 가격이 잘 들어가는군요

반복문 이런거 쓰고싶으면 쓰면 됩니다.

답안 그대로 따라적으면 영어 타이핑 실력만 늘 뿐 조금이라도 직접 해봐야합니다.


문자 중간에 변수 쉽게넣기


```
console.log(1 + '2');  // '12'출력됨
```
자바스크립트에서 덧셈기호 쓰면 문자이어붙이기가 쉽게 가능합니다.

숫자 + 숫자는 숫자 덧셈해주는데

문자 + 숫자처럼 적어도 1개가 문자면 문자 덧셈을 해줍니다.

문자덧셈은 그냥 문자2개 이어붙여줌






```
var a = '안녕';
console.log('문자' + a + '문자');  // '문자안녕문자'출력됨

```
그래서 문자중간에 변수넣고 싶으면 덧셈기호 저렇게 활용하면 됩니다.






```
var a = '안녕';
console.log(`문자 ${a} 문자`);  // '문자안녕문자'출력됨
```
귀찮으면 여러분 키보드 물결기호 밑에 있는 백틱기호 쓰면 됩니다.

백틱기호도 문자만들어주는데

1. 문자 중간에 엔터키 칠 수 있음

2. 중간에 ${ 변수명 } 문법을 이용가능함



${ } 이건 문자안에 변수넣어주는 간단한 문법입니다.

일반 따옴표안에선 사용불가능합니다.

필요하면 씁시다.  

----

### Select 인풋 다루기


select 들어간 폼을 만들어봅시다



아무데나 붙여넣기하고 시작합시다 (Bootstrap이 설치되어있으면 이쁘게 나옴)


```
<form class="container my-5 form-group">
    <p>상품선택</p>
    <select class="form-select mt-2">
      <option>모자</option>
      <option>셔츠</option>
    </select>
</form>
```
select 는 input 이랑 똑같은데

사용자가 고를 수 있는 선택지를 드랍다운 메뉴로 제공하는 input 입니다.

선택지는 option으로 넣으면 됩니다.



- select 태그도 선택시 input, change 이벤트가 발생합니다.

- select 태그도 .value로 유저가 입력한 값을 가져올 수 있습니다.


셔츠고르면 밑에 select 더 보여주기


![20220322_030154](/assets/20220322_030154.png)

▲ 유저가 셔츠를 선택하면 하단에 95, 100 을 선택할 수 있는 select를 하나 더 만들어봅시다.

UI 만드는 법은 다 알고 있으니 알아서 해봅시다.




어떻게 만들었냐면



UI 어떻게 만든다고 했습니까

html css로 미리 디자인해놓고 원할 때 보여주기만 하면 됩니다.

그래서


```
<form class="container my-5 form-group">
    <p>상품선택</p>
    <select class="form-select mt-2">
      <option>모자</option>
      <option>셔츠</option>
    </select>
    <select class="form-select mt-2 form-hide">
      <option>95</option>
      <option>100</option>
    </select>
</form>

```
미리 select 하나 더 추가했고 form-hide 클래스에는 display : none 주었습니다.

이제 "유저가 셔츠선택하면 form-hide 제거해주세요~" 라고 코드짜면 완성일듯요

```
<script>
  if (유저가 선택한거 == '셔츠') {
    $('.form-select').eq(1).removeClass('form-hide');
  }
</script>
```
그래서 하단에 이렇게 짰습니다.

Q. 유저가 select 에서 뭐 선택했는지 어떻게 아냐고요?

A. input과 똑같이 .value 이런거 쓰면 가져올 수 있댔습니다.







 ```

<script>
  var value = $('.form-select').eq(0).val();
  if (value == '셔츠') {
    $('.form-select').eq(1).removeClass('form-hide');
  }
</script>
```
실험해봤더니 select 찾아서 .value 붙이면 진짜로 선택한거 잘 출력됩니다.

그래서 위처럼 적어서 기능완성시켰습니다.

근데 작동안하는데요  

#### script 안에 대충 적은 코드는 페이지 로드시 1회 실행됨




자주 중요하게 말하는 내용입니다 잘 명심하십시오.

지금 "유저가 셔츠선택하면 form-hide 제거해주세요~" 라고 코드짰는데

이 코드는 script 안에 적었기 때문에 그냥 페이지 로드시 1회 실행되고 다시는 실행되지 않습니다.

그래서 저 코드를 select 조작할 때 마다 실행한다면 의도대로 잘 동작하지 않을까요

아닙니까

```
<script>
  $('.form-select').eq(0).on('input', function(){

    var value = $('.form-select').eq(0).val();
    if (value == '셔츠') {
      $('.form-select').eq(1).removeClass('form-hide');
    }

  });
</script>
```

input이나 select 조작할 때 input 이벤트가 발생하기 때문에

그 이벤트리스너를 부착해봤습니다.

잘되는군요


(응용)

1. 심심하면 '모자'를 선택했을 때 select를 다시 숨기는 기능도 만들어봅시다.

2. 지금 비슷한 셀렉터들이 많은데 변수화하면 성능개선이 되겠군요

3. 이벤트리스너 안에서 e.currentTarget 아니면 this 이런거 써도 될듯요

----

### Select 2 : 자바스크립트로 html 생성하는 법


저번시간에 짠 코드는 확장성이 부족합니다.

셔츠사이즈를 95, 100 이라고 하드코딩해놓고 보여주기만 하기 때문입니다.

실제 쇼핑몰이라면 셔츠 사이즈가 매일매일 바뀔 것인데

이럴 경우 서버에서 보낸 데이터 갯수에 맞게 <option> 태그를 생성해줘야 좋을듯요

그래서 html을 생성하는 법을 알아봅시다.











html 생성하는 법 1



div 안에 p 태그를 생성하려면


```
<div id="test">

</div>

<script>
  var a = document.createElement('p');
  a.innerHTML = '안녕';
  document.querySelector('#test').appendChild(a);
</script>
```

이러면 생성됩니다. 개발자도구 까보면 div 안에 p태그가 생성되어있습니다.

- document.createElement() 쓰면 html 자료를 하나 생성해줍니다.

- 그걸 맘대로 조작한 다음 appendChild() 써서 아무데나 넣으면 html이 생성됩니다.


html 생성하는 법 2


```
<div id="test">

</div>

<script>
  var a = '<p>안녕</p>';
  document.querySelector('#test').insertAdjacentHTML('beforeend', a);
</script>
```
이래도 생성됩니다.

- 문자자료로 html을 만든 다음

- insertAdjacentHTML() 안에 넣으면 됩니다.

- 'beforeend' 이건 안쪽 맨 밑에 추가하라는 뜻입니다. 싫으면 맘대로 변경가능



1번 방법은 코드가 너무 길고 복잡하기 때문에 특별한 이유 없으면 2번 방법을 씁니다.

실은 1번이 더 빠르게 동작하는데 0.0000x초 차이임

```
<div id="test">

</div>

<script>
  var a = '<p>안녕</p>';
  $('#test').append(a);
</script>
```
이래도 됩니다.

append는 안쪽 맨 밑에 추가하라는 뜻입니다.







Q. 저는 안쪽에 추가하는게 아니라 아예 바꾸고 싶은데요

A. div찾아서
```
innerHTML = '<p></p>'
```
쓰셈

jQuery에선 .html() 입니다.

바지옵션 누르면 다른 사이즈가 나와야하는데


```
<form class="container my-5 form-group">
    <p>상품선택</p>
    <select class="form-select mt-2">
      <option>모자</option>
      <option>셔츠</option>
      <option>바지</option>
    </select>
    <select class="form-select mt-2 form-hide">
      <option>95</option>
      <option>100</option>
    </select>
</form>
```
첫 select 에 바지옵션을 추가해봅시다.

이거 누르면 28과 30 사이즈가 담긴 select가 떠야합니다.

코드 어떻게 짜야하죠?







당연히 html을 미리 만들어놨다가 보여줘도 되는데

실제 쇼핑몰의 경우 그렇게 만들어놓을 순 없습니다.

바지 사이즈가 매일 달라지면 어떻게 합니까 매일 아침 html 수정할 것임?

실제 서비스는 매번 서버에서 데이터를 받아와서 "데이터 갯수만큼 <option> 생성해주세요~" 라고 코드를 짜놓습니다.

그래서 우리도 이를 대비하기 위해 html을 미리 만들어놓지말고 자바스크립트로 html을 생성해봅시다.
```
<script>
  $('.form-select').eq(0).on('input', function(){

    var value = $('.form-select').eq(0).val();
    if (value == '셔츠') {
      $('.form-select').eq(1).removeClass('form-hide');
    }
    else if (value == '바지'){
      $('.form-select').eq(1).removeClass('form-hide');
      $('.form-select').eq(1).html('');
      var 템플릿 = `<option>28</option><option>30</option>`;
      $('.form-select').eq(1).append(템플릿)
    }

  });
</script>

```
그래서 유저가 바지를 선택하면

1. 일단 둘 째 select 보여주셈

2. 둘 째 select 안에 비워주셈

3. html 만들어서 둘 째 select 안에 append 해주셈

이라고 코드를 짰더니 진짜로 그렇게 해줍니다.

아니면 더 간단하게 할 수도 있을듯요

(응용)

- 바지 눌렀다가 다시 셔츠 누르면 뭔가 이상해지는 문제도 해결해보면 어떨까요.

셔츠눌렀을 때 둘 째 select 안에 있는 html도 조정해줘야겠군요.

----------


오늘은 서버에서 바지 사이즈 데이터 가져와서

그 갯수만큼 option을 생성해봅시다.

그래서 다음처럼 코드짜놓고 시작합시다.




```
<script>
  var pants = [28, 30, 32];
  $('.form-select').eq(0).on('input', function(){

    var value = $('.form-select').eq(0).val();
    if (value == '셔츠') {
      $('.form-select').eq(1).removeClass('form-hide');
    }
    else if (value == '바지'){
      $('.form-select').eq(1).removeClass('form-hide');
      $('.form-select').eq(1).html('');
      여기다 무슨 코드 짜야함
    }

  });
</script>
```
맨 위에 pants 라는 변수를 하나 만들고 서버에서 보낸데이터라고 가정해봅시다.

pants 데이터 갯수만큼 option을 생성하고싶으면 어떻게 해야할까요?

반복문 쓰면 될 것 같은데요
```
<script>
  var pants = [28, 30, 32];
  $('.form-select').eq(0).on('input', function(){

    var value = $('.form-select').eq(0).val();
    if (value == '셔츠') {
      $('.form-select').eq(1).removeClass('form-hide');
    }
    else if (value == '바지'){
      $('.form-select').eq(1).removeClass('form-hide');
      $('.form-select').eq(1).html('');
      for (let i = 0; i < pants.length; i++){
        <option>생성해주세요~
      }
    }

  });
</script>
```
▲ 반복문 쓰면 해결될듯요 pants.length 만큼 반복해달라고 하면 됩니다.

근데 이거보다 조금 더 쉬운 반복문을 알아봅시다.


forEach 반복문



array 자료 뒤에 붙일 수 있는 forEach() 라는 기본함수가 있습니다.

이것도 반복문임


```
var pants = [28, 30, 32];
pants.forEach(function(){
  console.log('안녕')
});
```
이렇게 쓰면 pants 안의 데이터 갯수만큼

forEach 콜백함수 안에 있는 코드가 실행됩니다.

3번 실행될듯요

그래서 array 자료 다룰 때 for 반복문 쓰기 귀찮으면 forEach 뒤에 붙여도 됩니다.

Q. 콜백함수 왜넣음?

A. 자바스크립트 forEach 만든 사람이 그렇게 쓰래요
```
var pants = [28, 30, 32];
pants.forEach(function(a, i){
  console.log(a)
});
```
콜백함수 안에 파라미터 2개까지 작명이 가능한데 (실은 3개까지인데 몰라도 됩니다)

첫 파라미터는 반복문 돌 때 마다 array 안에 있던 하나하나의 데이터가 되고

둘 째 파라미터는 반복문 돌 때 마다 0부터 1씩 증가하는 정수가 됩니다.

진짠지 확인하려면 a와 i 출력해보셈

그래서 편리해보이면 forEach 씁시다.










```
<script>
  var pants = [28, 30, 32];
  $('.form-select').eq(0).on('input', function(){

    var value = $('.form-select').eq(0).val();
    if (value == '셔츠') {
      $('.form-select').eq(1).removeClass('form-hide');
    }
    else if (value == '바지'){
      $('.form-select').eq(1).removeClass('form-hide');
      $('.form-select').eq(1).html('');
      pants.forEach(function(a){
        $('.form-select').eq(1).append(`<option>${a}</option>`)
      })
    }

  });
</script>

```
▲ 그래서 아까 코드도 이렇게 바꿔봤습니다.

이제 pants 라는 서버에서 보낸 데이터가 바뀔 때 마다

거기에 맞게 option이 생성되겠군요. 변화에 대응이 좋은 코드가 되었습니다.

심심하면

var shirts = [95, 100, 105] 이렇게 위에 코드 추가해놓은 다음

셔츠 선택시 이 데이터 갯수만큼 option을 생성해보는 것도 해봅시다.











object 자료 다룰 때 for in 반복문 가능



object 자료 갯수만큼 반복문을 돌리고 싶으면
```
var obj = { name : 'kim', age : 20 }

for (var key in obj){
  console.log('안녕')
}
```
for in 반복문 쓰면 됩니다.

그럼 콘솔창에 '안녕'이 2회 출력될듯요

그리고 for in 반복문 쓰면 object 자료 안에 있는 key와 value를 다 출력해볼 수도 있습니다.

지금 key라고 작명하는 부분은 반복문이 돌 때 마다 object자료 안에 있던 key값이 됩니다.
```
var obj = { name : 'kim', age : 20 }

for (var key in obj){
  console.log(key)
}

```

출력해보면 진짜로 name, age 잘 나옵니다.

key 말고 실제 자료인 value를 출력하고 싶으면

console.log(obj[key]) 이렇게 써보셈


그래서 반복문의 용도는 2개가 있는데



실은 코드 복사붙여넣기용으로 쓰는게 for 반복문이라 했는데

array나 object 자료 전부 꺼내서 쓰고 싶을 때도 반복문을 쓰면 유용합니다.

그래서

1. 코드복붙하고싶으면

2. array, object 자료 다 꺼내고 싶을 때

반복문 사용하면 유용합니다.











arrow function 문법



함수 만드는 다른 문법이 있습니다. 특히 콜백함수만들 때 자주 쓰는 방법인데


```
var pants = [28, 30, 32];
pants.forEach(function(a){
  console.log(a)
});

pants.forEach((a) => {
  console.log(a)
});
```
function 키워드 대신 => 화살표를 ( ) 우측에 부착해도 똑같이 함수만들 수 있습니다.

저걸 arrow function 이라고 합니다.








```
pants.forEach( a => {
  console.log(this)
});
```
arrow function은 파라미터가 하나면 () 소괄호 생략해도 봐줍니다.

함수 중괄호 안에 return 한 줄 밖에 없으면 { } 중괄호와 return 동시에 생략해도 봐줍니다.

그래서 간결하니 콜백함수에 자주 사용하는 사람들이 있습니다.

여러분도 쓰고싶으면 쓰셈








```
let 함수 = function(){ console.log('안녕') }
let 함수 = () => { console.log('안녕') }
```
참고로 함수 이렇게 만들어쓰는 사람도 있습니다.

이럴 때도 arrow function이 가끔 보입니다.









그냥 함수와 arrow function의 기능차이는 하나가 있는데

함수 안에서 this를 써야할 경우

- 그냥 함수는 함수 안에서 this를 알맞게 재정의해줍니다.

- arrow function은 함수 안에서 this를 재정의해주지 않고 바깥에 있던 this를 그대로 씁니다.

그래서 이벤트리스너 콜백함수안에서 this를 써야하면 arrow function 쓰면 의도와 다르게 동작할 수도 있습니다.

그런데선 쓰지마십시오


--------


### Array 자료형, for 반복문 실력향상 과제


Q. Array에서 철수라는 자료를 찾고 싶습니다. (검색 알고리즘)



출석부에 4명의 학생 이름이 들어가있습니다.

마음같아선 100개의 이름을 여기에 넣고 싶었지만 4개만 넣었습니다.

이 출석부라는 Array에서 내가 원하는 이름이 있는지 없는지 알려주는 함수를 하나 만들고 싶어졌습니다.

함수 안에 구멍(파라미터)로 이름을 집어넣으면 그 이름이 출석부에 있는지 없는지 콘솔창에 알려주어야합니다.



어떻게 만들면 될까요?

(제한조건) 어디서 찾아온 find, indexOf 이런 함수들 사용 금지




```
var 출석부 = ['흥민', '영희', '철수', '재석'];

function 이름찾기(){
  // 여기에 어떤 코드가 들어가야할까요?
}

이름찾기('철수');
```

실행결과 예시 :

이름찾기('철수'); 라고 쓰면 콘솔창에 '있어요'라는 글자가 떠야합니다.

이름찾기('명수'); 라고 쓰면 콘솔창에 아무 글자도 뜨지 않아야합니다.

빨리 이름찾기라는 함수를 만들어봅시다.

5시간동안 코드 한줄 못적었을 때 펼쳐볼 힌트


자료가 4개 저장된 Array에서 내가 원하는 자료를 찾고 싶으면

그냥 순진하게 "야 자바스크립트, 출석부라는 Array 안에 '철수'가 있는지 봐줘!"

AI한테 명령내리듯 하면 되겠습니까. 얘는 빅스비가 아니기 때문에 전혀 못알아듣습니다.



직접 Array안에 있는 자료0, 자료1, 자료2, 자료3을 꺼내서 각각 '철수'와 비교해보라고 명령하셔야합니다.

"자료0이 구멍에 들어온 값하고 같냐?"

"그게 아니면 자료1이 구멍에 들어온 값하고 같냐?"

"그게 아니면 자료2가 구멍에 들어온 값하고 같냐?"

...

이렇게 물어봐야합니다.

빨리 코드 짜보십시오.


###### 3일 고민한 후 펼쳐볼 답안


(답안과 내 코드가 스타일이 달라도 실행결과만 잘 나오면 장땡입니다)

간단한 검색 알고리즘인데 .. 이번 문제의 목표는 이름찾기()라는 함수를 디자인하는 것입니다.

그 함수의 기능은...

1. 이름찾기()라는 함수에 특정 이름을 구멍(파라미터)로 집어넣었을 경우

2. 그 이름이 데이터라는 Array에 있는지 알려주는 기능을 하는 함수겠죠?

이걸 그대로 자바스크립트로 번역만 하면 될거같은데요?


```
var 출석부 = ['흥민', '영희', '철수', '재석'];

function 이름찾기( 구멍 ){
  구멍에 입력한 값이 출석부 Array에 있으면.. console.log('있어요')
}

이름찾기('철수');
```


그런데 구멍에 입력한 값이 Array에 있는지 없는지 판단은 어떻게하죠?

구글에 검색하면 친절하게 JavaScript 내장함수를 쓰세요~ 라고 알려줍니다.

.find() 아니면 .indexOf() 이런 것들을 쓰면 Array 내에 있는 문자들을 쉽게 찾을 수 있을텐데 이건 위에서 금지했으니

다른 방법으로 한번 찾아보도록 합시다.



자료가 4개 저장된 Array에서 내가 원하는 자료를 찾고 싶으면

그냥 순진하게 "야 자바스크립트, 출석부라는 Array 안에 '철수'가 있는지 봐줘!"

AI한테 명령내리듯 하면 되겠습니까. 얘는 빅스비가 아니기 때문에 전혀 못알아듣습니다.



직접 Array안에 있는 자료0, 자료1, 자료2, 자료3을 꺼내서 각각 물어봐야합니다.

"자료0이 구멍에 들어온 값하고 같냐?"

"그게 아니면 자료1이 구멍에 들어온 값하고 같냐?"

"그게 아니면 자료2가 구멍에 들어온 값하고 같냐?"

...

이렇게 물어봐야합니다.

빨리 코드 짜보십시오.








```
var 출석부 = ['흥민', '영희', '철수', '재석'];

function 이름찾기( 구멍 ){
  if ( 구멍 == 출석부[0]) {
    console.log('있어요')
  } else if ( 구멍 == 출석부[1] ){
    console.log('있어요')
  }
}

이름찾기('철수');
```

if문이 최고입니다.

야 구멍이랑 출석부안에 있는 0번째 자료랑 같냐?

야 구멍이랑 출석부안에 있는 1번째 자료량 같냐?

...

계속 3번째 자료까지 물어보시면 됩니다.

그런데 if문이 비슷한게 여러개 있으면 앞서 배운 반복문 등으로 축약도 가능합니다.

if문을 반복문으로 축약해버리면






```
var 출석부 = ['흥민', '영희', '철수', '재석'];

function 이름찾기( 구멍 ){
  for (var i = 0; i < 4; i++) {
    if ( 구멍 == 출석부[i]) {
      console.log('있어요')
    }
  }
}

이름찾기('철수');
```

if문이 최고입니다.



그런데 이 경우, 철수가 Array 내에 2개가 있을 경우 문제가 발생할 수도 있겠죠?

'있어요'가 콘솔창에 두번이나 출력된다거나 그럴 수 있겠습니다.

그래서 한번 발견하면 함수를 아예 끝내버리는 코드도 추가할 수 있겠습니다.

console.log('있어요') 밑에 return 이라는 단어 하나만 추가하시면 됩니다.

함수 내에서 return이라는 글자를 발견하면 바로 함수가 끝나니까요.

----

Q. 갑자기 구구단을 콘솔창에 출력하고 싶습니다.



초등학생인 철수는 구구단을 외우기 넘나 힘든 관계로

자바스크립트를 이용해 콘솔창에 2단부터 9단까지 출력해주는 코드를 짜기로 합니다.

2 x 2 = 4 뭐 이런식으로 출력되게하면 예쁘겠지만 귀찮은 관계로

4라는 곱셈 결과만 출력해주기로 합니다.



콘솔창 출력결과 :

2
4
6
8
10
...

3
6
9
12
15
...

이렇게 차례로 2단, 3단... 그리고 9단의 마지막 81 까지... 결과만 출력되게 만들고 싶습니다.  

어떻게 자바스크립트 코드를 짜면 될까요?

6시간 고민해도 코드한줄 못쳤다면 펼쳐볼 힌트


코드를 얼마나 어렵게 짜려고 열심히 짱구를 굴리고 계십니까.

콘솔창에 숫자 출력하는건 console.log(2) 뭐 이렇게 쓰면 되겠죠?

그럼 2단만 먼저 출력해봅니다.



console.log(2)

console.log(4)

console.log(6)

...

뭐 어려운 반복문 if문 Array그런거 쓰려고 하셨습니까.

그냥 위의 코드처럼 하드코딩하면 되죠뭐

그런데 코드가 긴게 싫다면 반복문 같은걸로 여러분의 코드를 축약할 수도 있겠죠?  





암튼 코드를 줄이려면 반복문을 한번써보시면 되는데

한번에 2단부터 9단까지 출력하려하면 넘 어려우니

일단 2단 하나까지만 반복문으로 구현해보십시오.

그 다음 3단, 그 다음4단 차례로 만들어보시면 답이 쉽게 나옵니다.

---


###### 최소 3일 고민해본 후 펼쳐볼 답안

이거 프로그래밍 문법책에 꼭 나오는 예제입니다.

그런데 초보의 경우엔 푸는 법도 모르고 그렇다고 책의 답안을 봐도 전혀 이해가 되지 않습니다. (저도 그랬음)

왜냐면... 남의 코드 보고 해석하는건 정말 정말 어려운 일입니다.

답안 보면서 해석하려하고.. 그렇게 프로그래밍을 학습하시면 포기가 더 빠르기 때문에







일단 팁을 드리자면 이렇게 어려운 문제를 맞닥뜨리면 쉬운 것 부터 차근차근 해결해나가시면 됩니다.

구현할게 많으면 일단 가장 쉬워보이는 것 부터 구현해봅니다.

일단 2단부터 구현해봅니다.

2단 구현하는건 누구나 할 수 있습니다.
```
console.log(2)

console.log(4)

console.log(6)
...
```
이걸 누가 못합니까.

그런데 코드가 비슷한게 반복이 되니 반복문 안에 담으면 참 좋을 것 같군요.

반복문은 언제나 선택일 뿐 필수가 아닙니다. 그냥 코드 줄이는 용도죠 뭐






```
for (var i = 0; i < 9; i++) {
  console.log(2 * i)
}
```
요거에 담으면 어떻게되게요

i가 0부터 8까지.... 반복문이 총 9번 돌게 되는데,

돌때마다 console.log(2 * i) 를 출력해줍니다.

그럼 콘솔창에 0, 2, 4, 6 ... 16이 출력이 되겠네요!

구구단은 0부터 시작하진 않기 때문에 for 반복문 내부의 인자를 조금 조정해주시면




```
for (var i = 1; i < 10; i++) {
  console.log(2 * i)
}
```
이렇게 하면 2부터 18까지 잘 출력이 됩니다. 암튼 반복문으로 이렇게 축약을 해봤다고합니다.

2단은 방금 해결했으니 3단은 어떻게 출력할까요?

(위의 코드랑 매우 유사하지않을까요?)










```
for (var i = 1; i < 10; i++) {
  console.log(2 * i)
}
for (var i = 1; i < 10; i++) {
  console.log(3 * i)
}
```
차례로 2단 출력하는 코드, 3단 출력하는 코드입니다.

그럼 4단은 어떻게 출력합니까.

똑같겠죠?

이렇게 계속 하시면 9단까지의 결과가 완성됩니다.





그런데 for이라는 저 3줄의 코드를 9번인가 8번인가 계속 쓰는게 너무 복잡해보이면 이것도 또 for 반복문으로 축약할 수 있습니다.


```
for (var i = 1; i < 10; i++) {
  console.log(2 * i)
}
for (var i = 1; i < 10; i++) {
  console.log(3 * i)
}
for (var i = 1; i < 10; i++) {
  console.log(4 * i)
}

//반복문화
for (var i = 0; i < 10; i++) {
  for (var i = 1; i < 10; i++) {
    console.log(????? * i)
  }
}
```
위의 반복되는 코드를  for반복문에 담아본 코드입니다. (5줄이 되네염)

그런데 반복문을 이렇게 두개 중첩해서 쓰실 때 i라는 값이 중복이 될 수 있으니 이렇게 쓰는게 옳습니다.




```
//반복문화
for (var z = 0; z < 10; z++) {
  for (var i = 1; i < 10; i++) {
    console.log(3 * i)
  }
}
```
하나의 반복문 내의 변수를 z라고 바꿨습니다. 그래야 i값이 겹치지 않을 것 같습니다.

하지만 이제 이 z라는 반복문이 몇번 돌아야합니까.. 9번이죠?

정확히 말하면 2부터 9까지 돌아야합니다. 그래서 반복문 내의 z 값을 좀 수정해주도록 합시다.






```
//반복문화
for (var z = 2; z < 10; z++) {
  for (var i = 1; i < 10; i++) {
    console.log(3 * i)
  }
}
```
z가 2부터 9까지 돌게 되겠네요.

암튼 그래서 이렇게 했는데, console.log() 부분을 보니 3 * i 라고 하드코딩이 되어있네염?

그러면 3단만 계속 출력되겠네요. 그러면 안되고 3 * i라는 값을 z * i라고 바꿔주면 어떻게 될까요?

안알랴줌

여기서부턴 여러분이 잘 하실 수 있을겁니다.







이해가 안되어도 반복문 안쓰면 그만입니다.

하지만 반복문을 쓰면 여러분이 손쉽게 9단까지가 아니라 99단 이렇게 큰 단위도 손쉽게 출력해볼 수 있겠죠? (z나 i라는 값만 수정하면 되니까요)

그래서 반복문은 확장성을 쉽게 부여할 수 있는 좋은 문법입니다.

----

Q. 하반기 실적을 채우기 위해 영업직원을 갈궈야합니다.

당신은 영업부서 부장님입니다.

부장님은 관리하는 영업직 직원들의 7~11월 판매 실적이 처참한 나머지

마지막 12월에는 남은 하반기 실적을 다 채우기 위해 직원들을 갈구기로 했습니다.

하지만 직원마다 목표실적이 다 다르고, 7~11월 판매 실적이 다 다르기 때문에... 고민끝에

(1) 7~11월 실적과 (2) 평균 월 목표 판매량을 입력하면 개인의 12월 목표 실적을 계산해주는 프로그램(함수)을 만들기로 합니다. 어떻게 만들면 될까요?

(여기서의 평균은 7~12월 6개월간의 평균으로 합시다)





조건 :

함수의 첫 파라미터 자리엔 7~11월의 (5개월 간의) 판매실적어레이 (뭐 대충 [12, 5, 3, 6, 25] 이런 array)

둘째 파라미터 자리엔 이 직원이 목표로하고 있는 평균 월별 판매량이 들어가야합니다. (대충 30 이런거)

그리고 연산 결과(마지막 12월에 채워야할 목표실적)를 콘솔창에 출력해주어야합니다.


```
function 목표량계산기(판매실적어레이, 평균월별판매량){
  //어떤 코드가 들어가야할까요?
}

```

이해 안될 때 한번 살펴보는 실행 예시:

철수라는 직원의 목표 판매 실적은 월 평균 35개 입니다.

그런데 7~11월의 실적은 [10, 20, 30, 40, 50] 이라고 합니다.
```
목표량계산기( [10, 20, 30, 40, 50] , 35 )
```
그래서 이렇게 목표량계산기안에 집어넣었을 경우

"12월엔 60개를 팔아야합니다" 라는 말이 콘솔창에 출력되어야합니다.

(12월에 60개를 팔아야 7~12월 평균 월별 판매량이 60이 되니까요)







흥민이라는 직원의 목표 판매 실적은 월 평균 10개 입니다.

그런데 7~11월의 실적은 [11, 6, 2, 3, 5] 입니다.
```
목표량계산기( [11, 6, 2, 3, 5] , 10 )
```
그러니 이렇게 목표량계산기안에 집어넣었을 경우

"12월엔 33개를 팔아야합니다" 라는 말이 콘솔창에 출력되어야합니다.

(12월에 33개를 팔아야 7~12월 평균 월별 판매량이 10이 되니까요)

---


6시간이 지나도 코드 한줄 못짰을 경우 펼쳐볼 힌트


여러분이 만들어야할 함수는 목표량계산기입니다.

여기엔 두개의 파라미터가 들어가야 하고,

파라미터에 따라서 각각 다른 값을 콘솔창에 출력해주어야합니다.



어려우면 일단 한글로 설명하고 자바스크립트로 옮기라니깐여
```
function 목표량계산기(판매실적어레이, 평균월별판매량){
  (5개월 실적의 합 + 12월 실적)의 평균 == 평균월별판매량이어야 하는데.. 이 때의 12월 실적은?
  console.log(12월 실적)
}
```
이거 아닙니까.

초6때 배우는 산술평균 + 중1 때 배우는 1차방정식이라는 어려운 개념을 사용하는 문제였습니다.

위 한글을 열심히 자바스크립트 코드로 옮겨오시면 되겠습니다.


###### 3일 열심히 고민해본 후 펼쳐볼 답안

한글을 열심히 작성해본다면
```
function 목표량계산기(판매실적어레이, 평균월별판매량){
  (5개월 실적의 합 + 12월 실적)의 평균 == 평균월별판매량이어야 하는데..
  이 때의 12월 실적은?
}
```
이렇게 되는데

좀 보기쉽게 초등학교 6학년 수학식으로 표현하자면



(5개월 실적 + 12월 실적) / 6 == 평균월별판매량 인데, 그럼 12월 실적은 얼마가 되어야할까요? 라는 문제입니다.

수식을 보기쉽게 이리저리 조정해보면

6 * 평균월별판매량 - 5개월 실적 == 12월 실적입니다.

우리가 구해야할 12월 실적을 저런 수식으로 표현할 수 있겟네요.

그럼 이걸 자바스크립트로 그대로 번역해보도록 합시다. 변수 쓰고 수식넣고 그렇게 하면 될듯요.






```
function 목표량계산기(판매실적어레이, 평균월별판매량){
  var 실적5개월 = ????;
  var 실적12월 =  6 * 평균월별판매량 - 실적5개월;
  console.log(실적12월)
}
```
이렇게 되는데 저기 ???? 부분만 채워주면 되겠네요.

???? 부분은

판매실적어레이라는 Array의 내부 자료들을 전부 더한 값입니다.

예를 들면 [1, 2, 3, 4, 5] 뭐 이런 Array 내의 값을 전부 더한 값이라는 소리죠.

그럼 Array 내의 값을 전부 더하려면 어떻게 해야할까요?







판매실적어레이[0] + 판매실적어레이[1] + 판매실적어레이[2] ...

이렇게 쭉 더해주면 되겠죠뭐

그런데 이걸 있어보이게 반복문을 쓰실 수도 있습니다.




```
function 목표량계산기(판매실적어레이, 평균월별판매량){
  var 실적5개월 = 0;

  for (var i = 0; i < 5; i++){
    실적5개월 = 실적5개월 + 판매실적어레이[i];
  }

  var 실적12월 =  6 * 평균월별판매량 - 실적5개월;
  console.log(실적12월)
}
```
저렇게 3줄을 할애하여 for 반복문을 쓰시면 됩니다.

혹은 더 있어보이게 쓰려면 forEach 반복문도 가능합니다.





실적5개월 = 실적5개월 + 판매실적어레이[i];

이 부분은 예전에 다뤄본 문법이죠? 실적5개월에 실적5개월 + 판매실적어레이[i] 을 대입해주세요~ 라는 뜻입니다.

그러면 반복문이 돌면서 실적5개월에 계속 판매실적어레이[0]을 더하고 [1]을 더하고 [2]를 더하고 ....

계속 더해줍니다.







그럼 위의 예제를 대입해보면 그대로 똑같이 출력되나요?

저는 잘 됩니다 그럼 이만.

-----


### 상품정렬 기능 만들기 (sort, map, filter)


오늘의 5시간 분량 숙제 :

1. 가나다순 정렬버튼 & 기능 만들어오셈

2. 5만원이하 가격필터 버튼 & 기능 만들어오셈

숙제 힌트
1번은 알아서 하시고

2번은 약간 어려울 수 있는데 버튼누르면 5만원 이하 상품만 보여야됩니다.

그럼 나머지 2개의 상품은 안보여야되는데 이게 살짝 복잡해질 수 있습니다.



그래서 그냥 애초에

- 상품 HTML을 짜놓지말고 다 비워두고

- 5만원이하 버튼을 누르면 products라는 array에서 5만원 이하만 필터함

- products라는 array 갯수만큼 상품 HTML을 동적으로 생성해주셈~

이런 식으로 코드짜는건 어떨까요.



상품목록 HTML을 첨부터 싸그리 비워놓고 버튼 누를 때마다 HTML 생성을 직접 하는겁니다.

그럼 맨 사이트 처음 방문시에 상품이 안뜨겠지만 그건 알아서 하십시오.

아무튼 이건 저의 권장사항일 뿐이지 구현방법은 수백가지입니다


저번시간에 해오랬던 데이터바인딩은 이렇게함


일단 HTML에는
```
<h5 class="title">Card title</h5>
<p class="price">가격 : 70000</p>
```
이런 식으로 class 명들을 부여했습니다.




```
$('.title').eq(0).html(products[0].title);
$('.price').eq(0).html('가격 : ' + products[0].price);
$('.title').eq(1).html(products[1].title);
$('.price').eq(1).html('가격 : ' + products[1].price);
$('.title').eq(2).html(products[2].title);
$('.price').eq(2).html('가격 : ' + products[2].price);
```

그리고 상품3개 전부 가격, 제목 데이터바인딩했습니다 끝

반복문 쓰고싶은 충동이 들지 않습니까 그렇다면 쓰면 됩니다.

Array자료를 정렬하고 싶으면 sort()를 붙입니다


```
var 어레이 = [7,3,5,2,40];
```
예를 들어서 이런 자료가 있는데 이걸 숫자순이나 문자순으로 정렬하고 싶은겁니다.

그럴 땐 array에만 붙일 수 있는 기본함수인 sort()를 쓰시면 됩니다.




```
var 어레이 = [7,3,5,2,40];
어레이.sort();
```
이렇게 sort()만 붙이면 문자순으로 정렬됩니다. 콘솔창에서 출력한번 해보십시오.

[2,3,40,5,7] 순으로 정렬되어있을겁니다.

```
var 어레이 = [7,3,5,2,40];
어레이.sort(function(a,b){
  return a - b
});
```
이렇게 쓰시면 숫자오름차순 정렬이 가능합니다.

2,3,5,7,40 순으로 정렬될걸요?



Q. 왜 저따구로 복잡하게 써야하나요? 이해가 안감

A. 이해가 아니라 암기의 영역입니다. 자바스크립트 만든 사람이 저렇게 쓰라고 만들어놓은 것이니 외워서 씁시다.





하지만 sort 함수의 동작 원리를 잠깐 설명해드리자면

① sort 함수의 파라미터두개는 array 자료 안에 있던 데이터들을 의미합니다.

a, b 이건 그니까 7, 3 이거랑 똑같다고 보시면 됩니다.



② sort 함수는 양수(+)를 return 하면 a를 오른쪽 b를 왼쪽으로 보냄

음수(-)를 return 하면 a를 왼쪽 b를 오른쪽으로 보냄

이렇게 동작하도록 되어있습니다.



③ sort 함수는 a, b자리에 7과 3을 대입해보고 끝나는게 아니라

7, 5

7, 2 등

array 안에 있는 모든 자료들을 다 알아서 적용해봅니다.

```
var 어레이 = [7,3,5,2,40];
어레이.sort(function(a,b){
  return a - b
});
```

그래서 sort함수 안에 return a - b 이렇게 쓰시면 숫자오름차순 정렬이 가능한 것입니다.

a,b가 7,3 이라고 가정하면 7 - 3인 4를 return 하지않습니까.

양수를 return하는 경우 7은 오른쪽 3은 왼쪽으로 보냅니다.  

그냥 논리력 테스트입니다.







Q. 그럼 3 2 1 순으로 숫자내림차순 정렬은 어떻게 코드를 짜면 될까요?

논리력 테스트시간이니 알아서 해보도록 합시다.



Q. 문자 역순정렬은 어떻게 코드를 짜면 될까요?

array 안에 ['b', 'a', 'c'] 문자가 들어있다고 칩시다. 그걸 c b a 순으로 정렬하려면 어떻게합니까.

이것도 논리력 테스트라 알아서 합시다. 힌트는 문자자료는 부등호로 비교가 가능합니다.

'a' < 'b' 이건 true가 그 자리에 남고

'a' > 'b' 이건 false입니다.

그럼 products라는 array를 가격순 정렬하려면



![20220322_032017](/assets/20220322_032017.png)

products라는 array를 가격순으로 정렬하려면 어떻게 할까요?

지금은 5만원짜리가 중간에 껴있는데 이걸 맨 앞으로 옮기자는겁니다.

역시 이것도 array자료기 때문에 sort()를 사용하면 됩니다.
```
<button id="sortPrice">가격순정렬</button>
```
일단 버튼하나 만들고 이거 누르면 정렬해봅시다.

```

$('#sortPrice').click(function(){
  products.sort(function(a,b){
    return a - b
  });
})
```

이렇게 쓰면 가격순 정렬된다면서요 안되는데요? 사기꾼인듯

그것은 sort() 함수 동작원리를 다시 한번 생각해보면 됩니다.



1. a와 b는 products안에 있던 자료들을 의미합니다.

2. sort함수는 +를 return하면 b를 왼쪽으로 보냅니다.

원리가 이렇기 때문에 저렇게 코드짜면 정렬이 안되는 것입니다.

a와 b는 지금 {} 이런 자료기 때문에 그렇습니다. {} - {} 해봤자 양수가 나옵니까 음수가 나옵니까 아무것도 안나옵니다.

그래서 {} 이것끼리 빼보지말고 {} 안에 있던 가격 이런걸 빼보십시오.



  알아서합시다

```
  $('#sortPrice').click(function(){
    products.sort(function(a,b){
      return a.price - b.price
    });
  })
```
이러면 버튼누르면 products라는 array가 정렬되어있습니다.

콘솔창에 출력해보면 정말 5만원짜리 상품이 맨 앞에 있군요


Q. products는 정렬 잘 되는데 왜 HTML은 안바뀜?

A. 지능이 없는 컴퓨터는 자동으로 뭐 해주지 않습니다. 컴퓨터에게 뭔가 기대하지 마시고 HTML도 바꾸라고 코드를 직접 짜십시오.



그니까 1. 버튼을 누르면 2. products라는 array 정렬해주시고 3. products에 있던 첫째 상품의 제목을 HTML에 데이터바인딩해주세요~ 이렇게 코드를 짜면 기능구현 끝이겠군요.



Array 자료에서 원하는 것만 거를 때 filter 함수를 씁니다



예를 들어서 array안에 있는 것들 중 4 미만인 숫자만 남기고 싶습니까.

그러면 filter() 함수가 제격입니다.


```
var 어레이 = [7,3,5,2,40];
var 뉴어레이 = 어레이.filter(function(a){
  return a < 4
})
```

뉴어레이를 출력해보면 진짜 [2,3] 이것만 남아있습니다.

filter 함수 동작원리는

① 함수 안의 a라는 파라미터는 array 자료안에 있던 하나하나의 데이터를 의미합니다.

② return 오른쪽에 조건식을 적어주시면 조건식이 참인 경우에만 그 자료를 퉤 뱉습니다.

③ 그리고 filter함수의 결과는 저렇게 새로운 변수에 담아서 쓰라고 되어있습니다.



그래서 위의 코드는 [2,3]만 남는 것입니다.

filter() 함수는 비교적 신문법이라서 sort()와 다르게 원본을 수정하지 않아서 저렇게 변수에 담아쓰는 것만 좀 주의하면 됩니다.



Array 자료들에 똑같은 작업을 시킬 때 map을 씁니다



예를 들어서 array안에 있는 것에 전부 2를 곱해주고 싶습니까

그러면 map() 함수가 제격입니다. 수학에서의 mapping 이런거에서 따온 이름인데 몰라도 됩니다.


```
var 어레이 = [7,3,5,2,40];
var 뉴어레이 = 어레이.map(function(a){
  return a * 2
})
```
뉴어레이를 출력해보면 진짜 [14,6,10,4,80] 이 출력됩니다.



map 함수 동작원리는

① 함수 안의 a라는 파라미터는 array 자료안에 있던 하나하나의 데이터를 의미합니다.

② return 오른쪽에 array 자료에 적용할 수식을 적으면 됩니다.

③ 그리고 map 함수의 결과는 저렇게 새로운 변수에 담아서 쓰라고 되어있습니다.

그려면 수식이 적용된 결과를 퉤 뱉어줍니다.



보통 기존 array를 조작한 새로운 array를 만들 때 사용합니다.









강의 듣는게 중요한게 아니라 오늘의 숙제나 해보도록 합시다.


-----

### 상품정렬 기능 만들기 숙제풀이 & 응용문제


응용0. '가나다'순 정렬말고 '다나가'순 정렬은?

응용1. 사이트 처음 접속시 상품3개가 안보인다면 상품3개가 잘 보이게 어떻게함?

응용2. 필터버튼을 만드는게 아니라 <input>을 이용하려면?

응용3. 원래대로 버튼을 만들고 싶으면?



이런 것들도 심심할 때 해보면 좋은 연습이 되지않을까요.









Q1. 버튼누르면 가나다순 정렬?

저는 이렇게 했는데 이게 중요합니까


직접 좌절을 맛보는게 중요합니다.

버튼을 누르면 products.sort() 를 써서 products를 문자정렬하라고 했고

그 다음에 데이터바인딩을 해서 HTML을 바꿔줬습니다. 끝




```
$('#abc').click(function(){
    products.sort(function(a,b){
      if (a.title < b.title == true ) {
        return -1
      } else {
        return 1
      }
    })

    $('.title').eq(0).html(products[0].title);
    $('.price').eq(0).html('가격 : ' + products[0].price);
    $('.title').eq(1).html(products[1].title);
    $('.price').eq(1).html('가격 : ' + products[1].price);
    $('.title').eq(2).html(products[2].title);
    $('.price').eq(2).html('가격 : ' + products[2].price);
});

```


문자정렬하는 부분을 설명하자면

자바스크립트에선 문자 두개를 부등호로 비교가 가능합니다.

'ㄱ' < 'ㄴ' 이건 true라고 판정해줍니다.

그렇기 때문에 a상품제목 < b상품제목 이게 true면 - 를 return 해주세요~라고 코드를 짰을 뿐입니다.

- 를 return하면 b를 오른쪽으로 보내기 때문입니다.  





오늘의 교훈은 저거 데이터바인딩하는 코드가 넘나 길고 다른 곳에서 많이 사용하면

함수로 축약하거나 그러는게 어떨까요.

----


Q2. 버튼 누르면 6만원 이하 상품만?

심심해서 5만원 말고 6만원 이하로 바꿔서 해봤습니다


버튼 누르면 products라는 것에서 6만원 이하 상품만 남기도록 코드를 짰습니다.

출력해보면 [{}, {}] 이렇게 두개 상품만 남게요


```
$('#filter').click(function(){
    var 새상품 = products.filter(function(a){
      return a.price <= 60000
    });
    console.log(새상품);
});
```

-#filter라는 버튼 누르면 필터를 해주고, 새상품이라는걸 출력해보면 상품2개만 잘 남아있습니다.

그럼 이제 뭐해야합니까 HTML도 이거에 맞게 바꾸라고 명령주면 끝나지 않겠습니까.

근데 기존에 보이고 있던 HTML을 지우거나 하려면

- div중에 여기 목록에없는 div를 찾아서 display : none을 줘야하고

- 그러려면 div에다가 미리 data-id 이런걸 심어놓던가 하면 편할텐데

이런 식을 코드를 짜야하는데 이러면 또 어렵기 때문에

그냥 전에 배웠던 "HTML 동적으로 생성하기" 스킬을 써봅시다.







"products라는 자료에 있는 데이터 갯수만큼 상품 HTML을 생성해주세요~" 라고 코드를 짤 것입니다.

HTML 생성하는건 저번시간에 따르면 append() 이런거 쓰면 편리하다고 했는데


```
var template = `<div>안녕</div>`;
 $('원하는위치').append(template)
 ```
이러면 원하는 곳에 <div>박스같은걸 내부에 추가해줄 수 있다고 했습니다.

이걸 씁시다. 몇번써야합니까 2번써야하죠? 상품 2개니까요.



그래서 손수 2번 복붙하면 되는데

손수 2번 복붙하는 것 보다는 반복문이 낫겠죠?

왜냐면 필터하고난 상품이 2개가 아니라 3개면 어쩔겁니까 그때마다 코드를 수정할 수는 없잖아요.

확장성을 위해선 반복문이 좋을 듯요






```
$('#filter').click(function(){
    var 새상품 = products.filter(function(a){
      return a.price <= 60000
    });
    console.log(새상품);

    새상품.forEach(function(a){
      var template = `<div>이거 상품카드임</div>`;
      $('.card-group').append(template)
    })
});
```
그래서 전 forEach 반복문을 사용했습니다.

그러면 새상품이라는 array안의 자료 갯수만큼 내부 코드를 반복해줍니다. 끝

이제 div안에 상품스럽게 알아서 HTML 꾸미시면 되겠습니다.





중간중간에 상품명, 상품가격 이런거 넣고싶으면
```
var template = `<div>${a.title}</div>`;
```
이렇게 쓰면 되겠네요

하지만 강의 듣다보면 뇌를 안쓰고 생각없이 따라치게 됩니다.

a가 뭐게요?

안알랴줌







Q. 어 그럼 버튼 누르면 기존 상품들은 가만히 있고 2개가 더 추가되어서 총 5개가 보이네요?

A. 그럼 기본으로 보이고 있던 HTML을 주석처리 해놓으면 되겠군요







Q. 어 그럼 사이트 맨 처음에 들어가면 기존 상품들이 아예 안보이는데요?

A. 그럼 사이트 방문시 상품 3개의 HTML을 동적으로 만들어주라고 코드 짜면 되겠군요

---

### DOM이라는 용어의 개념과 이벤트리스너 ready, load


은 개념설명 시간이기 때문에 텍스트로 진행하겠습니다.







1. DOM이라는 개념을 알아보자

자바스크립트 책들 보시면 자꾸 DOM DOM DOM 돔돔돔 거리는데

DOM = Document Object Model 이라는 용어입니다.

이게 뭔지 알아보도록 합시다.









자바스크립트는 HTML 조작에 특화된 언어라고 설명드렸습니다.

그런데 자바스크립트가 어떻게 HTML을 직접 조작할 수 있는지 생각해보셨는지요.

자바스크립트 문법엔
```
<p></p>
```


이런걸 해석하는 문법이 없습니다.
```
<script>

  <p></p>??

</script>
```

script 태그 내에 p 이런 태그 다짜고짜 써보세요. 아마 에러날걸요?

그런데 어떻게 HTML 태그들을 알아보고 조작할 수 있는 것일까요?

HTML 조작을 하기 위해선... HTML을 자바스크립트가 해석할 수 있는 문법으로 일단 정리하는 작업이 필요합니다.

무엇으로 정리하면 좋을까요? 아마 Array 혹은 Object 자료형이 좋지 않을까요?

그래서 자바스크립트는 HTML을 쉽게 찾고 바꾸기 위해 Object와 비슷한 자료형에 담아서 사용합니다.

(이건 브라우저가 알아서 합니다)


예를 들어서
```
<div class="red-text">안녕하세요</div>
```
HTML파일에 이런 div가 하나 있다고 칩시다.

자바스크립트로 찾아 조작이 가능합니다.

document.querySelector(저 div).innerHTML = '바보' 이렇게 하면 조작 되겠죠 뭐

근데 자바스크립트로 이 div를 조작하기 위해서는 컴퓨터가 div를 미리 object 자료형으로 정리해놓는다는 소리입니다.

```
var document = {
  div태그 : {
    style : {color : 'red', width : '100%'}
    innerHTML : '안녕하세요'
  }
}
```

▲ 대충 이렇게 object 자료에 정리를 해놔야 저렇게 점찍어서 원하는 자료를 출력하고 조작하고 할 수 있지 않겠습니까.

(실제로 저렇다는건 아니고 느낌이요 느낌)

이걸 document object라고 부릅니다. 간지나게 + model이라고 붙여서 DOM이라고 합니다.

그냥 자바스크립트가 HTML에 대한 정보들 (id, class, name, style, innerHTML 등)을 Object 자료형으로 정리해서 사용하는구나만 아시면 됩니다.

----

##### 2. 브라우저는 HTML 문서를 읽을 때 DOM을 만듭니다.



브라우저는 HTML문서를 읽을 때 DOM을 생성해야합니다.

그래야 자바스크립트로 HTML을 조작할 수 있으니까요.

뭐 그렇구나 하고 넘어가시면 되겠습니다.

그런데 DOM 때문에 문제가 생기곤 합니다.

▼ DOM이 생성되기 전에 우리가 p태그 내용을  ~~ 로 바꿔라 라고 명령을 주면 어떻게 될까요?





(index.html 파일)
```
<script>
  document.getElementById('test').innerHTML = '안녕'
</script>

<p id="test">임시글자</p>
```

에러가납니다. id가 test인게 없다는 에러를 뿜습니다.

왜냐면

브라우저는 HTML을 위에서부터 한줄한줄 읽습니다.

그런데 script태그 안에서 자바스크립트로 id가 test인 요소를 찾고 바꾸려하니 에러가 납니다.

왜냐면 아직
```
<p id="test">
```
를 읽기 전이라 p태그에 대한 DOM이 아직 생성되지 않았으니까요.

이렇듯 자바스크립트는 DOM이 생성되어있어야 HTML을 변경할 수 있습니다.


----


###### 3. 위와같은 문제를 해결하려면?



jQuery에서는 ready 라는 이벤트리스너가 간혹 쓰입니다.

이 이벤트리스너는 "HTML을 다 읽어들였는지"를 알려주는 이벤트리스너입니다.

HTML을 다 읽고난 후에 자바스크립트를 실행하고 싶으시면 이걸 쓰시면 됩니다.

사용방법은 이렇습니다.
```
$(document).ready(function(){
  //$(document)에 있는 HTML을 다 읽었을 때 실행할 코드
});
```

▲ 이렇게 쓰시면 현재 페이지에 있는 HTML을 다 읽고 DOM을 만든 후에

내부 코드를 실행해줍니다.

참고로 $(document)는 현재 웹문서를 뜻합니다. (jQuery 문법)

쌩자바스크립트에선 document라고 쓰시면 됩니다.

그럼 아까 문제를 ready 이벤트 리스너로 해결할 수 있겠군요.


```
<script>
  $(document).ready(function(){
    document.getElementById('test').innerHTML = '안녕'
  });
</script>

<p id="test">임시글자</p>
```

▲ 이렇게 쓰면 자바스크립트가 위에 있음에도 불구하고 에러가 나지 않습니다.

그래서 예전 스타일 강의들 보시면 ready 이벤트리스너를 꼭 쓰라고 가르칩니다.

안정적이니까요.

하지만 자바스크립트를 <body>태그 끝나기 전에 전부 작성하면 위와 같은 버그 걱정은 안하셔도됩니다.

자바스크립트 위치를 내가 정할 수 없을 경우에만 유용한 방법이라고 보시면 되겠습니다.


--------

###### 4. load 이벤트리스너



배운 김에 이것도 배워보도록 합시다.

load 라는 이벤트리스너를 사용하시면 DOM 생성뿐만 아니라 이미지, CSS, JS파일이 로드가 됐는지도 전부 체크하실 수 있습니다.


```
$('img').on('load', function(){
  //이미지가 다 로드가 되었을 경우 실행할 코드
});
```
이런 식으로 쓰시면 되겠습니다.






```
$(document).on('load', function(){
  //이미지가 다 로드가 되었을 경우 실행할 코드
});
```

document에 붙이셔도 됩니다. document에 포함된 이미지, CSS파일 등 모든것이 로드가 되었는지 체크해줍니다.



앞선 .ready()는 DOM 생성만 체크하는 함수인데, 이것보다 약간 더 나아가서 모든 파일과 이미지의 로드상태를 체크한다고 보시면 되겠습니다.

이미지 등 로딩이 완료되면 뭔가 동작시켜주는 UI들을 만들 때 자주 쓰이는 이벤트리스너입니다.



참고로 $('').load(function(){}) 이렇게 쓰시면 안됩니다.

jQuery 3버전 이상에선 load() 함수는 다른 의미로 쓰입니다. (Ajax 용으로 쓰입니다)

----------

###### 5. ready 이벤트리스너의 쌩자바스크립트 버전



참고로 알아두면 좋을 쌩 자바스크립트 이벤트리스너입니다.
```
document.addEventListener('DOMContentLoaded', function() {
  //DOM생성이 완료되었을 때 실행할 코드
});
```
쌩 자바스크립트는 ready 대신 addEventListener에 'DOMContentLoaded' 라고 적어주시면 됩니다.

HTML5 이후부터 추가된 문법이기 때문에 IE9 이상에서만 작동합니다.

끝입니다.

-----------


### Ajax 요청하기 1 : 개념설명


(숙제) 버튼을 누르면 Ajax요청을 해서 받아온 데이터로 글자를 바꾸자

버튼과 h4태그를 하나씩 만든 후,

https://codingapple1.github.io/hello.txt 여기로 Ajax GET 요청을 해서 데이터를 받아온 뒤에

받아온 데이터로 h4 태그 내용을 바꿔치기해보세요.







예제용  임시 서버 URL :

https://codingapple1.github.io/hello.txt (여기로 GET요청을 하면 인사말이 딸려옵니다.)









#### Ajax란?



서버에 요청을 해서 데이터를 가져오거나 보내고싶을 때가 있습니다.

그런데 서버에 요청을 할 때 새로고침 없이 데이터를 주고받을 수 있게 도와주는게 바로 Ajax입니다.

Ajax를 이용하면 새로고침 없이 여러분이 아이디와 비번을 서버로 보낼 수도 있고

새로고침없이도 쇼핑몰 상품들을 하단에 더 불러올 수 있습니다.

근데 서버에 요청을 한다는 소리가 뭔지 모르겠죠?

서버란?



그냥 요청을 하면 데이터를 갖다주는 기계일 뿐입니다.

예를 들면 네이버 웹툰서버는 유저가 요청하면 네이버 웹툰 이미지를 갖다주는 기계일 뿐입니다.









요청이란?



서버에 뭐 요청을 한다고 설명했는데.. 서버에 요청을 하는 방법은 전통적으로 두가지가 있습니다.

1. GET 요청 : URL을 입력해서 서버가 주는 데이터를 받아올 수 있습니다.

- 보통 웹페이지를 읽거나 데이터를 받아올 때 많이 사용합니다.  

- URL에 여러가지 정보를 추가해서 서버로 원하는 데이터를 전송할 수도 있습니다.

- 우리가 브라우저 주소창에 naver.com 이렇게 때려박는게 바로 GET 요청 방법 중의 하나입니다.





2. POST 요청 : 원하는 데이터를 서버로 전송할 수 있습니다.

- 로그인하거나 블로그 글발행처럼 정보를 전송할 때 많이 사용합니다.

- GET요청처럼 URL에 정보를 추가하지않고 정보를 다른 곳에 숨겨서 전달합니다.



근데 GET, POST 요청시 보통 페이지가 새로고침이 되는게 일반적인데, Ajax를 쓰시면 새로고침 없이도 GET, POST 요청을 보낼 수 있습니다.











jQuery로 Ajax요청하기



Ajax요청을 하는 법은 쉽습니다. $.ajax() 라는 함수를 쓰고 안에 {} 오브젝트 형식으로 몇개만 셋팅해주시면 됩니다.


```
$.ajax({
    url : 'https://naver.com',
    type : 'GET'
});
```

{} 오브젝트 안에는 url, type 이 두개가 필수로 들어갑니다.

url 정보란엔 데이터 요청할 서버 URL,

type 정보란엔 요청의 종류를 적어주시면 됩니다.

그럼 위의 코드는 naver.com에다가 GET요청을 하는 코드입니다.

끝입니다.

------


서버에 인사말 요청하기



https://codingapple1.github.io/hello.txt (여기로 GET요청을 하면 인사말이 딸려옵니다.)

여기로 GET요청을 해보는 코드를 짜보십시오.
```
$.ajax({
    url : 'https://codingapple1.github.io/hello.txt',
    type : 'GET'
});
```

이렇게 하시면 되겠습니다.

혹은 확인해보고 싶으면 브라우저 주소창에 그대로 저 주소를 복붙해보시길 바랍니다.

왜냐면 브라우저 주소창은 GET 요청할 수 있는 공간이기 때문입니다


요청결과(데이터)를 출력해보기



Ajax요청을 하면 데이터를 받아온다고 했는데

데이터는 도대체 어딨는 것입니까? 라고 물어보신다면 대답해드리는게 인지상정


```
$.ajax({
    url : 'https://codingapple1.github.io/hello.txt',
    type : 'GET'
}).done(function(데이터){
  console.log(데이터);
});
```
ajax() 뒤에 .done() 함수를 붙인 뒤에 콜백함수를 하나 추가해줍니다.

그 다음에 콜백함수에 파라미터 아무거나 집어넣으신 후에 그걸 콘솔창에 출력해보시면

그것이 바로 받아온 데이터입니다.

(done함수는 그냥 복붙해서 쓰시면 됩니다.)

그럼 이제 done 함수 내에 아무렇게나 코드를 짜서 데이터를 이리저리 조작하고 숙제도 해보고 그러면 되겠죠?



--------------

### Ajax 요청하기 2 : 상품 더보기 기능 만들기


예제용  임시 서버 URL :

https://codingapple1.github.io/hello.txt (여기로 GET요청을 하면 인사말이 딸려옵니다.)

https://codingapple1.github.io/data.json (여기로 GET요청을 하면 상품데이터가 딸려옵니다.)







저번시간숙제) 버튼을 누르면 데이터를 받아와서 h4 태그에 집어넣으려면?



일단 버튼을 누르면 Ajax 요청을 하는 코드부터 짜보도록 합시다.

버튼을 클릭했을 때 ajax()함수를 실행하게 만들면 되겠죠?

해보셨습니까

```
$('어쩌구버튼').click(function(){
  $.ajax({
    url : 'https://codingapple1.github.io/hello.txt',
    type : 'GET'
  }).done(function(데이터){
    console.log(데이터);
  });
});
```

그 다음엔 받아온 데이터를 h4에 꽂아야합니다.

데이터는 어딨냐면... done 함수 내의 파라미터가 바로 데이터라고 했습니다.

그럼 그 파라미터를 h4에 집어넣으시면 되겠죠?


```
$('어쩌구버튼').click(function(){
  $.ajax({
    url : 'https://codingapple1.github.io/hello.txt',
    type : 'GET'
  }).done(function(데이터){
    $('h4태그').html(데이터)
  });
});
```
이렇게 하면 되겠네요.

이전에 다 배웠던 것들이라 설명은 스킵하겠습니다.


Ajax에 추가로 들어갈 수 있는 내용들이 많습니다.


```
$.ajax({
    url : 'https://codingapple1.github.io/hello.txt',
    type : 'GET',
    data : '어쩌구',
    dataType : '저쩌구'
});
```
중괄호 내에 여러가지 프로퍼티들을 설정해주면 조금 더 상세한 ajax 요청이 가능합니다.

어떤 것들이 있는지는 구글 찾으면 다 나오기 때문에 필요할 때 찾아쓰도록 합시다.


```
$.ajax({
    url : 'https://codingapple1.github.io/hello.txt',
    type : 'GET'
}).fail(function(){
  //요청이 실패했을 때 실행할 코드
}).always(function(){
  //실패하든 성공하든 항상 실행할 코드
})
```
.done 함수 말고도 뒤에 붙일 수 있는 함수는 fail, always가 있습니다.

용도는 위에 써있는 그대로입니다.

fail 함수는 파라미터를 3개 추가해서 쓸 수 있는데




```
$.ajax({
    url : 'https://이상한URL.com',
    type : 'GET'
}).fail(function( jqXHR, textStatus, errorThrown ){
  console.log(errorThrown)
})
```
textStatus, errorThrown을 출력해보면 Ajax 요청이 왜 실패했는지 이유를 알려줍니다.



상품 더보기 버튼을 만들어보자



버튼을 누르면 서버에 Ajax 요청을 해서 상품목록 데이터를 가져온 뒤에 HTML에 표시해보도록 합시다.

어떤 서버에 요청할거냐면..

https://codingapple1.github.io/data.json

여기에 요청할겁니다. 이걸 브라우저에 그대로 때려박아도 결과를 보실 수 있겠지만
```
{"brand" : "Hyundai", "model" : "Kona", "price" : 30000, "img" : "https://codingapple1.github.io/kona.jpg"}
```
요청에 성공하면 이런 자료가 나옵니다. 자동차파는 쇼핑몰의 데이터라고 생각하시면 되겠습니다.

버튼을 누르면 이 데이터를 Ajax로 요청한 뒤에 여러분 HTML에 박아넣어보도록 합시다.

HTML은 대충 이렇게 준비하시면 되겠습니다.




```
<div class="card">
    <img src="" class="card-img-top">
    <div class="card-body">
      <h5 class="card-title">임시 제목</h5>
      <p class="card-text">임시 가격</p>
      <a href="#" class="btn btn-primary">더 알아보기</a>
    </div>
  </div>

<button class="btn btn-danger">상품을 불러오는 버튼</button>
```
(▲ Bootstrap이 설치되어있어야 이쁘게 나옵니다)



빨리 하단에 Ajax 요청을 하는 코드를 짜보십시오.

잘 짜셨다면 버튼을 누르면 예쁜 자동차 사진, 제목, 가격이 HTML에 표기되어야합니다.

직접 해보셨습니까

```
$('.btn-danger').click(function(){
  $.ajax({
    url : 'https://codingapple1.github.io/data.json',
    type : 'GET'
  }).done(function(데이터){
    $('.card-title').html(데이터.model);
    $('.card-img-top').attr('src', 데이터.img);
  });
});
```

이렇게 하면 되겠네요.

새로 배우는게 없기 때문에 가격 등은 알아서 해보시길 바랍니다.

아까 object 자료형은 왜 따옴표가 쳐있죠?


```
{"brand" : "Hyundai", "model" : "Kona", "price" : 30000, "img" : "https://codingapple1.github.io/kona.jpg"}
```

Ajax 요청을 하면 위의 자료가 온다고 했는데,

잘 보시면 key 값에 전부 따옴표가 쳐있습니다.

이건 object가 아니라, JSON이라는 자료형입니다.

(object의 키값에 전부 따옴표를 쳐서 만들어내는 자료형입니다.)

![20220322_033501](/assets/20220322_033501.png)

JSON은 보통 서버에서 데이터를 보내줄 때 object, array 대신자주 활용하는 자료형입니다.

"object를 그냥 보내면 되는거지 왜 굳이 JSON처럼 따옴표를 쳐서 보내는지?" 물어보신다면..

원래 데이터를 주고받을 때 텍스트형식이 아니면 데이터가 중간에 깨질 수 있습니다.

그래서 object 자료를 저렇게 따옴표 쳐서 텍스트 비스무리하게 만들어서 보내는 것입니다.







그런데 문제가 있습니다.

JSON은 object처럼 쩜을 찍어서 원하는 자료를 꺼낼 수가 없습니다.  

그래서 JSON 자료를 받아오시면 object로 변환하는 과정이 필요합니다.

(그래야 원하는 데이터를 쉽게 뽑아쓰니까요)


```
var 오브젝트 = JSON.parse(여러분의 제이슨데이터)
```
JSON.parse()라는 함수에 담으면 따옴표가 제거된 object가 생성됩니다.

그 반대도 있습니다.
```
var 제이슨 = JSON.stringify(여러분의 오브젝트데이터)
```
JSON.stringify()라는 함수에 담으면 object 자료형에 따옴표를 예쁘게 쳐서 JSON을 만들어줍니다.

하지만 아까처럼 jQuery ajax 함수를 쓰면 JSON을 가져와도 지가 알아서 쓰기좋게 object로 변환해주기 때문에 따로 신경쓸 필요는 없습니다.



------


### position : sticky 활용하기


참고 사이트 : apple.com/apple-tv-4k

(사이트 레이아웃이 언제든 변경될 수 있기 때문에 밑 사진을 참고부탁드립니다)

![20220322_033642](/assets/20220322_033642.png)

position : sticky



(Edge 이상에서 사용가능)

스크롤이 되었을 때 화면에 고정되는 요소를 만들고 싶을 때 사용할 수 있는 CSS 속성입니다.

position : fixed 는 항상 화면에 고정이 되는 요소를 만들 때 사용한다고 배웠었는데 이거랑 뭔 차이가 있냐면,

position : sticky 는 스크롤이 되어서 이 요소가 화면에 나오면 고정시킨다는 특성이 있습니다.

한번 위의 예제를 만들어보도록 합시다.




```
<body style="background : grey; height : 3000px">

<div class="grey">
  <div class="image">
    <img src="appletv.jpg" width="100%">
  </div>

  <div style="clear : both"></div>
  <div class="text">Meet the first Triple Camera System</div>

</div>

</body>
```
```
.grey {
  background: lightgrey;
  height: 2000px;
  margin-top: 500px;
}
.text {
  float: left;
  width : 300px;
}
.image {
  float: right;
  width : 400px;
  position: sticky;
  top: 100px;
}
```

이렇게 작성하면 검고 긴 화면에 텍스트와 이미지가 하나씩 보입니다.

이미지에 position : sticky를 주시면

1. 스크롤이 되어서 이미지가 보이는 순간

2. viewport의 맨 위에서부터 100px 위치에서 고정이 됩니다.

3. 그리고 부모 박스를 넘어서 스크롤 되면 이미지도 같이 사라집니다.

(주의점) position : sticky는

1. 스크롤을 할 만한 부모 박스가 있어야하고

2. top 등 좌표속성과 함께 써야 제대로 보입니다.

아무튼 응용하면 남들과는 다른 레이아웃을 만들 수 있습니다.


--------


### 스크롤 위치에 따라 변하는 애니메이션 : Apple Music UI 만들기


참고 사이트 : apple.com/apple-music

(사이트 레이아웃이 언제든 변경될 수 있기 때문에 밑 사진을 참고부탁드립니다)

![20220322_033822](/assets/20220322_033822.png)


(스크롤바를 일정부분 내리면 카드가 더 이상 올라가지 않고 정지합니다 ㄷㄷ)















위 UI를 만들기 위해 일단 HTML을 준비합니다.

깨끗한 HTML 파일에 jQuery와 CSS 파일 하나를 첨부해준 후

이미지 3개를 다음과 같이 배치합니다.

이미지 파일은 하단에 첨부되어있습니다.


```
<div class="card-background">
  <div class="card-box">
    <img src="카드이미지1경로">
  </div>
  <div class="card-box">
    <img src="카드이미지2경로">
  </div>
  <div class="card-box">
    <img src="카드이미지3경로">
  </div>
</div>
```
```
.card-background {
  height: 3000px;
  margin-top: 800px;
  margin-bottom: 1600px;
}

.card-box img {
  display: block;
  margin: auto;
  max-width: 80%;
}
.card-box {
  position: sticky;
  top: 400px;
  margin-top: 200px;
}
```

겁나 긴 배경에 카드를 세로로 3개 배치했고,

position : sticky를 이용해서 스크롤시 화면에 고정되게 만들었습니다.

여기까지만 해도 나름 봐줄만 한데

예제처럼 스크롤시 opacity가 점점 줄어드는 애니메이션도 첨가해보도록 합시다.

스크롤 위치에 따라 opacity가 변하는 애니메이션 만들기



(일단 예제를 보면 스크롤을 내릴 때 카드가 1. opacity가 변하고 2. 사이즈가 줄어듭니다. 일단 1번 opacity만 구현해보도록 합시다)



여태까지 한 애니메이션은 one-way 애니메이션이었습니다.

그냥 시작화면과 최종화면만 있었을 뿐인데, 지금은 스크롤 위치에 따라 opacity가 0에서 1까지 무수히 많은 중간단계가 존재합니다.

이런 애니메이션을 어떻게 만들지 코드로 짜보도록 합시다.

그 전에 일단 HTML 하단에 자바스크립트를 빨리 작성해보십시오.

```
$(window).scroll(function(){
    var 높이 = $(window).scrollTop();
    console.log(높이);
});
```

스크롤 애니메이션의 기본은 위와 같은 자바스크립트입니다.

많이 보던 "스크롤시 내부 코드를 실행해주세요~" 라는 코드입니다.

내부 코드엔 현재 창의 스크롤바 높이를 알려주는 (window).scrollTop(); 이라는 함수를 써본 뒤에

콘솔창에 출력을 해보았습니다.


현재 창의 스크롤바 높이를 왜 출력해보는데여?



왜냐면 현재 스크롤바 높이에 따라 opacity가 변하니까

스크롤바가 어디까지 스크롤 되면 opacity가 0이고

어디까지 스크롤 되면 opacity가 1인지 찾고 싶어서 그런거지 별 이유는 없습니다

![20220322_033933](/assets/20220322_033933.png)

그래서 콘솔창에 현재 스크롤바 높이를 출력하면서 측정해보았습니다.

650px 쯤 스크롤하면 opacity를 1로,

900px 쯤 스크롤하면 opacity를 대충 0.5로,

1150px 쯤 스크롤하면 opacity를 0으로 설정하면 좋을 것 같습니다.

이걸 코드로 표현해보도록 합시다.


```
$(window).scroll(function(){

  var 높이 = $(window).scrollTop();
  console.log(높이);

// 650~1150까지 스크롤바를 내리면,
// 첫째카드의 opacity 1~0으로 서서히변경해주셈
  $('.card-box').eq(0).css('opacity', ???);

});
```

스크롤바를 내릴 때, $('.card-box').eq(0).css('opacity', ???); 이렇게 코드가 동작하도록 설정했습니다.

첫카드의 opacity를 ???로 변하게 해야되는데 ???는 0 이런 고정된 값으로 설정할 수 없을 것 같습니다.

???부분은

"스크롤바높이가 650~1150이 될 때 1~0이 되는 가변적인 값"이 되어야하겠죠?

그래서 일단 미지의 변수인 y라고 표현합시다.






```
$(window).scroll(function(){

  var 높이 = $(window).scrollTop();
  console.log(높이);

  var y = 미지의 변수;
  $('.card-box').eq(0).css('opacity', y);

});
```

Q. "스크롤바높이가 650~1150이 될 때 1~0이 되는 가변적인 값"인 미지의 변수 y를 구해보십시오.

내가 수학전공도 아닌데 도대체 미지의 변수 y를 어떻게 구합니까?



잠깐 생각해본 후 펼쳐봅시다


1. 실은 "스크롤바높이가 650~1150이 될 때 1~0이 되는 가변적인 값" y는 중학교 때 배운적이 있습니다.

그래프로 표현해보면 이렇습니다

![20220322_034034](/assets/20220322_034034.png)


그림으로 표현해보면 이렇지 않습니까.

높이가 650~1150 이렇게 변할 때 1에서 0이 되는건 저런 그래프로 표현할 수 있을 것 같습니다.

(여기서 높이라는건 아까 출력해본 높이 변수입니다)

이걸 어려운 수학용어로 1차함수라고 부릅니다요.


2. 그럼 이걸 수식으로 표현해봅시다.


```
//수학시간
y = a * 높이 + b
```
y에 대한 1차함수는 우리가 뭐 기울기 이런걸 모를 때 일단 ax+b 이런 식으로 표현할 수 있다고 배웠습니다.

그럼 a랑 b라는 미지수만 잘 구하면 y가 뭔지 알 수 있는거네요?

a는 전문용어로 기울기, b는 전문용어로 y절편이라고 합니다만

그건 너무 어려우니 우리는 대입법을 이용해보도록 합시다.

3. a,b를 구하는건 대입법을 이용합니다.

위의 함수는

높이가 650일 때 y가 1,

높이가 1150일 때 y가 0입니다.


```
//수학시간
1 = a * 650 + b
0 = a * 1150 + b
```

그럼 이렇게 대입해봐도 맞겠죠?

방정식이 두개고 미지수가 두개면 충분히 풀 수 있습니다.

그래서 연습장에 방정식을 잘 풀어보시면


```
//수학시간
1 = a * 650 + b
0 = a * 1150 + b

a = -1/500
b = 115/50
```

이렇게 나옵니다. 분수를 약분하고 그런건 필요없습니다.

그럼 a와 b값을 아까 y를 표현하던 수식에 대입하면
```
//다시 자바스크립트
var y = -1/500 * 높이 + 115/50
```
대충 이렇게 되겠습니다.  


그럼 y를 구했으니 아까 코드를 이렇게 업데이트 할 수 있겠군요



쨔쟌
```
$(window).scroll(function(){

  var 높이 = $(window).scrollTop();
  console.log(높이);

  var y =  -1/500 * 높이 + 115/50;
  $('.card-box').eq(0).css('opacity', y);

});
```
스크롤바 내려보시면 opacity라는 값이 y에 의해서 결정됩니다.

y는 스크롤 높이가 변할 때마다 매번 바뀌기 때문에

아까와 같은 UI를 구현가능한 것입니다요.


------------


- 숙제 : 투명도 뿐만 아니라 카드가 0.9배 정도로 서서히 작아지는 것도 똑같이 구현해봅시다.  



지금까지 카드 투명도가 서서히 변하는걸 구현해 봤는데

현재 창을 650~1150만큼 스크롤 했을 때 카드의 크기가 1에서 0.9로 작아지도록 만들어주시면 됩니다.



직접 짜본 후 펼쳐보지 않으면 머리가 슉슉 빠집니다.


사이즈를 줄이는건 transform : scale(0.9) 이런 속성을 이용하시면 되겠습니다.



그런데 0.9를 그대로 박아넣는게 아니라

미지의 변수 z같은걸 만들어서

z = a * 높이 + b 이렇게 수식을 세운 뒤

높이가 650일 때 z는 1,

높이가 1150일 때 z는 0.9

이니까

대입법으로 a와 b라는 상수를 구하시면







쨔쟌
```
$(window).scroll(function(){

  var 높이 = $(window).scrollTop();
  console.log(높이);

  var y =  -1/500 * 높이 + 115/50;
  $('.card-box').eq(0).css('opacity', y);

  var z = (-1/5000) * 높이 + 565/500;
  $('.card-box').eq(0).css('transform', `scale( ${z} )`);

});
```

스크롤바 내려보시면 transform : scale(z) 이라는 값이 z에 의해서 결정됩니다.

${} 이 기호는 HTML 생성 시간에 잠깐 배운 글자 중간중간에 변수 삽입 스킬입니다.



그리고 화룡점정으로 더 부드러운 동작을 원하시면

card-box라는 div에 transition : all 0.2s 같은걸 부여해주시면 되겠습니다.

--------

------------------




### Hammer.js로 이미지 슬라이드 터치 기능 만들기 1

터치기능은 쌩 자바스크립트로 구현할 경우 매우 복잡합니다.



터치 후 슬라이드가 되는 그림을 하나 만들려고 해도,

1. 이미지에다가 touchstart, touchmove, touchend 라는 이벤트리스너를 각각 만들어줍니다. 각각 터치시작, 터치중, 터치끝에 발동되는 이벤트리스너입니다.

2. 각각 이벤트리스너가 동작할 때 유저가 화면 터치시의 X축 좌표(clientX 라고 씀)를 출력하거나 저장해놓습니다.

3. touchstart의 X축 좌표와 touchend의 X축 좌표를 빼서 양수가 나오면 오른쪽으로 슬라이드했구나~! 라고 판단합니다.

4. 따라서 터치중일 때 (touchmove 발동시) 유저가 X축 좌표를 움직인 만큼 똑같이 이미지를 우측으로 움직이게 만들어줍니다. (CSS transform 속성 등 사용)

5. 터치를 놓으면 (touchend 발동시) 이미지가 완전히 다음 이미지로 변경되게 만들어줍니다. 때에 따라 CSS transition을 추가해줍니다.





길고 복잡하죠? 어쩔 수 없습니다.

하지만 크나큰 벽이 하나 또 있는데, 쌩 자바스크립트 사용시 모바일 브라우저간 호환성이 그닥 좋지 않습니다.

호환성 잡기도 매우 귀찮습니다.

그래서 코드가 약간 더 간결하고 호환성이 좋은 Hammer.js를 사용해보도록 합시다.



설치는 다음 코드를 복붙하시거나 직접 Hammer.js 검색해서 다운받아 HTML에 첨부하시면 되겠습니다.

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha256-eVNjHw5UeU0jUqPPpZHAkU1z4U+QFBBY488WvueTm88=" crossorigin="anonymous"></script>
```
jQuery도 필요합니다. jQuery도 설치해주시면 됩니다.

당연히 앞으로 Hammer.js 첨부한 하단에다가 코드를 짜야 정상작동됩니다. 잊지맙시다.


저번에 만든 이미지 슬라이드를 찾아옵니다.


```
<div style="overflow: hidden; position: relative">
    <div class="slide-container">
      <div class="slide-box">
        <img src="img/shirt1.jpg">
      </div>
      <div class="slide-box">
        <img src="img/shirt2.jpg">
      </div>
      <div class="slide-box">
        <img src="img/shirt3.jpg">
      </div>
    </div>
</div>
```
대충 이런 식으로 만들었던 코드를 다시 끄집어내도록 합시다.

![20220322_092719](/assets/20220322_092719.png)


폭이 300% (300vw)인 큰 박스 안에 작은 이미지박스 3개가 이렇게 있는 레이아웃입니다.

버튼을 누르면 박스 전체를 왼쪽으로 -100% (100vw) 만큼 움직이게 만들어서 슬라이드를 구현했습니다.









일단 Hammer.js 셋팅부터 합시다.



자바스크립트로 다음과 같이 작성합니다.

이해할 것도 없고 그냥 복붙하면 될듯요


```
var 이미지1 = document.querySelectorAll('.slide-box img')[0];

var 매니저 = new Hammer.Manager(이미지1);
매니저.add(new Hammer.Pan({ threshold: 0 }));

매니저.on('pan', function(e){
  //이미지1이 pan 되었을 때 실행할 코드
})
```
첫줄에서 일단 터치를 구현할 HTML요소를 찾아줍니다. (쌩자바스크립트 셀렉터를 이용합니다)

둘째줄에서 new Hammer.Manager()라는 함수에 담아줍니다.  

셋째줄에서 내가 사용할 이벤트를 add() 함수로 등록하고 threshold 값을 셋팅합니다. (threshold는 이벤트 발동되기 전까지의 역치값입니다)

이해할 것도 없고 그냥 Hammer.js 개발한 사람이 만든 라이브러리 사용법일 뿐이니 그냥 복붙을 잘하면 끝입니다.



그럼 이제 마지막에서 핵심 이벤트리스너를 사용가능합니다.

pan이라는 이벤트리스너를 매니저에 달아주시면 됩니다.

pan이라는 이벤트는 Hammer.js가 제공하는 "터치 후 슬라이드 했을 때"를 체크해주는 이벤트입니다.

상하좌우 슬라이드 다 pan 이벤트로 체크 가능합니다.


첫째 이미지를 pan하면 이미지가 드래그한 만큼 왼쪽으로 이동해야합니다.



이 코드를 구현하고 싶다면 pan이벤트 리스너 안에서 작성하시면 되겠습니다.

 ```

매니저.on('pan', function(e){
  console.log(e.deltaX)
})
```
그 전에 실험부터 한번 해보도록 합시다.

e.deltaX를 출력해보십시오. (function에 e라는 파라미터를 추가해야합니다)

그럼 pan 될 때마다 e.deltaX가 콘솔창에 출력되는데, 이게 바로 여러분이 X축 드래그한 거리를 알려주는 일종의 함수입니다.

(요거가 편리해서 사람들이 Hammer.js를 많이 씁니다)







그럼 드래그한 거리만큼 이미지를 왼쪽으로 이동시키는 코드는 어떻게 짤까요?

우리가 배웠던 것들이기 때문에 그냥 해보겠습니다.

예전에 이런 코드 보신 적 있습니까
$('.slide-container').css('transform', 'translateX(100px)')

보신적 있죠? 이러면 .slide-container라는 박스가 X축으로 100px 이동합니다.

```
매니저.on('pan', function(e){
  $('.slide-container').css('transform', 'translateX(' + e.deltaX + ')' );
})
```
그럼 100px이 아니라 e.deltaX 만큼 이동하게 해주면 어떻게 될까요?

여러분이 이미지를 슬라이드한 만큼 이미지담은 박스가 왼쪽으로 이동됩니다.

첫째 기능 만들기 끝입니다.

(혹시 반응이 느리면 .slide-container에 부여된 transition을 제거해보세요)

왼쪽으로만 슬라이드 시키고 싶다면



....만약에 e.deltaX가 음수일 때만 이 코드를 동작시키면 되겠군요?

(출력해보면 왼쪽 슬라이드시 항상 e.deltaX가 음수입니다)


```
매니저.on('pan', function(e){
  if (e.deltaX < -1) {
    $('.slide-container').css('transform', 'translateX(' + e.deltaX + ')' );
  }
})
```
이러면 되겠군요.

if문, .css()함수 이런거 다 배웠던 것들이죠?

이제 다음 강의에서 터치했던 손을 놓으면 두번째 사진으로 슉 변하는 기능도 개발해봅시다.

지금은 터치중일 때 손을 놓으면 그 자리 그대로 이미지가 정지해있으니까 이상하잖아요.

---------

### Hammer.js로 이미지 슬라이드 터치 기능 만들기 2


저번시간까지 짰던 코드 다시 살펴보기



1. 내가 원하는 이미지를 골라서 Hammer 뭐시기 함수에 등록하고 매니저라는 변수에 담아줍니다.

2. 매니저에 add 함수를 이용해서 pan이벤트 발동시 설정을 집어넣어줍니다.

(여기까지는 라이브러리 사용법이라 그냥 복붙해서 쓰시면 됩니다.)

3. 매니저에 pan이라는 이벤트 리스너를 부착하면 이제 그 요소가 pan (슬라이드) 될 때마다 코드를 실행시킬 수 있습니다.

4. 이벤트리스너 안에선 e.deltaX라는 값을 이용해서 슬라이드한 거리를 알 수 있습니다.

5. 슬라이드한 거리만큼 .slide-container라는 요소를 왼쪽으로 움직여줍니다 (transform)




```
var 이미지1 = document.querySelectorAll('.slide-box img')[0];

var 매니저 = new Hammer.Manager(이미지1);
매니저.add(new Hammer.Pan({ threshold: 0 }));

매니저.on('pan', function(e){
      if ( e.deltaX < -1 ){
        $('.slide-container').css('transform', 'translateX('+ e.deltaX +'px)');
      }
});
```
끝입니다.

-----------



마우스를 놓으면 이미지2로 변하는 기능을 더해봅시다.



마우스를 놓아서 터치가 끝나는걸 Hammer.js 라이브러리에선 e.isFinal이라는 값으로 표현해줍니다.

진짠지 한번 보도록 합시다.


```
매니저.on('pan', function(e){
    if ( e.deltaX < -1 ){
      $('.slide-container').css('transform', 'translateX('+ e.deltaX +'px)');
      //터치가 끝나는걸 알려주거라
      if (e.isFinal) {
        console.log(e.isFinal)
      }
    }
});
```
이렇게 이벤트리스너 내부의 코드를 바꿔주시면

터치가 끝날 때 끝나는걸 알려줍니다.

이제 그냥 자바스크립트로 설명만 잘하시면 됩니다. (이후 부턴 다 배웠던 내용이 출현합니다)


그럼 이 때 이미지2로 변해야 하는데..



변하게 바꿔봅시다.
```
매니저.on('pan', function(e){
    if ( e.deltaX < -1 ){
      $('.slide-container').css('transform', 'translateX('+ e.deltaX +'px)');
      //터치가 끝날 때 이미지2로 변하게 해주셈
      if (e.isFinal) {
        $('.slide-container').css('transform', 'translateX(-100vw)');
      }
    }
});
```
이렇게 한줄 적으면 끝 아닙니까.

이미지2로 변하는 코드는

예전 강의... 슬라이드 만들기 시간에 했었기 때문에 넘어가도록 하겠습니다.


그런데 이미지2로 변할 때 순간이동을 해버리네요.



서서히 변하도록 코드를 바꿔보도록 합시다.

서서히 변하는건 transition : all 0.5s 이런 CSS 속성을 추가하면 된다고 했는데..

그럼 <div class="slide-container"> 라는 곳에 transition을 부여하면 되겠네요?

는 ... CSS로 직접 박아버리면 문제가 생깁니다.







저번 강의에서 개발한 이미지가 "드래그와 동시에 변경되는기능"에서 문제가 생기는 것이지요.

여러분이 드래그할 때도 transition이 작동되기 때문에 드래그시 이미지 이동속도가 매우 느려질 수 있습니다.

그럼 여러분이 마우스를 놓아 터치가 끝났을 때만 transition을 잠깐 부여하면 되겠군요.













마우스를 놓았을 때만 잠깐 transition 부여하기



마우스를 놓았을 때 이미지2를 보여주는데,

이미지2를 보여주기 전에 잠깐 transition을 부여해주면 되겠네요.

그리고 이미지2를 성공적으로 보여준 후엔 transition을 제거합니다.

```
매니저.on('pan', function(e){
    if ( e.deltaX < -1 ){
      $('.slide-container').css('transform', 'translateX('+ e.deltaX +'px)');
      //터치가 끝날 때 이미지2로 변하게 해주셈
      if (e.isFinal) {
        $('.slide-container').addClass('transforming');
        $('.slide-container').css('transform', 'translateX(-100vw)');
        $('.slide-container').removeClass('transforming');
      }
    }
});
```
이렇게 하자는 겁니다.

transforming이라는 클래스를 부여했다가 다시 제거하자는건데,

transforming이라는 클래스는 그냥 transition 하나밖에 없습니다.
```
.transforming {
  transition : transform 0.5s;
}
```
요로케 CSS를 마련한 후에 저렇게 뗐다가 붙였다가 하시면 되겠습니다.

----


그런데 약간 시간차를 두고 제거하는게 좋을 것 같습니다.



transition이 0.5초간 작동된 후에 제거해주는게 좋을 것 같은데여?
```
매니저.on('pan', function(e){
    if ( e.deltaX < -1 ){
      $('.slide-container').css('transform', 'translateX('+ e.deltaX +'px)');
      //터치가 끝날 때 이미지2로 변하게 해주셈
      if (e.isFinal) {
        $('.slide-container').addClass('transforming');
        $('.slide-container').css('transform', 'translateX(-100vw)');
        //0.5초 후에 코드를 실행하고 싶을 때 쓰는 문법
        setTimeout(function(){
          $('.slide-container').removeClass('transforming');
        }, 500);
      }
    }
});
```
setTimeout()이라는 함수를 쓰시면

원하는 시간 후에 코드를 실행할 수 있습니다.

setTimeout(function(){ 실행할코드 }, 기다릴시간)

이렇게 씁니다.





그럼 터치기능을 탑재한 이미지 슬라이드가 완성됩니다.

이미지1에만 기능개발을 해봤는데, 여러분이 응용해서 이미지2, 이미지3도 개발하시거나

아니면 이미지를 담는 박스 자체에다가 터치기능개발을 해보시길 바랍니다.



오늘의 교훈은

이미 터치기능이 있는 carousel 라이브러리를 설치하면

이렇게 노가다할 필요가 없다라는 것입니다.

하지만 매우 간단한 터치기능 하나가 필요하다면 당연히 직접 개발하는게 좋겠죠?













전체 코드


```
var 이미지1 = document.querySelectorAll('.slide-box img')[0];

var 매니저 = new Hammer.Manager(이미지1);
매니저.add(new Hammer.Pan({ threshold: 0 }));

매니저.on('pan', function(e){
      //console.log(e.deltaX);
      if ( e.deltaX < -1 ){
        $('.slide-container').css('transform', 'translateX('+ e.deltaX +'px)');

        //만약에 이사람이 마우스를 놓으면 ...
        if (e.isFinal){
        //두번째 사진으로 쇽 변해야함
          $('.slide-container').addClass('transforming');
          $('.slide-container').css('transform', 'translateX(-100vw)');
          setTimeout(function(){
            $('.slide-container').removeClass('transforming');
          }, 500)

        }
      }
});
```
언제나 말하지만 선생님의 코드를 복붙하는 것은 공부가 아니라 복붙일 뿐입니다.  


-------

### 한글자씩 출현하는 Typewriting 애니메이션 만들기 1

![20220322_095248](/assets/20220322_095248_ghnvdnxex.png)

▲ 이런걸 typewriting 애니메이션이라고 하는데 만들어봅시다.

우리는 심플하게 버튼을 누르면 동작시켜보도록 합시다.







준비 : 글자와 버튼과 jquery
```
<button>버튼</button>
<h1>abdce</h1>

<script src="jquery설치파일"></script>
<script>코드짤 곳</script>
```
준비하고 시작합시다.

여러분이 천재 고수가 아니라면 언제나 한글부터 짜는게 좋습니다.

버튼을 누르면 글자가 하나씩 출현해야되는데 방법은 여러개가 있을 수 있겠군요.

가장 쉬운 방법은 h1태그 내의 글자들을 하나씩 붙이는 것입니다.

한글로 쭉 작성해보자면



1. 버튼을 누르면

2. h1태그 안의 abcde라는 글자를 다 삭제한 다음에

3. 0.5초 후에 h1태그안에 a를 더하고

4. 0.5초 후에 h1태그안에 b를 더하고

5. 0.5초 후에 h1태그안에 c를 더하고...



이렇게 짜면 되는게 아닐까요?

어려운 기능일 수록 복잡하게 코드짜려고 하지 마시고 일단 초딩처럼 생각하면 해결책은 항상 쉽게 나옵니다.

타이핑할 때 깜빡이는 세로선을 구현하고 싶으면 세로선 특수기호도 알아서 추가해보세요.

1번 2번을 개발해봅시다. 버튼을 누르면 일단 h1태그 내용이 비워져야합니다.


```
var h1태그 = document.querySelector('h1');

$('button').click(function(){
  $('h1').html('') 혹은 h1태그.innerHTML = ''
});
```
jQuery를 쓰든 쌩JS를 쓰든 이렇게 하면 되겠습니다.

querySelector()는 jQuery의 $() 셀렉터랑 유사한 쌩자바스크립트 셀렉터입니다.

(다만 한번에 태그 1개만 찾을 수 있습니다)









3번을 개발해봅시다.



하지만 특정 코드를 0.5초 후에 실행하는 법은 배운적이 없죠?

구글 찾으면 나오긴 합니다.

그건 setTimeout이라는 내장함수를 쓰시면 됩니다.

구체적인 사용법은 매우 쉽습니다.




```
 setTimeout(function(){ 실행할 코드 }, 1000)
 ```
이렇게 쓰시면 특정 코드를 1000ms (1초) 후에 실행가능합니다.

2000 이렇게 쓰면 2초겠죠?

그럼 빨리 3~5번을 개발해보자면
```
var h1태그 = document.querySelector('h1');

$('button').click(function(){
  h1태그.innerHTML = '';

  setTimeout(function(){
    h1태그.innerHTML = h1태그.innerHTML + 'a'
  }, 500)

});
```
```
h1태그.innerHTML = h1태그.innerHTML + 'a'

```
이 부분이 이해가 안간다면 한국어로 번역을 하면

h1태그 내용에 h1태그 내용 + a를 대입해주세요~ 라고 쓴 것일 뿐입니다.







근데 a라는 글자를 직접 저렇게 집어넣을 수 있는건

우리가 a라는 글자인걸 알기 때문입니다.

우리가 글자가 뭔지 모르면요? 혹은 h1태그에 있던 글자가 달라진다면요?

여러분의 코드는 쓸모없어집니다.



그래서 h1태그.innerHTML = h1태그.innerHTML + h1태그에 원래있던 첫글자

그래서 이렇게 코드를 바꾸면 다양한 상황에서도 쓸 수 있는 코드가 되겠죠?
```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
  h1태그.innerHTML = '';

  setTimeout(function(){
    h1태그.innerHTML = h1태그.innerHTML + 원래글씨[0]
  }, 500)

});
```
그래서 이렇게 수정했습니다.

원래글씨라는 변수를 만들고 원래 글씨를 집어넣었습니다.

그리고 자바스크립트에서는 문자자료형에 [0] 이렇게 array에서 자료뽑듯이 써주시면

첫 글자를 출력가능합니다.











4~5번도 개발해봅시다.




```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
  h1태그.innerHTML = '';

  setTimeout(function(){
    h1태그.innerHTML = h1태그.innerHTML + 원래글씨[0]
  }, 500);

  setTimeout(function(){
    h1태그.innerHTML = h1태그.innerHTML + 원래글씨[1]
  }, 1000)

  setTimeout(function(){
    h1태그.innerHTML = h1태그.innerHTML + 원래글씨[2]
  }, 1500)

});
```
끝입니다. 이제 버튼을 누르면 글자가 하나씩 3개가 추가가 되는군요.





이제 글자 갯수에 맞게 setTimeout을 계속 하드코딩하면 되겠죠?

하지만 이걸 반복문으로 축약하고 싶은 느낌도 들죠?

for 반복문으로 직접 축약해서 개발을 완료해보시길 바랍니다.

-----------


### 한글자씩 출현하는 Typewriting 애니메이션 만들기 2


복문으로 저번시간 코드를 축약해봅시다.



그냥 for 반복문을 써보도록 하겠습니다.




```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
  h1태그.innerHTML = '';
  for (var i = 0; i < 원래글씨.length; i++){
    setTimeout(function(){
      h1태그.innerHTML = h1태그.innerHTML + 원래글씨[?????]
    }, ?????);
  }

});
```
끝입니다.

반복문이 도는 횟수는 원래글씨.length라고 지정해준 이유는.. 그래야 글자수에 맞게 반복문이 도니까 그런 것이구염.



근데 ??? 자리에 들어갈 것들을 좀 생각해봐야겠군요.

첫째 물음표엔 반복문이 돌 때마다 0,1,2,3.. 이렇게 변하는 변수가 들어가야하고

둘째 물음표엔 반복문이 돌 때마다 500,1000,1500 이렇게 변하는 변수가 들어가야합니다.  






```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
  h1태그.innerHTML = '';
  for (var i = 0; i < 원래글씨.length; i++){
    setTimeout(function(){
      h1태그.innerHTML = h1태그.innerHTML + 원래글씨[i]
    }, i * 500);
  }

});
```
그런 역할을 하는 변수는 i라고 예전에 배웠던 기억이 납니다.

i는 반복문이 돌 때마다 0,1,2... 이렇게 차례로 증가하는 값이랬죠?

그래서 i를 저렇게 집어넣었습니다. 반복문 끝!













근데 반복문을 이상하게 썼는지 에러가납니다.



a라는 문자가 아니라 계속 undefined라는 문자가 더해지는군요.

왜 그럴까요?





반복문에 있는 var이라는 변수를 let이라는 변수로 바꿔주시면 그런 일이 없습니다.
```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
  h1태그.innerHTML = '';
  for (let i = 0; i < 원래글씨.length; i++){
    setTimeout(function(){
      h1태그.innerHTML = h1태그.innerHTML + 원래글씨[i]
    }, i * 500);
  }

});
```
이제 기능이 완성되었습니다.



왜 var을 쓰면 안되고 let을 쓰면 되냐면








이걸 함수로 축약해서 나중에 재활용하기



함수로 축약하시면 나중에 다른 HTML태그에 적용한다든지 그런 것도 쉽게 할 수 있겠죠?

축약해봅시다.

간단하게 그냥 이벤트리스너 내부 코드만 함수로 싸매서 첨부해보겠습니다.


```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
   애니메이션()
});

function 애니메이션(){
  h1태그.innerHTML = '';
  for (let i = 0; i < 원래글씨.length; i++){
    setTimeout(function(){
      h1태그.innerHTML = h1태그.innerHTML + 원래글씨[i]
    }, i * 500);
  }
}
```
이러면 될 것 같죠? 잘 되지는 않습니다.

왜냐면 애니메이션() 이라는 함수 안에 변수들이 정의가 안되어있다고 에러가 날 수도 있고 그렇기 때문입니다.

(h1태그, 원래글씨 이런 변수들 말입니다.)





그래서 함수화하실 땐 변수들을 파라미터로 입력한다고 정의해주시는게 매우 좋은 관습이자 옳은 방법입니다.

(그리고 나중에 재활용하실 땐 h1태그, 원래글씨라는 변수들 내용이 달라질 수도 있으니까요)




```
var h1태그 = document.querySelector('h1');
var 원래글씨 = document.querySelector('h1').innerHTML;

$('button').click(function(){
   애니메이션(h1태그, 원래글씨)
});

function 애니메이션(h1태그, 원래글씨){
  h1태그.innerHTML = '';
  for (let i = 0; i < 원래글씨.length; i++){
    setTimeout(function(){
      h1태그.innerHTML = h1태그.innerHTML + 원래글씨[i]
    }, i * 500);
  }
}
```
이러면 애니메이션() 함수를 사용할 때 두개의 변수를 구멍에 집어넣을 수 있고,

집어넣은 변수들은 구멍을 타고 들어가서 각자의 자리에 박힙니다.

그래야 조금 더 원활하게 함수화를 하실 수 있습니다.









그리고 한글처럼 IME입력기를 사용해 타이핑하는 언어들을 위해

타이핑애니메이션을 쉽게 구현할 수 있는 라이브러리도 누군가 만들어놨으니

한번 검색해보시길 바랍니다.

한글 typing typewriting 애니메이션 이런거 검색해보시면 되겠군요.





 ---------


 ### 실전) 웹개발 기능대회 예제


(글로 진행합니다)



실제 프론트엔드 개발을 체험할 수 있는 좋은 예제를 준비했습니다.

전국기능경기대회라는게 있는데

![20220322_100157](/assets/20220322_100157.png)

기술진흥원에서 매년 이런 주제로 대회를 개최하고 시상합니다.

여기 웹디자인 & 개발 분야는 HTML CSS JS로 프론트엔드 개발하고 php로 서버만들면 되는 대회입니다.

인터넷 접속 안되는 컴퓨터와 코드 에디터 하나 주는데 10시간 동안 코드짜고 오면 됩니다.

(실은 문제를 일주일 전에 미리 줍니다 그래서 답안을 달달 외워서 가면 됩니다)

입상해봤자 누구 알아주는 사람도 없고 상금은 겨우 30만원이라 실제 참가하라는건 아니고

여기서 출제하는 문제들이 자바스크립트 연습해보기 좋아서 가져왔습니다.

19년인가 20년도 문제인데 심심하면 도전해보도록 합시다.





필요한 이미지 등 첨부파일은 하단에 준비되어있습니다.

목표는 하단에 설명하는 기능을 가진 HTML 파일을 만드시면 됩니다.

![20220322_100220](/assets/20220322_100220.png)

Q1. 만들 HTML파일은 위 사진과 비슷한 레이아웃을 구성해야합니다.

- Bootstrap 사용이 권장됩니다. 실제 시험에서도 쓰게 해줌

- 상단 검은 메뉴는 필요없습니다 장식용임

- 상품목록은 .json 파일로 제공되는데 그 파일에 있는 데이터를 박아넣으셔야합니다.

- ajax get 요청으로도 로컬 json파일에 있는 데이터를 가져올 수 있습니다.

![20220322_100244](/assets/20220322_100244.png)

(json 데이터파일은 이렇게 생겼으며 하단 첨부파일에 포함되어있음)

![20220322_100306](/assets/20220322_100306.png)

Q2. 상품 검색 기능이 필요합니다.

- input에 검색어를 입력하면 그 글자를 가지고 있는 상품만 보여줘야합니다.

- 찾은 글자에 노란색 배경을 입혀보는 것도 좋겠군요

힌트


상품제목안에 저거 input에 입력한 글자가 들어있는지 찾으면 됩니다.

자바스크립트로 '안녕하세요'.indexOf('안') 이렇게 쓰시면

'안'이라는 글자가 '안녕하세요' 글자에서 몇번째에 출현하는지를 퉤 뱉어줍니다.

'안'이라는 글자가 없으면 아마 -1을 뱉어줄 겁니다.



그리고 이거 찾는 코드를 언제 실행시켜야하죠? 생각해봅시다.

사용자가 인풋에 '안'이라고 입력하면

"상품명1에 '안'이라는 글자가 있냐 있으면 카드1 보여줘"

"상품명2에 '안'이라는 글자가 있냐 있으면 카드2 보여줘"

"상품명3에 '안'이라는 글자가 있냐 있으면 카드3 보여줘"

~~ 이렇게 코드짜면 어떨까 생각해봤습니다. 아님말고요





HTML중간중간 원하는 글자에 노란색 배경입히는건 html과 css 잘하면 됩니다.


![20220322_100452](/assets/20220322_100452.png)


▲ Q3. 위 사진 처럼 상품을 드래그할 수 있게 만들어야합니다.

- 상품을 드래그해서 검은 박스에 놓을 수 있어야합니다.

- 드래그 해서 놓으면 장바구니 항목이 추가됩니다. 마법으로 장바구니 항목을 만든게 아니라 저거 역시 HTML 생성입니다.



뭐야 드래그 & 드롭 이벤트는 처음인데요


어떤 요소를 잡아끄는걸 드래그, 그리고 마우스 떼어서 놓는걸 드롭이라고 합니다.

어떤 HTML 요소를 드래그 & 드롭되게 만들고 싶으면 jquery UI를 설치해서 쓰는게 가장 맘편합니다.

안쓰면 쌩자바스크립트로 코드 백만줄 짜야함

설치하면 이런 코드를 작성할 수 있습니다.






```
$('#드래그할요소').draggable({
     revert : true,
//     containment: '#요소셀렉터',
//     snap : '#요소셀렉터'
 });
 ```
▲ 어떤 요소를 드래그되게 만들고 싶으면 draggable() 이벤트리스너를 부착해주면 됩니다.

안에 {} 오브젝트 자료형으로 드래그시 어떻게 동작할지 설정을 입력할 수 있습니다.

revert를 true로 주면 드래그끝났을 때 원래 제자리로 돌려놓아주고

snap은 드래그중에 어떤 요소에 달라붙게 할건지 정할 수 있고  (스냅시킬건지)

등 여러가지 설정이 가능합니다.




```
$('#드롭할까만박스').droppable({
  drop: function(event, ui) {
    var item = $(ui.draggable);
    console.log(item);
  },
});
```
▲ 어떤 요소에 drop이 가능하게 만들고 싶으면 droppable() 이벤트리스너를 부착합니다.

droppable()이라는 이벤트리스너를 부착하면 왼쪽에 있는 요소에 뭔가 드롭되었을 때 원하는 코드를 실행가능합니다.

drop되었을 때 function(){} 안에 있는 코드가 실행됩니다.

그 함수 안에서 ui.draggable 이렇게 쓰시면 내가 방금 드롭한 HTML 요소를 출력가능합니다. $()안에 담은건 jquery함수 붙여서 쓰려고 담은겁니다.


Q4. 나머지는 별거 아닙니다.

- 장바구니 개별 항목의 주문 수량을 변경할 수 있어야합니다.

- 장바구니 항목에 있는 것들의 최종 합계 금액을 어딘가 보여주어야합니다.

- 구매하기를 누르면 성함 연락처를 입력할 수 있는 모달창을 띄워주어야합니다.

![20220322_100532](/assets/20220322_100532.png)

▲ Q5. 모달창에서 성함 연락처 입력하고 구매완료를 누르면 대충 저런 영수증 이미지를 출력해주어야합니다.

- 이미지 만드는건 별거 아니고 <canvas>라는 태그를 이용합니다.

- 자바스크립트로 <canvas>안에 그림을 그리고 텍스트 입력도 가능합니다. 지금은 텍스트 입력만 합시다.



canvas에 텍스트 입력하는 법



```
var canvas = document.getElementById('canvas');
var c = canvas.getContext('2d');
c.font = '20px dotum';
c.fillText('안녕하세요', 30, 30);
c.fillText('반갑습니다', 50, 60);
```

0. HTML어딘가에 <canvas id="canvas"></canvas> 이런 태그를 만들어줍니다. 가로세로 높이도 지정해보십시오.

1. canvas 태그를 자바스크립트 셀렉터로 찾아줍니다. 그 다음에 getContext('2d') 이걸 붙이면 이제 자유롭게 내용입력이 가능합니다.

2. 점찍고.font 하면 자유롭게 폰트설정이 가능하고

3. 점찍고.fillText(내용, x좌표, y좌표) 하면 canvas태그 내의 특정 좌표에 원하는 글씨 입력이 가능합니다.



canvas안에 적은 내용들은 전부 이미지처럼 사용가능합니다. 별거아님

------------


### 웹개발 기능대회 예제 답안

웹개발 기능대회 예제 답안


하단 첨부파일은 대회에서 공식적으로 제공한 답안입니다.

어렵고 복잡하게 짠 부분은 직접 몇개 수정해서 올려드립니다.



당연히 구현방법은 여러가지기 때문에 모범 답안은 아닐 수 있습니다.

1. 버그없고 2. 나중에 수정도 편리하고 3. 상품의 양이 많아져도 문제없고 4. 여러분이 보기편한 코드

이 조건을 충족하면 전부 다 모범답안입니다.





(참고사항)

- 함수를 많이 만들어서 사용하고 있습니다. 코드가 길어서 그렇습니다.

- 코드 그대로 따라치는 건 공부가 아니라 한컴타자연습일 뿐 입니다. 대충 힌트를 얻었으면 직접 처음부터 짜보는게 좋은 공부 방법입니다.

- 모달창 띄울 때 jquery dialog 이런 이상한걸 쓰던데 굳이 따라할 필요는 없습니다.

- 답안 쓴 사람은 세계 최고로 어렵게 개발해놨군요 모르는 것들은 게시판에 물어보면 힌트드립니다
