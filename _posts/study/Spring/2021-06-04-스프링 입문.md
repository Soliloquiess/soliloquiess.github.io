---
title: "[Spring] 스프링 입문,코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술"
layout: post
subtitle: Spring
date: "2021-06-04-03:58:53 +0900"

categories: study
tags: Spring
# layout: post
# title:  WebFrontEnd
# subtitle:   "시작하기"
# categories: study
# tags: java
comments: true
---

![20210604_033321](/assets/20210604_033321.png)

일단 기본 내용은 그대로 진행하되 setting에서 gradle을 intelij로 바꿔준다.

![20210604_034116](/assets/20210604_034116.png)

이렇게 구성되어 있고

대부분 2가지로 나뉘는데 하나는 java파일로 모든 자바파일이 저장되며 또 하나는 resource로 자바파일을 제외한 모든 파일이 여기 들어간다.

웹 어플리케이션에서 첫번쨰 진입점이 컨트롤러이다.

컨트롤러에

```
package hello.hellospring.controller;


import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HelloController {

    @GetMapping("hello)")   //웹 어플리케이션에서 /hello라 들어오면 이 메소드를 호출해준다.
    public String hello(Model model){
        model.addAttribute("data","hello"); //모델 넘김(여기서 모델은 mvc의 모델)
        return "hello";


    }
}



```

이렇게 작성하고 이 부분들을

템플릿 엔진인 타임리프에서

```
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--이 줄 넣어주면 타임리프를 사용 가능하다.-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <p th:text="'hi'+${data}"> 안녕하세요 . 손님</p>
</body>
</html>

```

이렇게 데이터가 넘어와서 출력하게 된다.

![20210604_152013](/assets/20210604_152013.png)

웹 브라우저에서 8080던지면 톰캣에서 받아서 /hello를 찾아간다.
@GetMapping은 get방식으 http url을 임의로 치고 넘어가면 get방식으
이걸 url과 매핑시키고 이걸 model이 넘어가는데 data가 넘어가고 그 값이 hello다.

리턴이 hello니까 hello.html을 스프링이 찾아서 타임리프가 처리(템플릿엔진)

컨트롤러가 리턴값으로 문자 반환하면 viewResolver가 화면을 찾아서 처리한다.

resource 폴더에 있는 자원에 viewname+html이 열리게 됨.

data는 키값으로 그 모델을 꺼내게 됨.

----


### 정적 컨텐츠

- 서버에서 하는 거 없이 파일을 그대로 내려줌.

### MVC 와 템플릿 엔진

- jsp ,php 처럼 서버에서 html을 동적으로 프로그래밍 해서 바꿔서 내려줌

mvc는 모델 뷰 컨트롤러로 나눔.

정적컨텐츠와 차이는 파일을 웹브라우저에 전달하고
mvc와 템플릿 엔진은 서버에서 바꿔서 내려줌.

API는 안드로이드나 아이폰 개발시 서버입장에선 json이라는 포맷으로 내려줌.

그 포맷으로 데이터 내려주는게 API방식.
또 서버끼리 통신할 떄 API 사용.



스프링 부트는 정적 컨텐츠를 자동으로 제공

------

![20210604_222004](/assets/20210604_222004.png)


hello-static.html 치면 요청 들어옴. 스프링에 넘어가는데 스프링은 컨트롤러에서 hellostatic이 있는지 찾음(우선순위가 컨트롤러에 있음) 근데 이 컨트롤러가 없으면(매핑이 된 컨트롤러가 없으면) 없을시 resource에 static/hello-static.html을 찾아서 실행한다.

-----


### MVC 와 템플릿 엔진

- MVC: Model, View, Controller

과거에는 View에 모든걸 다 처리했는데(model 1방식)
이게 model2방식으로 되고 현재의 MVC 방식으로 바뀌었다.


역하로가 책임

View는 화면을 그리는데 모든 역량을 집중,
모델과 컨트롤러는 내부 비즈니스 로직에 집중한다.


```

    @GetMapping("hello-mvc")
    public String helloMvc(@RequestParam("name") String name, Model model) {
        model.addAttribute("name", name);
        return "hello-template";    //이러면 hello-template으로 이동한다.
    }

```


```
@GetMapping("hello-mvc")
  public String helloMvc(@RequestParam("name") String name, Model model) {

      model.addAttribute("name", name);
      return "hello-template";    //이러면 hello-template으로 이동한다.
  }

```


여기서

여기 required 옵션 쓰자. 기본이 true (@RequestParam(value = "name", required = true)) 이렇게 되어있는거


![20210604_225857](/assets/20210604_225857.png)

이제 실행해 보면 넘어간게 보인다.(get 방식)

![20210604_225958](/assets/20210604_225958.png)

여기서 모델 값을 치환해서 보여줌.


![20210604_230027](/assets/20210604_230027.png)

웹 브라우저에 넘기면 톰캣서버 거치고 hello-mvc의 컨트롤러 호출하고  스프링은 그 메서드 호출하고 모델엔 스프링이라고 viewResolver에 넘겨준다. 이건 뷰를 찾아주고 템플릿에 넘겨주는데 템플릿 똑같은걸 렌더링 해서 변환하고 HTML로 넘겨줌(정적일떈 변환 안했는데 여기선 변환하ㅗㄱ 넘겨준다.

  )
