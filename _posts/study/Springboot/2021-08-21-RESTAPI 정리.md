---
title: "[Springboot] REST API 정리"
layout: post
subtitle: Springboot
date: "2021-08-21-14:58:53 +0900"
categories: study
tags: Springboot
# layout: post
# title:  WebFrontEnd
# subtitle:   "시작하기"
# categories: study
# tags: java
comments: true
---

### 스프링 MVC 구조

- 스프링 MVC는 DispatcherServlet, View Resolver, Handler, View 등으로 구성되어 있다.

스프링 요청처리 흐름도
![20210821_022001](/assets/20210821_022001.png)

1. 클라이언트( 브라우저) 의 요청을 DispatcherServlet이 받는다.

2. 받은 요청을 처리할 수 있는 Handler 의 이름을 HandlerMapping에게 물어본다.

3. HandlerMapping은 요청 URL을 비롯한 여러 요청정보를 가지고 Handler를 판단한다.
4. DispatcherServlet은 HandlerMapping으로부터 선택받은 Handler에게 요청을 보낸다.

5. Handler는 요청을 적절히 처리하고 응답에서 렌더링 해야하는 ViewName을 판단해서 DispatcherServlet에 전송한다.

6. DispatcherServlet은 논리적인 ViewName을 ViewResolver에 전달한다.

7. ViewResolver는 응답에 필요한 View를 생성하여 DispatcherServlet에 보낸다.

8. DispatcherServlet은 해당하는 View에 Model을 전달한다.

9. View는 Model을 참조해서 응답을 생성한다.

10. DispatcherServlet는 생성된 응답을 클라이언트(브라우저)에 반환한다.

---

### 자바 빈즈

자바빈즈(JavaBeans)는 자바로 작성된 소프트웨어 컴포넌트이다.

자바빈즈의 사양은 썬 마이크로시스템즈에서 다음과 같이 정의되었다.

"빌더 형식의 개발도구에서 가시적으로 조작이 가능하고 또한 재사용이 가능한 소프트웨어 컴포넌트이다."

자바빈즈는 많은 측면에서 유사하지만 엔터프라이즈 자바빈즈 (EJB)와 혼동하지 말아야 한다. EJB는 자바 플랫폼, 엔터프라이즈 에디션 (Java EE)의 일부로서 서버계열의 컴포넌트이다.

##### 자바 빈즈의 관례

- 자바 빈즈 클래스로서 작동하기 위해서, 객체 클래스는 명명법, 생성법 그리고 행동에 관련된 일련의 관례를 따라야만 한다.

이러한 관례는 (빌더형식의) 개발도구에서 자바 빈즈와의 연결을 통해 클래스의 사용과 재사용 그리고 클래스의 재배치를 가능하게 한다.

지켜야 할 관례에는 다음과 같은 것이 있다.

1. 클래스는 직렬화 되어야 한다(클래스의 상태를 지속적으로 저장 혹은 복원시키기 위해)

2. 클래스 기본 생성자를 가지고 있어야 한다.
3. 클래스의 속성들은 get, set 혹은 표준 명명법을 따르는 메서드들을 사용해 접근할 수 있어야 한다.

4. 클래스는 필요한 이벤트 처리 메서드들을 포함하고 있어야 한다.

---

##### 자바 빈즈의 직렬화

- 자바 빈즈는 반드시 직렬화 할 필요는 없으나 미리 구현해 두는 것이 무난하다.

본서에서는 편의상 직렬화는 반드시 구현해야 하는 경우가 아니면 구현하지 않는다.

직렬화가 필요한 경우는 다음과 같다.

1. JPA 프로바이더 제공하는 캐시기술이 Serializable 인터페이스를 요구하는 경우

2. 자바 빈즈 객체를 스코프에서 관리하는 경우

3. 다수의 서버에서 세션 객체를 공유해야 하는 경우

---

### 롬복 어노테이션

- 롬복(Lombok) 을 활용하면 약간의 애너테이션 설정만으로 소스 코드가 컴파일 될때 자동으로 추가 코드를 만들 수 있다.

- 롬복 어노테이션의

| 어노테이션              | 설명                                                                                                           |
| ----------------------- | -------------------------------------------------------------------------------------------------------------- |
| @Getter/@Setter         | 객체의 게터와 세터를 생성한다.                                                                                 |
| @ToString               | toString() 메서드를 생성한다.                                                                                  |
| @EqualsAndHashCode      | 자바의 equals() 메서드와 hashCode()메서드를 생성한다.                                                          |
| @NoArgsConstructor      | 인자가 없는 기본 생성자를 생성한다.                                                                            |
| @RequiredArgsConstuctor | @NonNull이 적용된 필드 값이나 final로 선언된 필드값만 인자로 받는 생성자를 생성한다.                           |
| @AllArgsConstructor     | 객체의 모든 필드값을 인자로 받는 생성자를 생성한다.                                                            |
| @Data                   | @ToString, @Getter, @Setter, @EqualsAndHashCode, @RequiredArgsConstuctor 어노테이션을 합쳐노은 어노테이션이다. |
| @Builder                | 빌더 패턴을 사용할 수 있도록 코드를 생성한다.                                                                  |
| @Log(Slf4j)             | 자동으로 생기는 log라는 변수를 이용해서 로그를 출력할 수 있다.                                                 |

---

### REST 소개

REST(Representational State Transfer)는 월드 와이드 웹과 같은 분산 하이퍼 미디어 시스템을 위한 소프트웨어 아키텍쳐의 한 형식이다.

엄격한 의미로 REST는 네트워크 아키텍쳐 원리의 모음이다. 여기서 "네트워크 아키텍쳐""란 자원을 정의하고 자원에 대한 주소를 지정하는 방법 전반을 일컫는다.

간단한 의미로는 웹상의 자료를 HTTP위에서 SOAP이나 쿠키를 통한 세션 트랙킹 같은 별도의 전송 계층 없이 전송하기 위한 아주 간단한 인터페이스를 말한다.

REST 아키텍쳐 형식을 따르면 HTTP나 WWW이 아닌 아주 커다란 소프트웨어 시스템을 설계도 가능하다.

또한 리모트 프로시저 콜 대신 간단한 XMㅣ과 HTTP 인터페이스를 이용해 설계하는 것 또한 가능하다.

### RESTFUL 제약조건

REST 제약조건들을 제대로 지키면서 REST아키텍쳐를 만드는 것을 RESTful이라고 한다.

다음 제약 조건들을 준수하는 한 개별 컴포넌트들을 자유로이 구현할 수 있다.

- 클라이언트-서버 구조: 일관적인 인터페이스로 분리되어야 한다.

- 무상태성(stateless): 서버에 클라이언트의 상태정보를 저장하지 않는다.

- 캐시기능(cacheable): 클라이언트의 응답을 캐시할 수 있어야 하며, 캐싱은 클라이언트-서버간 상호작용을 부분적으로 또는 완전하게 제거하여 scalability와 성능을 향상시킨다.

- 계층화 시스템(layered system)
  : 중간서버는 로드밸런싱 기능이나 공유캐시기능을 제공함으로서 확장성 있는 시스템을 구성하는데 유용하다

- 코드 온 디맨드(code on demand)
  : 서버가 자바 애플릿이나 자바스크립트 실행코드의 제공을 통해 클라이언트가 실행시킬수 있는 로직을 전송하여 기능을 확장시킬 수 있다.

- 인터페이스 일관성(uniform interface)
  : 아키텍처를 단순화 시키고 작은 단위로 분리함으로써 클라이언트- 서버 각 파트가 독립적으로 개선되게 해준다.

### REST 인터페이스 원칙에 대한 가이드

가이드를 충실히 이행했는지에 따라 REST를 제대로 썼는지 판단할 수 있다.

1. 자원식별
   : 요청 내의 기술된 개별자원을 식별할 수 있어야 한다. 웹 기반의 REST 시스템에서의 URI 사용을 예로 들 수 있다.

2. 메시지 통한 리소스 조작
   : 클라이언트가 어떤 자원을 지칭하는 메시지와 특정 메타데이터만 가지고 있다면 이것으로 서버상의 해당 자원을 수정, 삭제하는 충분한 정보를 갖고 있다고 볼 수 있다.

3. 자기 서술적 메시지
   : 각 메시지에는 처리방법에 대한 충분한 정보가 들어있어야 한다.

4. 애플리케이션 상태에 대한 엔진으로서의 하이퍼미디어(HATEOAS)
   : 클라이언트에 응답할 떄 단순히 결과 데이터만을 제공하는 것이 아니라 URI를 함꼐 제공해야한다는 것이다.
