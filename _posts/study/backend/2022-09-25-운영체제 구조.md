---
title: "[OS] 운영체제 구조"
layout: post
subtitle: backend
date: "2022-09-24-04:42:51 +0900"

categories: study
tags: backend
# layout: post
# title:  WebFrontEnd
# subtitle:   "시작하기"
# categories: study
# tags: java
comments: true
---



#### 운영체제 개념

운영체제 또는 오퍼레이팅 시스템 (Operating 은 시스템 하드웨어를 관리할 뿐 아니라 응용 소프트웨어를 실행하기 위하여 하드웨어 추상화 플랫폼과 공통 시스템 서비스를 제공하는 시스템 소프트웨어이다



  ![20220925_153225](https://user-images.githubusercontent.com/37941513/192134141-54d2d2b3-7047-4568-8511-620a4145f7fa.png)

#### 운영체제 부팅 과정(LINUX)

WINDOW 도 유사한 과정을 거치지만 아래는 LINUX 기준으로 명시함.


- BIOS : ROM BIOS : Basic Input/Output System (CMOS)
    - POST (Power On Self Test) 및 물리적 Boot 디바이스 선정
PC 전원이 맨 처음 들어 오게 되면 BIOS란 하드 기능이 탑재된 소프트웨어가 동작하면서 기본적으로 POST 체크하고 물리적으로 동작하는지 체크함

- MBR : MBR Master Boot Record
    - HDD의 특정 섹터 (0 번 섹터 512Byte)

위 BIOS 기능에서 문제 없으면 MBR 기능을 수행하게 된다.

- GRUB : 부트로더 : Bootloader
  - 소프트웨어 영역 멀티 부트 등 처리를 위한 멀티 스테이지 부트
  - LILO, GRUB (Grand Unified Bootloader), GRUB2, uboot

부트로더라는 소프트웨어 읽어서 어느 영역으로 부팅할 건지 결정해준다. (과거에 없던거로 MBR에서 부팅해주는 수가 있었느나 다양한 부팅옵션이나(멀티부팅) 운영체제의 복구옵션이 생기면서 공간이 부족해져서 부트로더라는 소프트웨어로 분리되며 생기게 되었다. )

- Kernel: 커널: Linux Kernel

  - 운영체제 소프트웨어 메모리에 올려서 구동 HW 디바이스 , FS 등
  - sbin init 을 실행하며 initrd 패키지의 실행 pid 1)

커널이 구동되면서 각종 디바이스들을 초기화 하고, 각 벤더사들에서 하드 기능들을 모두 활용하게 할 수 있는 디바이스들을 구성하면서 운영체제가 시작하게 됨.

- Init : 부팅 : Init process

  - 루트 유저 프로세스로 systemd 등의 부팅 과정 수행
  -  etc inittab 등 실행

메모리에 운영체제가 다 올라가면  init을 시작함

- Runlevel : 부팅 : Runlevel etc rc.d rc *.
  - 소프트웨어 부트 스크립트

각 환경에 맞는 응용 소프트웨어(서비스)들이 시작되는데 이게 Runlevel. 이건 윈도우엔 없고 리눅스 계열 OS만 존재한다.

부트로더는 초급때는 사용하지 않는다.

--------


#### 우분투 운영체제의 부트로더

- grub.cfg : etc grub.d /* 내용들과 etc /default/grub 을 통해 생성
- /etc/fstab : 우분투 리눅스가 부팅과정 거치면서 파일 마운트 하는 과정
파일시스템 마운트 하는 과정 거쳐서 사용자에게 붙여주는 것.

#### 우분투 운영체제의 부팅 프로세스

##### 우분투 과정에 있는 init() 과정

고전적으로는 유닉스 계열에서 출발한 systemfive라는 init과정이였음.
근데 이 부팅 시스템도 요구사항이나 다양한 프로세스가 생겼고 14, 16을 거쳐 업그레이드 되어 갔다.

##### systemd란

startup 프로세스를 구동하는 시스템
- 기존 init 보다 훨씬 (?) 단순한 프로세스
- 동시성 병행 실행 ) 을 제공하며 부팅 속도를 대폭 향상 시킴
- 프로세스간의 dependency 를 손쉽게 처리 함
- 서비스 모니터링의 편리함 재시작 , Crash 등에 대한 모니터링
- 저널 로깅 시스템을 사용한 편리한 모니터링
- 컴포넌트의 손쉬운 추가 삭제



###### 우분투에서는 부팅 프로세스 명령어가 혼재되어있다(SysV, Upstart, systemd)

- sudo service status all
- sudo service network manager restart
- sudo systemctl restart network manager

이런식으로 어떤 방식의 프로세스 써도 되긴 한다.
<br>

그래도 같은 역할을 하는 스크립트의 경우 init 명령어 보다는 systemd 명령어를 사용하는 것을 권장한다.

![20220925_165822](https://user-images.githubusercontent.com/37941513/192134162-5622dc3f-d586-4c7d-b093-9c1f773fc7df.png)


------------


#### 다중 사용자

- 여러 명이 컴퓨터를 같이 사용하게 되면 점점 각자의 비밀이 생기고 또 각자가 해야 할 일과 하지 말아야 할 일들에 대한 권한이 생기면서 다중 사용자 시스템이 기능성을 갖게 돼야 되는 상황이 오게 되었다.

- 각자의 아이디로 로그인해서 컴퓨터를 사용할 수 있다는 장점은 있지만 단점으로 다중사용자 시스템이 되는 순간에 시스템의 복잡도가 높아진다. 이렇게 다중 사용자는 양면성을 가진다.
###### 뭐가 됐건 간에 어쨌든 유닉스 시스템은 다중사용자


윈도우에서는 나 자신이 관리자. 내가 모든걸 사용할 수 있고 설치 할 때 권한 묻긴 하지만 확인만 누르면 뭐든 실행이 가능하다.

<br>


#### 사용자 권한


![20220925_171244](https://user-images.githubusercontent.com/37941513/192134374-c6a65ae3-cf84-402d-abf8-e843d05019e9.png)


리눅스는 관리자와 사용자가 명확하게 구분이 된다.
다수의 사용자가 있고 시스템 관리자가 있고 권한을 빌려 쓸 수 있는 사용자가 있다.

이 시스템 관리자를 루트 관리자라 부르는데 이 차이를 인지하지 못 하고 시스템 운영이 어렵다 보니 자꾸 루트 사용자로 로그인 해서 작업하는 실수 범함.
<br>
그래서 우분투는 root 사용자를 막음(필요하면 활성화는 되나. 사람들이 이 막강한 권한을 남발해서 이걸 막아둠.)

내 PC라고 내가 관리자가 아님. ROOT 관리자를 쓰면 편하기는 하나 추천되지 않는 방식. 나는 그냥 사용자고, 필요할 때 이걸 빌려서 사용한다고 생각하면 되고 이게 리눅스의 철학.
